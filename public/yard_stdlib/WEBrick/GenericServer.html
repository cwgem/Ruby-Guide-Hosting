<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: WEBrick::GenericServer
  
    &mdash; Ruby 1.9 Ruby Standard Library
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (G)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../WEBrick.html" title="WEBrick (module)">WEBrick</a></span></span>
     &raquo; 
    <span class="title">GenericServer</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: WEBrick::GenericServer
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">WEBrick::GenericServer</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/webrick/ssl.rb<span class="defines">,<br />
  lib/webrick/server.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="HTTPServer.html" title="WEBrick::HTTPServer (class)">HTTPServer</a></span></p>
</div>


  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#config-instance_method" title="#config (instance method)">- (Object) <strong>config</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute config.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#listeners-instance_method" title="#listeners (instance method)">- (Object) <strong>listeners</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute listeners.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#logger-instance_method" title="#logger (instance method)">- (Object) <strong>logger</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute logger.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#status-instance_method" title="#status (instance method)">- (Object) <strong>status</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute status.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#tokens-instance_method" title="#tokens (instance method)">- (Object) <strong>tokens</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute tokens.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%5B%5D-instance_method" title="#[] (instance method)">- (Object) <strong>[]</strong>(key) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#accept_client-instance_method" title="#accept_client (instance method)">- (Object) <strong>accept_client</strong>(svr) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#call_callback-instance_method" title="#call_callback (instance method)">- (Object) <strong>call_callback</strong>(callback_name, *args) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (GenericServer) <strong>initialize</strong>(config = {}, default = Config::General) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of GenericServer.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#listen-instance_method" title="#listen (instance method)">- (Object) <strong>listen</strong>(address, port) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run-instance_method" title="#run (instance method)">- (Object) <strong>run</strong>(sock) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#setup_ssl_context-instance_method" title="#setup_ssl_context (instance method)">- (Object) <strong>setup_ssl_context</strong>(config) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#shutdown-instance_method" title="#shutdown (instance method)">- (Object) <strong>shutdown</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ssl_context-instance_method" title="#ssl_context (instance method)">- (Object) <strong>ssl_context</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start-instance_method" title="#start (instance method)">- (Object) <strong>start</strong>(&amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start_thread-instance_method" title="#start_thread (instance method)">- (Object) <strong>start_thread</strong>(sock, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stop-instance_method" title="#stop (instance method)">- (Object) <strong>stop</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="WEBrick::GenericServer (class)">GenericServer</a></span></tt>) <strong>initialize</strong>(config = {}, default = Config::General) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>A new instance of GenericServer</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/server.rb', line 51</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id config'>config</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id default'>default</span><span class='op'>=</span><span class='const'>Config</span><span class='op'>::</span><span class='const'>General</span><span class='rparen'>)</span>
  <span class='ivar'>@config</span> <span class='op'>=</span> <span class='id default'>default</span><span class='period'>.</span><span class='id dup'>dup</span><span class='period'>.</span><span class='id update'>update</span><span class='lparen'>(</span><span class='id config'>config</span><span class='rparen'>)</span>
  <span class='ivar'>@status</span> <span class='op'>=</span> <span class='symbol'>:Stop</span>
  <span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:Logger</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='const'>Log</span><span class='op'>::</span><span class='id new'>new</span>
  <span class='ivar'>@logger</span> <span class='op'>=</span> <span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:Logger</span><span class='rbracket'>]</span>

  <span class='ivar'>@tokens</span> <span class='op'>=</span> <span class='const'>SizedQueue</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:MaxClients</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:MaxClients</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id times'>times</span><span class='lbrace'>{</span> <span class='ivar'>@tokens</span><span class='period'>.</span><span class='id push'>push</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='rparen'>)</span> <span class='rbrace'>}</span>

  <span class='id webrickv'>webrickv</span> <span class='op'>=</span> <span class='const'>WEBrick</span><span class='op'>::</span><span class='const'>VERSION</span>
  <span class='id rubyv'>rubyv</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>RUBY_VERSION</span><span class='rbrace'>}</span><span class='tstring_content'> (</span><span class='embexpr_beg'>#{</span><span class='const'>RUBY_RELEASE_DATE</span><span class='rbrace'>}</span><span class='tstring_content'>) [</span><span class='embexpr_beg'>#{</span><span class='const'>RUBY_PLATFORM</span><span class='rbrace'>}</span><span class='tstring_content'>]</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@logger</span><span class='period'>.</span><span class='id info'>info</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>WEBrick </span><span class='embexpr_beg'>#{</span><span class='id webrickv'>webrickv</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='ivar'>@logger</span><span class='period'>.</span><span class='id info'>info</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ruby </span><span class='embexpr_beg'>#{</span><span class='id rubyv'>rubyv</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='ivar'>@listeners</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>unless</span> <span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:DoNotListen</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:Listen</span><span class='rbracket'>]</span>
      <span class='id warn'>warn</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:Listen option is deprecated; use GenericServer#listen</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id listen'>listen</span><span class='lparen'>(</span><span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:BindAddress</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:Port</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:Port</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='int'>0</span>
      <span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:Port</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@listeners</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id addr'>addr</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="config-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="config-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>config</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute config</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


49
50
51</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/server.rb', line 49</span>

<span class='kw'>def</span> <span class='id config'>config</span>
  <span class='ivar'>@config</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="listeners-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="listeners-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>listeners</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute listeners</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


49
50
51</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/server.rb', line 49</span>

<span class='kw'>def</span> <span class='id listeners'>listeners</span>
  <span class='ivar'>@listeners</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="logger-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="logger-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>logger</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute logger</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


49
50
51</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/server.rb', line 49</span>

<span class='kw'>def</span> <span class='id logger'>logger</span>
  <span class='ivar'>@logger</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="status-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="status-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>status</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute status</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


49
50
51</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/server.rb', line 49</span>

<span class='kw'>def</span> <span class='id status'>status</span>
  <span class='ivar'>@status</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="tokens-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="tokens-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>tokens</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute tokens</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


49
50
51</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/server.rb', line 49</span>

<span class='kw'>def</span> <span class='id tokens'>tokens</span>
  <span class='ivar'>@tokens</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="[]-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>[]</strong>(key) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


77
78
79</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/server.rb', line 77</span>

<span class='kw'>def</span> <span class='op'>[]</span><span class='lparen'>(</span><span class='id key'>key</span><span class='rparen'>)</span>
  <span class='ivar'>@config</span><span class='lbracket'>[</span><span class='id key'>key</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="accept_client-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>accept_client</strong>(svr) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


163
164
165
166
167
168
169
170
171
172
173
174
175
176
177</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/server.rb', line 163</span>

<span class='kw'>def</span> <span class='id accept_client'>accept_client</span><span class='lparen'>(</span><span class='id svr'>svr</span><span class='rparen'>)</span>
  <span class='id sock'>sock</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>begin</span>
    <span class='id sock'>sock</span> <span class='op'>=</span> <span class='id svr'>svr</span><span class='period'>.</span><span class='id accept'>accept</span>
    <span class='id sock'>sock</span><span class='period'>.</span><span class='id sync'>sync</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='const'>Utils</span><span class='op'>::</span><span class='id set_non_blocking'>set_non_blocking</span><span class='lparen'>(</span><span class='id sock'>sock</span><span class='rparen'>)</span>
    <span class='const'>Utils</span><span class='op'>::</span><span class='id set_close_on_exec'>set_close_on_exec</span><span class='lparen'>(</span><span class='id sock'>sock</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ECONNRESET</span><span class='comma'>,</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ECONNABORTED</span><span class='comma'>,</span>
         <span class='const'>Errno</span><span class='op'>::</span><span class='const'>EPROTO</span><span class='comma'>,</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>EINVAL</span> <span class='op'>=&gt;</span> <span class='id ex'>ex</span>
  <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id ex'>ex</span>
    <span class='id msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id ex'>ex</span><span class='period'>.</span><span class='id class'>class</span><span class='rbrace'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id ex'>ex</span><span class='period'>.</span><span class='id message'>message</span><span class='rbrace'>}</span><span class='tstring_content'>\n\t</span><span class='embexpr_beg'>#{</span><span class='id ex'>ex</span><span class='period'>.</span><span class='id backtrace'>backtrace</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@logger</span><span class='period'>.</span><span class='id error'>error</span> <span class='id msg'>msg</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id sock'>sock</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="call_callback-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>call_callback</strong>(callback_name, *args) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


212
213
214
215
216</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/server.rb', line 212</span>

<span class='kw'>def</span> <span class='id call_callback'>call_callback</span><span class='lparen'>(</span><span class='id callback_name'>callback_name</span><span class='comma'>,</span> <span class='op'>*</span><span class='id args'>args</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id cb'>cb</span> <span class='op'>=</span> <span class='ivar'>@config</span><span class='lbracket'>[</span><span class='id callback_name'>callback_name</span><span class='rbracket'>]</span>
    <span class='id cb'>cb</span><span class='period'>.</span><span class='id call'>call</span><span class='lparen'>(</span><span class='op'>*</span><span class='id args'>args</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="listen-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>listen</strong>(address, port) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


87
88
89</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/ssl.rb', line 87</span>

<span class='kw'>def</span> <span class='id listen'>listen</span><span class='lparen'>(</span><span class='id address'>address</span><span class='comma'>,</span> <span class='id port'>port</span><span class='rparen'>)</span>
  <span class='ivar'>@listeners</span> <span class='op'>+=</span> <span class='const'>Utils</span><span class='op'>::</span><span class='id create_listeners'>create_listeners</span><span class='lparen'>(</span><span class='id address'>address</span><span class='comma'>,</span> <span class='id port'>port</span><span class='comma'>,</span> <span class='ivar'>@logger</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="run-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>run</strong>(sock) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


157
158
159</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/server.rb', line 157</span>

<span class='kw'>def</span> <span class='id run'>run</span><span class='lparen'>(</span><span class='id sock'>sock</span><span class='rparen'>)</span>
  <span class='ivar'>@logger</span><span class='period'>.</span><span class='id fatal'>fatal</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>run() must be provided by user.</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="setup_ssl_context-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>setup_ssl_context</strong>(config) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/ssl.rb', line 103</span>

<span class='kw'>def</span> <span class='id setup_ssl_context'>setup_ssl_context</span><span class='lparen'>(</span><span class='id config'>config</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:SSLCertificate</span><span class='rbracket'>]</span>
    <span class='id cn'>cn</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:SSLCertName</span><span class='rbracket'>]</span>
    <span class='id comment'>comment</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:SSLCertComment</span><span class='rbracket'>]</span>
    <span class='id cert'>cert</span><span class='comma'>,</span> <span class='id key'>key</span> <span class='op'>=</span> <span class='const'>Utils</span><span class='op'>::</span><span class='id create_self_signed_cert'>create_self_signed_cert</span><span class='lparen'>(</span><span class='int'>1024</span><span class='comma'>,</span> <span class='id cn'>cn</span><span class='comma'>,</span> <span class='id comment'>comment</span><span class='rparen'>)</span>
    <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:SSLCertificate</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id cert'>cert</span>
    <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:SSLPrivateKey</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id key'>key</span>
  <span class='kw'>end</span>
  <span class='id ctx'>ctx</span> <span class='op'>=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>SSL</span><span class='op'>::</span><span class='const'>SSLContext</span><span class='period'>.</span><span class='id new'>new</span>
  <span class='id ctx'>ctx</span><span class='period'>.</span><span class='id key'>key</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:SSLPrivateKey</span><span class='rbracket'>]</span>
  <span class='id ctx'>ctx</span><span class='period'>.</span><span class='id cert'>cert</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:SSLCertificate</span><span class='rbracket'>]</span>
  <span class='id ctx'>ctx</span><span class='period'>.</span><span class='id client_ca'>client_ca</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:SSLClientCA</span><span class='rbracket'>]</span>
  <span class='id ctx'>ctx</span><span class='period'>.</span><span class='id extra_chain_cert'>extra_chain_cert</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:SSLExtraChainCert</span><span class='rbracket'>]</span>
  <span class='id ctx'>ctx</span><span class='period'>.</span><span class='id ca_file'>ca_file</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:SSLCACertificateFile</span><span class='rbracket'>]</span>
  <span class='id ctx'>ctx</span><span class='period'>.</span><span class='id ca_path'>ca_path</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:SSLCACertificatePath</span><span class='rbracket'>]</span>
  <span class='id ctx'>ctx</span><span class='period'>.</span><span class='id cert_store'>cert_store</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:SSLCertificateStore</span><span class='rbracket'>]</span>
  <span class='id ctx'>ctx</span><span class='period'>.</span><span class='id verify_mode'>verify_mode</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:SSLVerifyClient</span><span class='rbracket'>]</span>
  <span class='id ctx'>ctx</span><span class='period'>.</span><span class='id verify_depth'>verify_depth</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:SSLVerifyDepth</span><span class='rbracket'>]</span>
  <span class='id ctx'>ctx</span><span class='period'>.</span><span class='id verify_callback'>verify_callback</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:SSLVerifyCallback</span><span class='rbracket'>]</span>
  <span class='id ctx'>ctx</span><span class='period'>.</span><span class='id timeout'>timeout</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:SSLTimeout</span><span class='rbracket'>]</span>
  <span class='id ctx'>ctx</span><span class='period'>.</span><span class='id options'>options</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:SSLOptions</span><span class='rbracket'>]</span>
  <span class='id ctx'>ctx</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="shutdown-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>shutdown</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/server.rb', line 134</span>

<span class='kw'>def</span> <span class='id shutdown'>shutdown</span>
  <span class='id stop'>stop</span>
  <span class='ivar'>@listeners</span><span class='period'>.</span><span class='id each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id s'>s</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='ivar'>@logger</span><span class='period'>.</span><span class='id debug?'>debug?</span>
      <span class='id addr'>addr</span> <span class='op'>=</span> <span class='id s'>s</span><span class='period'>.</span><span class='id addr'>addr</span>
      <span class='ivar'>@logger</span><span class='period'>.</span><span class='id debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>close TCPSocket(</span><span class='embexpr_beg'>#{</span><span class='id addr'>addr</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_content'>, </span><span class='embexpr_beg'>#{</span><span class='id addr'>addr</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>begin</span>
      <span class='id s'>s</span><span class='period'>.</span><span class='id shutdown'>shutdown</span>
    <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ENOTCONN</span>
      <span class='comment'># when `Errno::ENOTCONN: Socket is not connected' on some platforms,
</span>      <span class='comment'># call #close instead of #shutdown.
</span>      <span class='comment'># (ignore @config[:ShutdownSocketWithoutClose])
</span>      <span class='id s'>s</span><span class='period'>.</span><span class='id close'>close</span>
    <span class='kw'>else</span>
      <span class='kw'>unless</span> <span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:ShutdownSocketWithoutClose</span><span class='rbracket'>]</span>
        <span class='id s'>s</span><span class='period'>.</span><span class='id close'>close</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='rbrace'>}</span>
  <span class='ivar'>@listeners</span><span class='period'>.</span><span class='id clear'>clear</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="ssl_context-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>ssl_context</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


82
83
84</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/ssl.rb', line 82</span>

<span class='kw'>def</span> <span class='id ssl_context'>ssl_context</span>
  <span class='ivar'>@ssl_context</span> <span class='op'>||=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="start-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>start</strong>(&amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="ServerError.html" title="WEBrick::ServerError (class)">ServerError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/server.rb', line 85</span>

<span class='kw'>def</span> <span class='id start'>start</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>ServerError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>already started.</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='ivar'>@status</span> <span class='op'>!=</span> <span class='symbol'>:Stop</span>
  <span class='id server_type'>server_type</span> <span class='op'>=</span> <span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:ServerType</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='const'>SimpleServer</span>

  <span class='id server_type'>server_type</span><span class='period'>.</span><span class='id start'>start</span><span class='lbrace'>{</span>
    <span class='ivar'>@logger</span><span class='period'>.</span><span class='id info'>info</span> \
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='rbrace'>}</span><span class='tstring_content'>#start: pid=</span><span class='embexpr_beg'>#{</span><span class='gvar'>$$</span><span class='rbrace'>}</span><span class='tstring_content'> port=</span><span class='embexpr_beg'>#{</span><span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:Port</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id call_callback'>call_callback</span><span class='lparen'>(</span><span class='symbol'>:StartCallback</span><span class='rparen'>)</span>

    <span class='id thgroup'>thgroup</span> <span class='op'>=</span> <span class='const'>ThreadGroup</span><span class='period'>.</span><span class='id new'>new</span>
    <span class='ivar'>@status</span> <span class='op'>=</span> <span class='symbol'>:Running</span>
    <span class='kw'>while</span> <span class='ivar'>@status</span> <span class='op'>==</span> <span class='symbol'>:Running</span>
      <span class='kw'>begin</span>
        <span class='kw'>if</span> <span class='id svrs'>svrs</span> <span class='op'>=</span> <span class='const'>IO</span><span class='period'>.</span><span class='id select'>select</span><span class='lparen'>(</span><span class='ivar'>@listeners</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='float'>2.0</span><span class='rparen'>)</span>
          <span class='id svrs'>svrs</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id svr'>svr</span><span class='op'>|</span>
            <span class='ivar'>@tokens</span><span class='period'>.</span><span class='id pop'>pop</span>          <span class='comment'># blocks while no token is there.
</span>            <span class='kw'>if</span> <span class='id sock'>sock</span> <span class='op'>=</span> <span class='id accept_client'>accept_client</span><span class='lparen'>(</span><span class='id svr'>svr</span><span class='rparen'>)</span>
              <span class='id sock'>sock</span><span class='period'>.</span><span class='id do_not_reverse_lookup'>do_not_reverse_lookup</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:DoNotReverseLookup</span><span class='rbracket'>]</span>
              <span class='id th'>th</span> <span class='op'>=</span> <span class='id start_thread'>start_thread</span><span class='lparen'>(</span><span class='id sock'>sock</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
              <span class='id th'>th</span><span class='lbracket'>[</span><span class='symbol'>:WEBrickThread</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
              <span class='id thgroup'>thgroup</span><span class='period'>.</span><span class='id add'>add</span><span class='lparen'>(</span><span class='id th'>th</span><span class='rparen'>)</span>
            <span class='kw'>else</span>
              <span class='ivar'>@tokens</span><span class='period'>.</span><span class='id push'>push</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='rparen'>)</span>
            <span class='kw'>end</span>
          <span class='rbrace'>}</span>
        <span class='kw'>end</span>
      <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>EBADF</span><span class='comma'>,</span> <span class='const'>IOError</span> <span class='op'>=&gt;</span> <span class='id ex'>ex</span>
        <span class='comment'># if the listening socket was closed in GenericServer#shutdown,
</span>        <span class='comment'># IO::select raise it.
</span>      <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id ex'>ex</span>
        <span class='id msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id ex'>ex</span><span class='period'>.</span><span class='id class'>class</span><span class='rbrace'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id ex'>ex</span><span class='period'>.</span><span class='id message'>message</span><span class='rbrace'>}</span><span class='tstring_content'>\n\t</span><span class='embexpr_beg'>#{</span><span class='id ex'>ex</span><span class='period'>.</span><span class='id backtrace'>backtrace</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='ivar'>@logger</span><span class='period'>.</span><span class='id error'>error</span> <span class='id msg'>msg</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='ivar'>@logger</span><span class='period'>.</span><span class='id info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>going to shutdown ...</span><span class='tstring_end'>&quot;</span></span>
    <span class='id thgroup'>thgroup</span><span class='period'>.</span><span class='id list'>list</span><span class='period'>.</span><span class='id each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id th'>th</span><span class='op'>|</span> <span class='id th'>th</span><span class='period'>.</span><span class='id join'>join</span> <span class='kw'>if</span> <span class='id th'>th</span><span class='lbracket'>[</span><span class='symbol'>:WEBrickThread</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
    <span class='id call_callback'>call_callback</span><span class='lparen'>(</span><span class='symbol'>:StopCallback</span><span class='rparen'>)</span>
    <span class='ivar'>@logger</span><span class='period'>.</span><span class='id info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='rbrace'>}</span><span class='tstring_content'>#start done.</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@status</span> <span class='op'>=</span> <span class='symbol'>:Stop</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="start_thread-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>start_thread</strong>(sock, &amp;block) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/server.rb', line 179</span>

<span class='kw'>def</span> <span class='id start_thread'>start_thread</span><span class='lparen'>(</span><span class='id sock'>sock</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='const'>Thread</span><span class='period'>.</span><span class='id start'>start</span><span class='lbrace'>{</span>
    <span class='kw'>begin</span>
      <span class='const'>Thread</span><span class='period'>.</span><span class='id current'>current</span><span class='lbracket'>[</span><span class='symbol'>:WEBrickSocket</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id sock'>sock</span>
      <span class='kw'>begin</span>
        <span class='id addr'>addr</span> <span class='op'>=</span> <span class='id sock'>sock</span><span class='period'>.</span><span class='id peeraddr'>peeraddr</span>
        <span class='ivar'>@logger</span><span class='period'>.</span><span class='id debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>accept: </span><span class='embexpr_beg'>#{</span><span class='id addr'>addr</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id addr'>addr</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>rescue</span> <span class='const'>SocketError</span>
        <span class='ivar'>@logger</span><span class='period'>.</span><span class='id debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>accept: &lt;address unknown&gt;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id raise'>raise</span>
      <span class='kw'>end</span>
      <span class='id call_callback'>call_callback</span><span class='lparen'>(</span><span class='symbol'>:AcceptCallback</span><span class='comma'>,</span> <span class='id sock'>sock</span><span class='rparen'>)</span>
      <span class='id block'>block</span> <span class='op'>?</span> <span class='id block'>block</span><span class='period'>.</span><span class='id call'>call</span><span class='lparen'>(</span><span class='id sock'>sock</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='id run'>run</span><span class='lparen'>(</span><span class='id sock'>sock</span><span class='rparen'>)</span>
    <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ENOTCONN</span>
      <span class='ivar'>@logger</span><span class='period'>.</span><span class='id debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Errno::ENOTCONN raised</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>rescue</span> <span class='const'>ServerError</span> <span class='op'>=&gt;</span> <span class='id ex'>ex</span>
      <span class='id msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id ex'>ex</span><span class='period'>.</span><span class='id class'>class</span><span class='rbrace'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id ex'>ex</span><span class='period'>.</span><span class='id message'>message</span><span class='rbrace'>}</span><span class='tstring_content'>\n\t</span><span class='embexpr_beg'>#{</span><span class='id ex'>ex</span><span class='period'>.</span><span class='id backtrace'>backtrace</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='ivar'>@logger</span><span class='period'>.</span><span class='id error'>error</span> <span class='id msg'>msg</span>
    <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id ex'>ex</span>
      <span class='ivar'>@logger</span><span class='period'>.</span><span class='id error'>error</span> <span class='id ex'>ex</span>
    <span class='kw'>ensure</span>
      <span class='ivar'>@tokens</span><span class='period'>.</span><span class='id push'>push</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='rparen'>)</span>
      <span class='const'>Thread</span><span class='period'>.</span><span class='id current'>current</span><span class='lbracket'>[</span><span class='symbol'>:WEBrickSocket</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>nil</span>
      <span class='kw'>if</span> <span class='id addr'>addr</span>
        <span class='ivar'>@logger</span><span class='period'>.</span><span class='id debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>close: </span><span class='embexpr_beg'>#{</span><span class='id addr'>addr</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id addr'>addr</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>else</span>
        <span class='ivar'>@logger</span><span class='period'>.</span><span class='id debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>close: &lt;address unknown&gt;</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
      <span class='id sock'>sock</span><span class='period'>.</span><span class='id close'>close</span>
    <span class='kw'>end</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="stop-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>stop</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


128
129
130
131
132</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/server.rb', line 128</span>

<span class='kw'>def</span> <span class='id stop'>stop</span>
  <span class='kw'>if</span> <span class='ivar'>@status</span> <span class='op'>==</span> <span class='symbol'>:Running</span>
    <span class='ivar'>@status</span> <span class='op'>=</span> <span class='symbol'>:Shutdown</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sat Sep  3 14:10:58 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.9.3).
</div>

  </body>
</html>