<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: WEBrick::HTTPResponse
  
    &mdash; Ruby 1.9 Ruby Standard Library
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (H)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../WEBrick.html" title="WEBrick (module)">WEBrick</a></span></span>
     &raquo; 
    <span class="title">HTTPResponse</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: WEBrick::HTTPResponse
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">WEBrick::HTTPResponse</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/webrick/httpresponse.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>An HTTP response.</p>


  </div>
</div>
<div class="tags">
  
</div>

  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#body-instance_method" title="#body (instance method)">- (Object) <strong>body</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Body may be a String or IO subclass.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#config-instance_method" title="#config (instance method)">- (Object) <strong>config</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute config.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#cookies-instance_method" title="#cookies (instance method)">- (Object) <strong>cookies</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute cookies.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#filename-instance_method" title="#filename (instance method)">- (Object) <strong>filename</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute filename.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#header-instance_method" title="#header (instance method)">- (Object) <strong>header</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute header.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#http_version-instance_method" title="#http_version (instance method)">- (Object) <strong>http_version</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute http_version.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#keep_alive-instance_method" title="#keep_alive (instance method)">- (Object) <strong>keep_alive</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute keep_alive.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#reason_phrase-instance_method" title="#reason_phrase (instance method)">- (Object) <strong>reason_phrase</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute reason_phrase.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#request_http_version-instance_method" title="#request_http_version (instance method)">- (Object) <strong>request_http_version</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute request_http_version.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#request_method-instance_method" title="#request_method (instance method)">- (Object) <strong>request_method</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute request_method.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#request_uri-instance_method" title="#request_uri (instance method)">- (Object) <strong>request_uri</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute request_uri.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#sent_size-instance_method" title="#sent_size (instance method)">- (Object) <strong>sent_size</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute sent_size.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#status-instance_method" title="#status (instance method)">- (Object) <strong>status</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute status.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%5B%5D-instance_method" title="#[] (instance method)">- (Object) <strong>[]</strong>(field) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Retrieves the response header <tt>field</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%5B%5D%3D-instance_method" title="#[]= (instance method)">- (Object) <strong>[]=</strong>(field, value) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the response header <tt>field</tt> to <tt>value</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#_send_file-instance_method" title="#_send_file (instance method)">- (Object) <strong>_send_file</strong>(output, input, offset, size) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#_write_data-instance_method" title="#_write_data (instance method)">- (Object) <strong>_write_data</strong>(socket, data) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#chunked%3D-instance_method" title="#chunked= (instance method)">- (Object) <strong>chunked=</strong>(val) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Enables chunked transfer encoding.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#chunked%3F-instance_method" title="#chunked? (instance method)">- (Boolean) <strong>chunked?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Will this response body be returned using chunked transfer-encoding?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#content_length-instance_method" title="#content_length (instance method)">- (Object) <strong>content_length</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The content-length header.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#content_length%3D-instance_method" title="#content_length= (instance method)">- (Object) <strong>content_length=</strong>(len) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the content-length header to <tt>len</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#content_type-instance_method" title="#content_type (instance method)">- (Object) <strong>content_type</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The content-type header.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#content_type%3D-instance_method" title="#content_type= (instance method)">- (Object) <strong>content_type=</strong>(type) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the content-type header to <tt>type</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each-instance_method" title="#each (instance method)">- (Object) <strong>each</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Iterates over each header in the resopnse.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (HTTPResponse) <strong>initialize</strong>(config) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new HTTP response object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#keep_alive%3F-instance_method" title="#keep_alive? (instance method)">- (Boolean) <strong>keep_alive?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Will this response's connection be kept alive?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_body-instance_method" title="#send_body (instance method)">- (Object) <strong>send_body</strong>(socket) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends the body on <tt>socket</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_body_io-instance_method" title="#send_body_io (instance method)">- (Object) <strong>send_body_io</strong>(socket) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_body_string-instance_method" title="#send_body_string (instance method)">- (Object) <strong>send_body_string</strong>(socket) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_header-instance_method" title="#send_header (instance method)">- (Object) <strong>send_header</strong>(socket) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends the headers on <tt>socket</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_response-instance_method" title="#send_response (instance method)">- (Object) <strong>send_response</strong>(socket) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends the response on <tt>socket</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_error-instance_method" title="#set_error (instance method)">- (Object) <strong>set_error</strong>(ex, backtrace = false) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates an error page for exception <tt>ex</tt> with an optional
<tt>backtrace</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_redirect-instance_method" title="#set_redirect (instance method)">- (Object) <strong>set_redirect</strong>(status, url) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Redirects to <tt>url</tt> with a WEBrick::HTTPStatus::Redirect
<tt>status</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#setup_header-instance_method" title="#setup_header (instance method)">- (Object) <strong>setup_header</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets up the headers for sending.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#status_line-instance_method" title="#status_line (instance method)">- (Object) <strong>status_line</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The response's HTTP status line.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_s-instance_method" title="#to_s (instance method)">- (Object) <strong>to_s</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="WEBrick::HTTPResponse (class)">HTTPResponse</a></span></tt>) <strong>initialize</strong>(config) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Creates a new HTTP response object</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 39</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id config'>config</span><span class='rparen'>)</span>
  <span class='ivar'>@config</span> <span class='op'>=</span> <span class='id config'>config</span>
  <span class='ivar'>@buffer_size</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:OutputBufferSize</span><span class='rbracket'>]</span>
  <span class='ivar'>@logger</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:Logger</span><span class='rbracket'>]</span>
  <span class='ivar'>@header</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id new'>new</span>
  <span class='ivar'>@status</span> <span class='op'>=</span> <span class='const'>HTTPStatus</span><span class='op'>::</span><span class='const'>RC_OK</span>
  <span class='ivar'>@reason_phrase</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@http_version</span> <span class='op'>=</span> <span class='const'>HTTPVersion</span><span class='op'>::</span><span class='id convert'>convert</span><span class='lparen'>(</span><span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:HTTPVersion</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='ivar'>@body</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>
  <span class='ivar'>@keep_alive</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='ivar'>@cookies</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@request_method</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@request_uri</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@request_http_version</span> <span class='op'>=</span> <span class='ivar'>@http_version</span>  <span class='comment'># temporary
</span>  <span class='ivar'>@chunked</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@filename</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@sent_size</span> <span class='op'>=</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="body=-instance_method"></span>
      <span id="body-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="body-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>body</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Body may be a String or IO subclass.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


29
30
31</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 29</span>

<span class='kw'>def</span> <span class='id body'>body</span>
  <span class='ivar'>@body</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="config-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="config-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>config</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute config</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


34
35
36</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 34</span>

<span class='kw'>def</span> <span class='id config'>config</span>
  <span class='ivar'>@config</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="cookies-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="cookies-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>cookies</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute cookies</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


23
24
25</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 23</span>

<span class='kw'>def</span> <span class='id cookies'>cookies</span>
  <span class='ivar'>@cookies</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="filename=-instance_method"></span>
      <span id="filename-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="filename-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>filename</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute filename</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 32</span>

<span class='kw'>def</span> <span class='id filename'>filename</span>
  <span class='ivar'>@filename</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="header-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="header-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>header</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute header</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 22</span>

<span class='kw'>def</span> <span class='id header'>header</span>
  <span class='ivar'>@header</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="http_version-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="http_version-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>http_version</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute http_version</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 22</span>

<span class='kw'>def</span> <span class='id http_version'>http_version</span>
  <span class='ivar'>@http_version</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="keep_alive=-instance_method"></span>
      <span id="keep_alive-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="keep_alive-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>keep_alive</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute keep_alive</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


33
34
35</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 33</span>

<span class='kw'>def</span> <span class='id keep_alive'>keep_alive</span>
  <span class='ivar'>@keep_alive</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="reason_phrase=-instance_method"></span>
      <span id="reason_phrase-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="reason_phrase-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>reason_phrase</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute reason_phrase</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


24
25
26</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 24</span>

<span class='kw'>def</span> <span class='id reason_phrase'>reason_phrase</span>
  <span class='ivar'>@reason_phrase</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="request_http_version=-instance_method"></span>
      <span id="request_http_version-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="request_http_version-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>request_http_version</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute request_http_version</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


31
32
33</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 31</span>

<span class='kw'>def</span> <span class='id request_http_version'>request_http_version</span>
  <span class='ivar'>@request_http_version</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="request_method=-instance_method"></span>
      <span id="request_method-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="request_method-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>request_method</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute request_method</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


31
32
33</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 31</span>

<span class='kw'>def</span> <span class='id request_method'>request_method</span>
  <span class='ivar'>@request_method</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="request_uri=-instance_method"></span>
      <span id="request_uri-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="request_uri-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>request_uri</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute request_uri</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


31
32
33</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 31</span>

<span class='kw'>def</span> <span class='id request_uri'>request_uri</span>
  <span class='ivar'>@request_uri</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="sent_size-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="sent_size-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>sent_size</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute sent_size</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


34
35
36</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 34</span>

<span class='kw'>def</span> <span class='id sent_size'>sent_size</span>
  <span class='ivar'>@sent_size</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="status=-instance_method"></span>
      <span id="status-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="status-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>status</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute status</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 22</span>

<span class='kw'>def</span> <span class='id status'>status</span>
  <span class='ivar'>@status</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="[]-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>[]</strong>(field) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Retrieves the response header <tt>field</tt></p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


76
77
78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 76</span>

<span class='kw'>def</span> <span class='op'>[]</span><span class='lparen'>(</span><span class='id field'>field</span><span class='rparen'>)</span>
  <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='id field'>field</span><span class='period'>.</span><span class='id downcase'>downcase</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="[]=-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>[]=</strong>(field, value) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sets the response header <tt>field</tt> to <tt>value</tt></p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


83
84
85</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 83</span>

<span class='kw'>def</span> <span class='op'>[]=</span><span class='lparen'>(</span><span class='id field'>field</span><span class='comma'>,</span> <span class='id value'>value</span><span class='rparen'>)</span>
  <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='id field'>field</span><span class='period'>.</span><span class='id downcase'>downcase</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id value'>value</span><span class='period'>.</span><span class='id to_s'>to_s</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="_send_file-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>_send_file</strong>(output, input, offset, size) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 374</span>

<span class='kw'>def</span> <span class='id _send_file'>_send_file</span><span class='lparen'>(</span><span class='id output'>output</span><span class='comma'>,</span> <span class='id input'>input</span><span class='comma'>,</span> <span class='id offset'>offset</span><span class='comma'>,</span> <span class='id size'>size</span><span class='rparen'>)</span>
  <span class='kw'>while</span> <span class='id offset'>offset</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='id sz'>sz</span> <span class='op'>=</span> <span class='ivar'>@buffer_size</span> <span class='op'>&lt;</span> <span class='id size'>size</span> <span class='op'>?</span> <span class='ivar'>@buffer_size</span> <span class='op'>:</span> <span class='id size'>size</span>
    <span class='id buf'>buf</span> <span class='op'>=</span> <span class='id input'>input</span><span class='period'>.</span><span class='id read'>read</span><span class='lparen'>(</span><span class='id sz'>sz</span><span class='rparen'>)</span>
    <span class='id offset'>offset</span> <span class='op'>-=</span> <span class='id buf'>buf</span><span class='period'>.</span><span class='id bytesize'>bytesize</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id size'>size</span> <span class='op'>==</span> <span class='int'>0</span>
    <span class='kw'>while</span> <span class='id buf'>buf</span> <span class='op'>=</span> <span class='id input'>input</span><span class='period'>.</span><span class='id read'>read</span><span class='lparen'>(</span><span class='ivar'>@buffer_size</span><span class='rparen'>)</span>
      <span class='id _write_data'>_write_data</span><span class='lparen'>(</span><span class='id output'>output</span><span class='comma'>,</span> <span class='id buf'>buf</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='kw'>while</span> <span class='id size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
      <span class='id sz'>sz</span> <span class='op'>=</span> <span class='ivar'>@buffer_size</span> <span class='op'>&lt;</span> <span class='id size'>size</span> <span class='op'>?</span> <span class='ivar'>@buffer_size</span> <span class='op'>:</span> <span class='id size'>size</span>
      <span class='id buf'>buf</span> <span class='op'>=</span> <span class='id input'>input</span><span class='period'>.</span><span class='id read'>read</span><span class='lparen'>(</span><span class='id sz'>sz</span><span class='rparen'>)</span>
      <span class='id _write_data'>_write_data</span><span class='lparen'>(</span><span class='id output'>output</span><span class='comma'>,</span> <span class='id buf'>buf</span><span class='rparen'>)</span>
      <span class='id size'>size</span> <span class='op'>-=</span> <span class='id buf'>buf</span><span class='period'>.</span><span class='id bytesize'>bytesize</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="_write_data-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>_write_data</strong>(socket, data) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


395
396
397</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 395</span>

<span class='kw'>def</span> <span class='id _write_data'>_write_data</span><span class='lparen'>(</span><span class='id socket'>socket</span><span class='comma'>,</span> <span class='id data'>data</span><span class='rparen'>)</span>
  <span class='id socket'>socket</span> <span class='op'>&lt;&lt;</span> <span class='id data'>data</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="chunked=-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>chunked=</strong>(val) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Enables chunked transfer encoding.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


134
135
136</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 134</span>

<span class='kw'>def</span> <span class='id chunked='>chunked=</span><span class='lparen'>(</span><span class='id val'>val</span><span class='rparen'>)</span>
  <span class='ivar'>@chunked</span> <span class='op'>=</span> <span class='id val'>val</span> <span class='op'>?</span> <span class='kw'>true</span> <span class='op'>:</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="chunked?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>chunked?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Will this response body be returned using chunked transfer-encoding?</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


127
128
129</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 127</span>

<span class='kw'>def</span> <span class='id chunked?'>chunked?</span>
  <span class='ivar'>@chunked</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="content_length-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>content_length</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>The content-length header</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


90
91
92
93
94</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 90</span>

<span class='kw'>def</span> <span class='id content_length'>content_length</span>
  <span class='kw'>if</span> <span class='id len'>len</span> <span class='op'>=</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>content-length</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
    <span class='kw'>return</span> <span class='const'>Integer</span><span class='lparen'>(</span><span class='id len'>len</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="content_length=-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>content_length=</strong>(len) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sets the content-length header to <tt>len</tt></p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


99
100
101</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 99</span>

<span class='kw'>def</span> <span class='id content_length='>content_length=</span><span class='lparen'>(</span><span class='id len'>len</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>content-length</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id len'>len</span><span class='period'>.</span><span class='id to_s'>to_s</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="content_type-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>content_type</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>The content-type header</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


106
107
108</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 106</span>

<span class='kw'>def</span> <span class='id content_type'>content_type</span>
  <span class='kw'>self</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>content-type</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="content_type=-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>content_type=</strong>(type) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sets the content-type header to <tt>type</tt></p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


113
114
115</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 113</span>

<span class='kw'>def</span> <span class='id content_type='>content_type=</span><span class='lparen'>(</span><span class='id type'>type</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>content-type</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id type'>type</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="each-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>each</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Iterates over each header in the resopnse</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


120
121
122</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 120</span>

<span class='kw'>def</span> <span class='id each'>each</span>
  <span class='ivar'>@header</span><span class='period'>.</span><span class='id each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id field'>field</span><span class='comma'>,</span> <span class='id value'>value</span><span class='op'>|</span>  <span class='kw'>yield</span><span class='lparen'>(</span><span class='id field'>field</span><span class='comma'>,</span> <span class='id value'>value</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="keep_alive?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>keep_alive?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Will this response's connection be kept alive?</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


141
142
143</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 141</span>

<span class='kw'>def</span> <span class='id keep_alive?'>keep_alive?</span>
  <span class='ivar'>@keep_alive</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_body-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>send_body</strong>(socket) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends the body on <tt>socket</tt></p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


246
247
248
249
250
251</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 246</span>

<span class='kw'>def</span> <span class='id send_body'>send_body</span><span class='lparen'>(</span><span class='id socket'>socket</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='ivar'>@body</span>
  <span class='kw'>when</span> <span class='const'>IO</span> <span class='kw'>then</span> <span class='id send_body_io'>send_body_io</span><span class='lparen'>(</span><span class='id socket'>socket</span><span class='rparen'>)</span>
  <span class='kw'>else</span> <span class='id send_body_string'>send_body_string</span><span class='lparen'>(</span><span class='id socket'>socket</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_body_io-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>send_body_io</strong>(socket) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 328</span>

<span class='kw'>def</span> <span class='id send_body_io'>send_body_io</span><span class='lparen'>(</span><span class='id socket'>socket</span><span class='rparen'>)</span>
  <span class='kw'>begin</span>
    <span class='kw'>if</span> <span class='ivar'>@request_method</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HEAD</span><span class='tstring_end'>&quot;</span></span>
      <span class='comment'># do nothing
</span>    <span class='kw'>elsif</span> <span class='id chunked?'>chunked?</span>
      <span class='kw'>while</span> <span class='id buf'>buf</span> <span class='op'>=</span> <span class='ivar'>@body</span><span class='period'>.</span><span class='id read'>read</span><span class='lparen'>(</span><span class='ivar'>@buffer_size</span><span class='rparen'>)</span>
        <span class='kw'>next</span> <span class='kw'>if</span> <span class='id buf'>buf</span><span class='period'>.</span><span class='id empty?'>empty?</span>
        <span class='id data'>data</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
        <span class='id data'>data</span> <span class='op'>&lt;&lt;</span> <span class='id format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%x</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id buf'>buf</span><span class='period'>.</span><span class='id bytesize'>bytesize</span><span class='rparen'>)</span> <span class='op'>&lt;&lt;</span> <span class='const'>CRLF</span>
        <span class='id data'>data</span> <span class='op'>&lt;&lt;</span> <span class='id buf'>buf</span> <span class='op'>&lt;&lt;</span> <span class='const'>CRLF</span>
        <span class='id _write_data'>_write_data</span><span class='lparen'>(</span><span class='id socket'>socket</span><span class='comma'>,</span> <span class='id data'>data</span><span class='rparen'>)</span>
        <span class='ivar'>@sent_size</span> <span class='op'>+=</span> <span class='id buf'>buf</span><span class='period'>.</span><span class='id bytesize'>bytesize</span>
      <span class='kw'>end</span>
      <span class='id _write_data'>_write_data</span><span class='lparen'>(</span><span class='id socket'>socket</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0</span><span class='embexpr_beg'>#{</span><span class='const'>CRLF</span><span class='rbrace'>}</span><span class='embexpr_beg'>#{</span><span class='const'>CRLF</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id size'>size</span> <span class='op'>=</span> <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>content-length</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id to_i'>to_i</span>
      <span class='id _send_file'>_send_file</span><span class='lparen'>(</span><span class='id socket'>socket</span><span class='comma'>,</span> <span class='ivar'>@body</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id size'>size</span><span class='rparen'>)</span>
      <span class='ivar'>@sent_size</span> <span class='op'>=</span> <span class='id size'>size</span>
    <span class='kw'>end</span>
  <span class='kw'>ensure</span>
    <span class='ivar'>@body</span><span class='period'>.</span><span class='id close'>close</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_body_string-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>send_body_string</strong>(socket) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 352</span>

<span class='kw'>def</span> <span class='id send_body_string'>send_body_string</span><span class='lparen'>(</span><span class='id socket'>socket</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='ivar'>@request_method</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HEAD</span><span class='tstring_end'>&quot;</span></span>
    <span class='comment'># do nothing
</span>  <span class='kw'>elsif</span> <span class='id chunked?'>chunked?</span>
    <span class='id body'>body</span> <span class='op'>?</span> <span class='ivar'>@body</span><span class='period'>.</span><span class='id bytesize'>bytesize</span> <span class='op'>:</span> <span class='int'>0</span>
    <span class='kw'>while</span> <span class='id buf'>buf</span> <span class='op'>=</span> <span class='ivar'>@body</span><span class='lbracket'>[</span><span class='ivar'>@sent_size</span><span class='comma'>,</span> <span class='ivar'>@buffer_size</span><span class='rbracket'>]</span>
      <span class='kw'>break</span> <span class='kw'>if</span> <span class='id buf'>buf</span><span class='period'>.</span><span class='id empty?'>empty?</span>
      <span class='id data'>data</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
      <span class='id data'>data</span> <span class='op'>&lt;&lt;</span> <span class='id format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%x</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id buf'>buf</span><span class='period'>.</span><span class='id bytesize'>bytesize</span><span class='rparen'>)</span> <span class='op'>&lt;&lt;</span> <span class='const'>CRLF</span>
      <span class='id data'>data</span> <span class='op'>&lt;&lt;</span> <span class='id buf'>buf</span> <span class='op'>&lt;&lt;</span> <span class='const'>CRLF</span>
      <span class='id _write_data'>_write_data</span><span class='lparen'>(</span><span class='id socket'>socket</span><span class='comma'>,</span> <span class='id data'>data</span><span class='rparen'>)</span>
      <span class='ivar'>@sent_size</span> <span class='op'>+=</span> <span class='id buf'>buf</span><span class='period'>.</span><span class='id bytesize'>bytesize</span>
    <span class='kw'>end</span>
    <span class='id _write_data'>_write_data</span><span class='lparen'>(</span><span class='id socket'>socket</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0</span><span class='embexpr_beg'>#{</span><span class='const'>CRLF</span><span class='rbrace'>}</span><span class='embexpr_beg'>#{</span><span class='const'>CRLF</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='kw'>if</span> <span class='ivar'>@body</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@body</span><span class='period'>.</span><span class='id bytesize'>bytesize</span> <span class='op'>&gt;</span> <span class='int'>0</span>
      <span class='id _write_data'>_write_data</span><span class='lparen'>(</span><span class='id socket'>socket</span><span class='comma'>,</span> <span class='ivar'>@body</span><span class='rparen'>)</span>
      <span class='ivar'>@sent_size</span> <span class='op'>=</span> <span class='ivar'>@body</span><span class='period'>.</span><span class='id bytesize'>bytesize</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_header-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>send_header</strong>(socket) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends the headers on <tt>socket</tt></p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


228
229
230
231
232
233
234
235
236
237
238
239
240
241</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 228</span>

<span class='kw'>def</span> <span class='id send_header'>send_header</span><span class='lparen'>(</span><span class='id socket'>socket</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='ivar'>@http_version</span><span class='period'>.</span><span class='id major'>major</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='id data'>data</span> <span class='op'>=</span> <span class='id status_line'>status_line</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='ivar'>@header</span><span class='period'>.</span><span class='id each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id key'>key</span><span class='comma'>,</span> <span class='id value'>value</span><span class='op'>|</span>
      <span class='id tmp'>tmp</span> <span class='op'>=</span> <span class='id key'>key</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\bwww|^te$|\b\w</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span><span class='lbrace'>{</span> <span class='backref'>$&amp;</span><span class='period'>.</span><span class='id upcase'>upcase</span> <span class='rbrace'>}</span>
      <span class='id data'>data</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id tmp'>tmp</span><span class='rbrace'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id value'>value</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span> <span class='const'>CRLF</span>
    <span class='rbrace'>}</span>
    <span class='ivar'>@cookies</span><span class='period'>.</span><span class='id each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id cookie'>cookie</span><span class='op'>|</span>
      <span class='id data'>data</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Set-Cookie: </span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span> <span class='id cookie'>cookie</span><span class='period'>.</span><span class='id to_s'>to_s</span> <span class='op'>&lt;&lt;</span> <span class='const'>CRLF</span>
    <span class='rbrace'>}</span>
    <span class='id data'>data</span> <span class='op'>&lt;&lt;</span> <span class='const'>CRLF</span>
    <span class='id _write_data'>_write_data</span><span class='lparen'>(</span><span class='id socket'>socket</span><span class='comma'>,</span> <span class='id data'>data</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_response-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>send_response</strong>(socket) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends the response on <tt>socket</tt></p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


148
149
150
151
152
153
154
155
156
157
158
159
160</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 148</span>

<span class='kw'>def</span> <span class='id send_response'>send_response</span><span class='lparen'>(</span><span class='id socket'>socket</span><span class='rparen'>)</span>
  <span class='kw'>begin</span>
    <span class='id setup_header'>setup_header</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id send_header'>send_header</span><span class='lparen'>(</span><span class='id socket'>socket</span><span class='rparen'>)</span>
    <span class='id send_body'>send_body</span><span class='lparen'>(</span><span class='id socket'>socket</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>EPIPE</span><span class='comma'>,</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ECONNRESET</span><span class='comma'>,</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ENOTCONN</span> <span class='op'>=&gt;</span> <span class='id ex'>ex</span>
    <span class='ivar'>@logger</span><span class='period'>.</span><span class='id debug'>debug</span><span class='lparen'>(</span><span class='id ex'>ex</span><span class='rparen'>)</span>
    <span class='ivar'>@keep_alive</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id ex'>ex</span>
    <span class='ivar'>@logger</span><span class='period'>.</span><span class='id error'>error</span><span class='lparen'>(</span><span class='id ex'>ex</span><span class='rparen'>)</span>
    <span class='ivar'>@keep_alive</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="set_error-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>set_error</strong>(ex, backtrace = false) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Creates an error page for exception <tt>ex</tt> with an optional
<tt>backtrace</tt></p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 275</span>

<span class='kw'>def</span> <span class='id set_error'>set_error</span><span class='lparen'>(</span><span class='id ex'>ex</span><span class='comma'>,</span> <span class='id backtrace'>backtrace</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id ex'>ex</span>
  <span class='kw'>when</span> <span class='const'>HTTPStatus</span><span class='op'>::</span><span class='const'>Status</span>
    <span class='ivar'>@keep_alive</span> <span class='op'>=</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='const'>HTTPStatus</span><span class='op'>::</span><span class='id error?'>error?</span><span class='lparen'>(</span><span class='id ex'>ex</span><span class='period'>.</span><span class='id code'>code</span><span class='rparen'>)</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id status'>status</span> <span class='op'>=</span> <span class='id ex'>ex</span><span class='period'>.</span><span class='id code'>code</span>
  <span class='kw'>else</span>
    <span class='ivar'>@keep_alive</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id status'>status</span> <span class='op'>=</span> <span class='const'>HTTPStatus</span><span class='op'>::</span><span class='const'>RC_INTERNAL_SERVER_ERROR</span>
  <span class='kw'>end</span>
  <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>content-type</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>text/html; charset=ISO-8859-1</span><span class='tstring_end'>&quot;</span></span>

  <span class='kw'>if</span> <span class='id respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:create_error_page</span><span class='rparen'>)</span>
    <span class='id create_error_page'>create_error_page</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='kw'>return</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='ivar'>@request_uri</span>
    <span class='id host'>host</span><span class='comma'>,</span> <span class='id port'>port</span> <span class='op'>=</span> <span class='ivar'>@request_uri</span><span class='period'>.</span><span class='id host'>host</span><span class='comma'>,</span> <span class='ivar'>@request_uri</span><span class='period'>.</span><span class='id port'>port</span>
  <span class='kw'>else</span>
    <span class='id host'>host</span><span class='comma'>,</span> <span class='id port'>port</span> <span class='op'>=</span> <span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:ServerName</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:Port</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='ivar'>@body</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>
  <span class='ivar'>@body</span> <span class='op'>&lt;&lt;</span> <span class='heredoc_beg'>&lt;&lt;-_end_of_html_</span><span class='tstring_content'>&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0//EN&quot;&gt;
&lt;HTML&gt;
</span><span class='embexpr_beg'>  &lt;HEAD&gt;&lt;TITLE&gt;#{</span><span class='const'>HTMLUtils</span><span class='op'>::</span><span class='id escape'>escape</span><span class='lparen'>(</span><span class='ivar'>@reason_phrase</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'>&lt;/TITLE&gt;&lt;/HEAD&gt;
  &lt;BODY&gt;
</span><span class='embexpr_beg'>&lt;H1&gt;#{</span><span class='const'>HTMLUtils</span><span class='op'>::</span><span class='id escape'>escape</span><span class='lparen'>(</span><span class='ivar'>@reason_phrase</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'>&lt;/H1&gt;
</span><span class='embexpr_beg'>#{</span><span class='const'>HTMLUtils</span><span class='op'>::</span><span class='id escape'>escape</span><span class='lparen'>(</span><span class='id ex'>ex</span><span class='period'>.</span><span class='id message'>message</span><span class='rparen'>)</span><span class='rbrace'>}</span>
<span class='tstring_content'>
&lt;HR&gt;
</span><span class='heredoc_end'>  _end_of_html_
</span>
  <span class='kw'>if</span> <span class='id backtrace'>backtrace</span> <span class='op'>&amp;&amp;</span> <span class='gvar'>$DEBUG</span>
    <span class='ivar'>@body</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>backtrace of `</span><span class='embexpr_beg'>#{</span><span class='const'>HTMLUtils</span><span class='op'>::</span><span class='id escape'>escape</span><span class='lparen'>(</span><span class='id ex'>ex</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'>' </span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@body</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>HTMLUtils</span><span class='op'>::</span><span class='id escape'>escape</span><span class='lparen'>(</span><span class='id ex'>ex</span><span class='period'>.</span><span class='id message'>message</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@body</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;PRE&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id ex'>ex</span><span class='period'>.</span><span class='id backtrace'>backtrace</span><span class='period'>.</span><span class='id each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id line'>line</span><span class='op'>|</span> <span class='ivar'>@body</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\t</span><span class='embexpr_beg'>#{</span><span class='id line'>line</span><span class='rbrace'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
    <span class='ivar'>@body</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/PRE&gt;&lt;HR&gt;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='ivar'>@body</span> <span class='op'>&lt;&lt;</span> <span class='heredoc_beg'>&lt;&lt;-_end_of_html_</span><span class='tstring_content'>&lt;ADDRESS&gt;
</span><span class='embexpr_beg'> #{</span><span class='const'>HTMLUtils</span><span class='op'>::</span><span class='id escape'>escape</span><span class='lparen'>(</span><span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:ServerSoftware</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'> at
</span><span class='embexpr_beg'> #{</span><span class='id host'>host</span><span class='rbrace'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id port'>port</span><span class='rbrace'>}</span>
<span class='tstring_content'>
&lt;/ADDRESS&gt;
  &lt;/BODY&gt;
&lt;/HTML&gt;
</span><span class='heredoc_end'>  _end_of_html_
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="set_redirect-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>set_redirect</strong>(status, url) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Redirects to <tt>url</tt> with a WEBrick::HTTPStatus::Redirect
<tt>status</tt>.</p>

<p>Example:</p>

<pre class="code"><span class='id res'>res</span><span class='period'>.</span><span class='id set_redirect'>set_redirect</span> <span class='const'>WEBrick</span><span class='op'>::</span><span class='const'>HTTPStatus</span><span class='op'>::</span><span class='const'>TemporaryRedirect</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


266
267
268
269
270</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 266</span>

<span class='kw'>def</span> <span class='id set_redirect'>set_redirect</span><span class='lparen'>(</span><span class='id status'>status</span><span class='comma'>,</span> <span class='id url'>url</span><span class='rparen'>)</span>
  <span class='ivar'>@body</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;HTML&gt;&lt;A HREF=\&quot;</span><span class='embexpr_beg'>#{</span><span class='id url'>url</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rbrace'>}</span><span class='tstring_content'>\&quot;&gt;</span><span class='embexpr_beg'>#{</span><span class='id url'>url</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rbrace'>}</span><span class='tstring_content'>&lt;/A&gt;.&lt;/HTML&gt;\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>location</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id url'>url</span><span class='period'>.</span><span class='id to_s'>to_s</span>
  <span class='id raise'>raise</span> <span class='id status'>status</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="setup_header-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>setup_header</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sets up the headers for sending</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 165</span>

<span class='kw'>def</span> <span class='id setup_header'>setup_header</span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='ivar'>@reason_phrase</span>    <span class='op'>||=</span> <span class='const'>HTTPStatus</span><span class='op'>::</span><span class='id reason_phrase'>reason_phrase</span><span class='lparen'>(</span><span class='ivar'>@status</span><span class='rparen'>)</span>
  <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>server</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:ServerSoftware</span><span class='rbracket'>]</span>
  <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>date</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>   <span class='op'>||=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id now'>now</span><span class='period'>.</span><span class='id httpdate'>httpdate</span>

  <span class='comment'># HTTP/0.9 features
</span>  <span class='kw'>if</span> <span class='ivar'>@request_http_version</span> <span class='op'>&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.0</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@http_version</span> <span class='op'>=</span> <span class='const'>HTTPVersion</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0.9</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='ivar'>@keep_alive</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>end</span>

  <span class='comment'># HTTP/1.0 features
</span>  <span class='kw'>if</span> <span class='ivar'>@request_http_version</span> <span class='op'>&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.1</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>if</span> <span class='id chunked?'>chunked?</span>
      <span class='ivar'>@chunked</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='id ver'>ver</span> <span class='op'>=</span> <span class='ivar'>@request_http_version</span><span class='period'>.</span><span class='id to_s'>to_s</span>
      <span class='id msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>chunked is set for an HTTP/</span><span class='embexpr_beg'>#{</span><span class='id ver'>ver</span><span class='rbrace'>}</span><span class='tstring_content'> request. (ignored)</span><span class='tstring_end'>&quot;</span></span>
      <span class='ivar'>@logger</span><span class='period'>.</span><span class='id warn'>warn</span><span class='lparen'>(</span><span class='id msg'>msg</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># Determine the message length (RFC2616 -- 4.4 Message Length)
</span>  <span class='kw'>if</span> <span class='ivar'>@status</span> <span class='op'>==</span> <span class='int'>304</span> <span class='op'>||</span> <span class='ivar'>@status</span> <span class='op'>==</span> <span class='int'>204</span> <span class='op'>||</span> <span class='const'>HTTPStatus</span><span class='op'>::</span><span class='id info?'>info?</span><span class='lparen'>(</span><span class='ivar'>@status</span><span class='rparen'>)</span>
    <span class='ivar'>@header</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>content-length</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
    <span class='ivar'>@body</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>elsif</span> <span class='id chunked?'>chunked?</span>
    <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>transfer-encoding</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>chunked</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@header</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>content-length</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>^multipart/byteranges</span><span class='regexp_end'>}</span></span> <span class='op'>=~</span> <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>content-type</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
    <span class='ivar'>@header</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>content-length</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>content-length</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id nil?'>nil?</span>
    <span class='kw'>unless</span> <span class='ivar'>@body</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>IO</span><span class='rparen'>)</span>
      <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>content-length</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@body</span> <span class='op'>?</span> <span class='ivar'>@body</span><span class='period'>.</span><span class='id bytesize'>bytesize</span> <span class='op'>:</span> <span class='int'>0</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># Keep-Alive connection.
</span>  <span class='kw'>if</span> <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>connection</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>close</span><span class='tstring_end'>&quot;</span></span>
     <span class='ivar'>@keep_alive</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>elsif</span> <span class='id keep_alive?'>keep_alive?</span>
    <span class='kw'>if</span> <span class='id chunked?'>chunked?</span> <span class='op'>||</span> <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>content-length</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
      <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>connection</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Keep-Alive</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
      <span class='id msg'>msg</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true</span><span class='tstring_end'>&quot;</span></span>
      <span class='ivar'>@logger</span><span class='period'>.</span><span class='id warn'>warn</span><span class='lparen'>(</span><span class='id msg'>msg</span><span class='rparen'>)</span>
      <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>connection</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>close</span><span class='tstring_end'>&quot;</span></span>
      <span class='ivar'>@keep_alive</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>connection</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>close</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># Location is a single absoluteURI.
</span>  <span class='kw'>if</span> <span class='id location'>location</span> <span class='op'>=</span> <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>location</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='ivar'>@request_uri</span>
      <span class='ivar'>@header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>location</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@request_uri</span><span class='period'>.</span><span class='id merge'>merge</span><span class='lparen'>(</span><span class='id location'>location</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="status_line-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>status_line</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>The response's HTTP status line</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


61
62
63</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 61</span>

<span class='kw'>def</span> <span class='id status_line'>status_line</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HTTP/</span><span class='embvar'>#</span><span class='ivar'>@http_version</span><span class='tstring_content'> </span><span class='embvar'>#</span><span class='ivar'>@status</span><span class='tstring_content'> </span><span class='embvar'>#</span><span class='ivar'>@reason_phrase</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='const'>CRLF</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="to_s-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>to_s</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


253
254
255
256
257</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/webrick/httpresponse.rb', line 253</span>

<span class='kw'>def</span> <span class='id to_s'>to_s</span> <span class='comment'># :nodoc:
</span>  <span class='id ret'>ret</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id send_response'>send_response</span><span class='lparen'>(</span><span class='id ret'>ret</span><span class='rparen'>)</span>
  <span class='id ret'>ret</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sat Sep  3 14:11:31 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.9.3).
</div>

  </body>
</html>