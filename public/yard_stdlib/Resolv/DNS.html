<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Resolv::DNS
  
    &mdash; Ruby 1.9 Ruby Standard Library
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (D)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../Resolv.html" title="Resolv (class)">Resolv</a></span></span>
     &raquo; 
    <span class="title">DNS</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Resolv::DNS
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Resolv::DNS</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/resolv.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Resolv::DNS is a DNS stub resolver.</p>

<p>Information taken from the following places:</p>
<ul><li>
<p>STD0013</p>
</li><li>
<p>RFC 1035</p>
</li><li>
<p><a
href="ftp://ftp.isi.edu/in-notes/iana/assignments/dns-parameters">ftp.isi.edu/in-notes/iana/assignments/dns-parameters</a></p>
</li><li>
<p>etc.</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
</div><h2>Defined Under Namespace</h2>
<p class="children">
   
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="DNS/Label.html" title="Resolv::DNS::Label (module)">Label</a></span>, <span class='object_link'><a href="DNS/OpCode.html" title="Resolv::DNS::OpCode (module)">OpCode</a></span>, <span class='object_link'><a href="DNS/RCode.html" title="Resolv::DNS::RCode (module)">RCode</a></span>
    
   
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="DNS/Config.html" title="Resolv::DNS::Config (class)">Config</a></span>, <span class='object_link'><a href="DNS/DecodeError.html" title="Resolv::DNS::DecodeError (class)">DecodeError</a></span>, <span class='object_link'><a href="DNS/EncodeError.html" title="Resolv::DNS::EncodeError (class)">EncodeError</a></span>, <span class='object_link'><a href="DNS/Message.html" title="Resolv::DNS::Message (class)">Message</a></span>, <span class='object_link'><a href="DNS/Name.html" title="Resolv::DNS::Name (class)">Name</a></span>, <span class='object_link'><a href="DNS/Query.html" title="Resolv::DNS::Query (class)">Query</a></span>, <span class='object_link'><a href="DNS/Requester.html" title="Resolv::DNS::Requester (class)">Requester</a></span>, <span class='object_link'><a href="DNS/Resource.html" title="Resolv::DNS::Resource (class)">Resource</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="Port-constant" class="">Port =
          <div class="docstring">
  <div class="discussion">
    
<p>Default DNS Port</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='int'>53</span></pre></dd>
      
        <dt id="UDPSize-constant" class="">UDPSize =
          <div class="docstring">
  <div class="discussion">
    
<p>Default DNS UDP packet size</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='int'>512</span></pre></dd>
      
        <dt id="RequestID-constant" class="">RequestID =
          <div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span><span class='rbrace'>}</span></pre></dd>
      
        <dt id="RequestIDMutex-constant" class="">RequestIDMutex =
          <div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='const'>Mutex</span><span class='period'>.</span><span class='id new'>new</span></pre></dd>
      
    </dl>
  





  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#allocate_request_id-class_method" title="allocate_request_id (class method)">+ (Object) <strong>allocate_request_id</strong>(host, port) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#bind_random_port-class_method" title="bind_random_port (class method)">+ (Object) <strong>bind_random_port</strong>(udpsock, bind_host = &quot;0.0.0.0&quot;) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#free_request_id-class_method" title="free_request_id (class method)">+ (Object) <strong>free_request_id</strong>(host, port, id) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#open-class_method" title="open (class method)">+ (Object) <strong>open</strong>(*args) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new DNS resolver.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#random-class_method" title="random (class method)">+ (Object) <strong>random</strong>(arg) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rangerand-class_method" title="rangerand (class method)">+ (Object) <strong>rangerand</strong>(range) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#close-instance_method" title="#close (instance method)">- (Object) <strong>close</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Closes the DNS resolver.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each_address-instance_method" title="#each_address (instance method)">- (Object) <strong>each_address</strong>(name) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Iterates over all IP addresses for <tt>name</tt> retrieved from the DNS
resolver.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each_name-instance_method" title="#each_name (instance method)">- (Object) <strong>each_name</strong>(address) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Iterates over all hostnames for <tt>address</tt> retrieved from the DNS
resolver.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each_resource-instance_method" title="#each_resource (instance method)">- (Object) <strong>each_resource</strong>(name, typeclass, &amp;proc) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Iterates over all <tt>typeclass</tt> DNS resources for <tt>name</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#extract_resources-instance_method" title="#extract_resources (instance method)">- (Object) <strong>extract_resources</strong>(msg, name, typeclass) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getaddress-instance_method" title="#getaddress (instance method)">- (Object) <strong>getaddress</strong>(name) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Gets the IP address of <tt>name</tt> from the DNS resolver.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getaddresses-instance_method" title="#getaddresses (instance method)">- (Object) <strong>getaddresses</strong>(name) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Gets all IP addresses for <tt>name</tt> from the DNS resolver.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getname-instance_method" title="#getname (instance method)">- (Object) <strong>getname</strong>(address) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Gets the hostname for <tt>address</tt> from the DNS resolver.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getnames-instance_method" title="#getnames (instance method)">- (Object) <strong>getnames</strong>(address) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Gets all hostnames for <tt>address</tt> from the DNS resolver.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getresource-instance_method" title="#getresource (instance method)">- (Object) <strong>getresource</strong>(name, typeclass) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Look up the <tt>typeclass</tt> DNS resource of <tt>name</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getresources-instance_method" title="#getresources (instance method)">- (Object) <strong>getresources</strong>(name, typeclass) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Looks up all <tt>typeclass</tt> DNS resources for <tt>name</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (DNS) <strong>initialize</strong>(config_info = nil) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new DNS resolver.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#lazy_initialize-instance_method" title="#lazy_initialize (instance method)">- (Object) <strong>lazy_initialize</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#make_tcp_requester-instance_method" title="#make_tcp_requester (instance method)">- (Object) <strong>make_tcp_requester</strong>(host, port) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#make_udp_requester-instance_method" title="#make_udp_requester (instance method)">- (Object) <strong>make_udp_requester</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Resolv::DNS (class)">DNS</a></span></tt>) <strong>initialize</strong>(config_info = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Creates a new DNS resolver.</p>

<p><tt>config_info</tt> can be:</p>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>nil</p></td>
<td>
<p>Uses /etc/resolv.conf.</p>
</td></tr><tr><td class="rdoc-term"><p>String</p></td>
<td>
<p>Path to a file using /etc/resolv.conf's format.</p>
</td></tr><tr><td class="rdoc-term"><p>Hash</p></td>
<td>
<p>Must contain :nameserver, :search and :ndots keys.</p>
</td></tr></table>

<p>:nameserver_port can be used to specify port number of nameserver address.</p>

<p>The value of :nameserver should be an address string or an array of address
strings.</p>
<ul><li>
<p>:nameserver =&gt; '8.8.8.8'</p>
</li><li>
<p>:nameserver =&gt; ['8.8.8.8', '8.8.4.4']</p>
</li></ul>

<p>The value of :nameserver_port should be an array of pair of nameserver
address and port number.</p>
<ul><li>
<p>:nameserver_port =&gt; [['8.8.8.8', 53], ['8.8.4.4', 53]]</p>
</li></ul>

<p>Example:</p>

<pre class="code"><span class='const'>Resolv</span><span class='op'>::</span><span class='const'>DNS</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='symbol'>:nameserver</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>210.251.121.21</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
                <span class='symbol'>:search</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>ruby-lang.org</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
                <span class='symbol'>:ndots</span> <span class='op'>=&gt;</span> <span class='int'>1</span><span class='rparen'>)</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


333
334
335
336
337</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/resolv.rb', line 333</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id config_info'>config_info</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='ivar'>@mutex</span> <span class='op'>=</span> <span class='const'>Mutex</span><span class='period'>.</span><span class='id new'>new</span>
  <span class='ivar'>@config</span> <span class='op'>=</span> <span class='const'>Config</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id config_info'>config_info</span><span class='rparen'>)</span>
  <span class='ivar'>@initialized</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="allocate_request_id-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>allocate_request_id</strong>(host, port) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


605
606
607
608
609
610
611
612
613
614
615</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/resolv.rb', line 605</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id allocate_request_id'>allocate_request_id</span><span class='lparen'>(</span><span class='id host'>host</span><span class='comma'>,</span> <span class='id port'>port</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='id id'>id</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='const'>RequestIDMutex</span><span class='period'>.</span><span class='id synchronize'>synchronize</span> <span class='lbrace'>{</span>
    <span class='id h'>h</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>RequestID</span><span class='lbracket'>[</span><span class='lbracket'>[</span><span class='id host'>host</span><span class='comma'>,</span> <span class='id port'>port</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='kw'>begin</span>
      <span class='id id'>id</span> <span class='op'>=</span> <span class='id rangerand'>rangerand</span><span class='lparen'>(</span><span class='int'>0x0000</span><span class='op'>..</span><span class='int'>0xffff</span><span class='rparen'>)</span>
    <span class='kw'>end</span> <span class='kw'>while</span> <span class='id h'>h</span><span class='lbracket'>[</span><span class='id id'>id</span><span class='rbracket'>]</span>
    <span class='id h'>h</span><span class='lbracket'>[</span><span class='id id'>id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='rbrace'>}</span>
  <span class='id id'>id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="bind_random_port-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>bind_random_port</strong>(udpsock, bind_host = &quot;0.0.0.0&quot;) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


629
630
631
632
633
634
635
636</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/resolv.rb', line 629</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id bind_random_port'>bind_random_port</span><span class='lparen'>(</span><span class='id udpsock'>udpsock</span><span class='comma'>,</span> <span class='id bind_host'>bind_host</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0.0.0.0</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='kw'>begin</span>
    <span class='id port'>port</span> <span class='op'>=</span> <span class='id rangerand'>rangerand</span><span class='lparen'>(</span><span class='int'>1024</span><span class='op'>..</span><span class='int'>65535</span><span class='rparen'>)</span>
    <span class='id udpsock'>udpsock</span><span class='period'>.</span><span class='id bind'>bind</span><span class='lparen'>(</span><span class='id bind_host'>bind_host</span><span class='comma'>,</span> <span class='id port'>port</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>EADDRINUSE</span>
    <span class='kw'>retry</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="free_request_id-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>free_request_id</strong>(host, port, id) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


617
618
619
620
621
622
623
624
625
626
627</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/resolv.rb', line 617</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id free_request_id'>free_request_id</span><span class='lparen'>(</span><span class='id host'>host</span><span class='comma'>,</span> <span class='id port'>port</span><span class='comma'>,</span> <span class='id id'>id</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='const'>RequestIDMutex</span><span class='period'>.</span><span class='id synchronize'>synchronize</span> <span class='lbrace'>{</span>
    <span class='id key'>key</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id host'>host</span><span class='comma'>,</span> <span class='id port'>port</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='id h'>h</span> <span class='op'>=</span> <span class='const'>RequestID</span><span class='lbracket'>[</span><span class='id key'>key</span><span class='rbracket'>]</span>
      <span class='id h'>h</span><span class='period'>.</span><span class='id delete'>delete</span> <span class='id id'>id</span>
      <span class='kw'>if</span> <span class='id h'>h</span><span class='period'>.</span><span class='id empty?'>empty?</span>
        <span class='const'>RequestID</span><span class='period'>.</span><span class='id delete'>delete</span> <span class='id key'>key</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="open-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>open</strong>(*args) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Creates a new DNS resolver.  See Resolv::DNS.new for argument details.</p>

<p>Yields the created DNS resolver to the block, if given, otherwise returns
it.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


298
299
300
301
302
303
304
305
306</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/resolv.rb', line 298</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id open'>open</span><span class='lparen'>(</span><span class='op'>*</span><span class='id args'>args</span><span class='rparen'>)</span>
  <span class='id dns'>dns</span> <span class='op'>=</span> <span class='id new'>new</span><span class='lparen'>(</span><span class='op'>*</span><span class='id args'>args</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id dns'>dns</span> <span class='kw'>unless</span> <span class='id block_given?'>block_given?</span>
  <span class='kw'>begin</span>
    <span class='kw'>yield</span> <span class='id dns'>dns</span>
  <span class='kw'>ensure</span>
    <span class='id dns'>dns</span><span class='period'>.</span><span class='id close'>close</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="random-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>random</strong>(arg) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


579
580
581</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/resolv.rb', line 579</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id random'>random</span><span class='lparen'>(</span><span class='id arg'>arg</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='id rand'>rand</span><span class='lparen'>(</span><span class='id arg'>arg</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="rangerand-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>rangerand</strong>(range) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


593
594
595
596
597
598
599
600</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/resolv.rb', line 593</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id rangerand'>rangerand</span><span class='lparen'>(</span><span class='id range'>range</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='id base'>base</span> <span class='op'>=</span> <span class='id range'>range</span><span class='period'>.</span><span class='id begin'>begin</span>
  <span class='id len'>len</span> <span class='op'>=</span> <span class='id range'>range</span><span class='period'>.</span><span class='id end'>end</span> <span class='op'>-</span> <span class='id range'>range</span><span class='period'>.</span><span class='id begin'>begin</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id range'>range</span><span class='period'>.</span><span class='id exclude_end?'>exclude_end?</span>
    <span class='id len'>len</span> <span class='op'>+=</span> <span class='int'>1</span>
  <span class='kw'>end</span>
  <span class='id base'>base</span> <span class='op'>+</span> <span class='id random'>random</span><span class='lparen'>(</span><span class='id len'>len</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="close-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>close</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Closes the DNS resolver.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


352
353
354
355
356
357
358</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/resolv.rb', line 352</span>

<span class='kw'>def</span> <span class='id close'>close</span>
  <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id synchronize'>synchronize</span> <span class='lbrace'>{</span>
    <span class='kw'>if</span> <span class='ivar'>@initialized</span>
      <span class='ivar'>@initialized</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>end</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="each_address-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>each_address</strong>(name) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Iterates over all IP addresses for <tt>name</tt> retrieved from the DNS
resolver.</p>

<p><tt>name</tt> can be a Resolv::DNS::Name or a String.  Retrieved addresses
will be a Resolv::IPv4 or Resolv::IPv6</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


390
391
392
393
394
395</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/resolv.rb', line 390</span>

<span class='kw'>def</span> <span class='id each_address'>each_address</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span>
  <span class='id each_resource'>each_resource</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='const'>Resource</span><span class='op'>::</span><span class='const'>IN</span><span class='op'>::</span><span class='const'>A</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id resource'>resource</span><span class='op'>|</span> <span class='kw'>yield</span> <span class='id resource'>resource</span><span class='period'>.</span><span class='id address'>address</span><span class='rbrace'>}</span>
  <span class='kw'>if</span> <span class='id use_ipv6?'>use_ipv6?</span>
    <span class='id each_resource'>each_resource</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='const'>Resource</span><span class='op'>::</span><span class='const'>IN</span><span class='op'>::</span><span class='const'>AAAA</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id resource'>resource</span><span class='op'>|</span> <span class='kw'>yield</span> <span class='id resource'>resource</span><span class='period'>.</span><span class='id address'>address</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="each_name-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>each_name</strong>(address) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Iterates over all hostnames for <tt>address</tt> retrieved from the DNS
resolver.</p>

<p><tt>address</tt> must be a Resolv::IPv4, Resolv::IPv6 or a String. 
Retrieved names will be Resolv::DNS::Name instances.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


437
438
439
440
441
442
443
444
445
446
447
448
449</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/resolv.rb', line 437</span>

<span class='kw'>def</span> <span class='id each_name'>each_name</span><span class='lparen'>(</span><span class='id address'>address</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id address'>address</span>
  <span class='kw'>when</span> <span class='const'>Name</span>
    <span class='id ptr'>ptr</span> <span class='op'>=</span> <span class='id address'>address</span>
  <span class='kw'>when</span> <span class='const'>IPv4</span><span class='op'>::</span><span class='const'>Regex</span>
    <span class='id ptr'>ptr</span> <span class='op'>=</span> <span class='const'>IPv4</span><span class='period'>.</span><span class='id create'>create</span><span class='lparen'>(</span><span class='id address'>address</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_name'>to_name</span>
  <span class='kw'>when</span> <span class='const'>IPv6</span><span class='op'>::</span><span class='const'>Regex</span>
    <span class='id ptr'>ptr</span> <span class='op'>=</span> <span class='const'>IPv6</span><span class='period'>.</span><span class='id create'>create</span><span class='lparen'>(</span><span class='id address'>address</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_name'>to_name</span>
  <span class='kw'>else</span>
    <span class='id raise'>raise</span> <span class='const'>ResolvError</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cannot interpret as address: </span><span class='embexpr_beg'>#{</span><span class='id address'>address</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id each_resource'>each_resource</span><span class='lparen'>(</span><span class='id ptr'>ptr</span><span class='comma'>,</span> <span class='const'>Resource</span><span class='op'>::</span><span class='const'>IN</span><span class='op'>::</span><span class='const'>PTR</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id resource'>resource</span><span class='op'>|</span> <span class='kw'>yield</span> <span class='id resource'>resource</span><span class='period'>.</span><span class='id name'>name</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="each_resource-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>each_resource</strong>(name, typeclass, &amp;proc) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Iterates over all <tt>typeclass</tt> DNS resources for <tt>name</tt>.  See
#getresource for argument details.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/resolv.rb', line 493</span>

<span class='kw'>def</span> <span class='id each_resource'>each_resource</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id typeclass'>typeclass</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id proc'>proc</span><span class='rparen'>)</span>
  <span class='id lazy_initialize'>lazy_initialize</span>
  <span class='id requester'>requester</span> <span class='op'>=</span> <span class='id make_udp_requester'>make_udp_requester</span>
  <span class='id senders'>senders</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>begin</span>
    <span class='ivar'>@config</span><span class='period'>.</span><span class='id resolv'>resolv</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id candidate'>candidate</span><span class='comma'>,</span> <span class='id tout'>tout</span><span class='comma'>,</span> <span class='id nameserver'>nameserver</span><span class='comma'>,</span> <span class='id port'>port</span><span class='op'>|</span>
      <span class='id msg'>msg</span> <span class='op'>=</span> <span class='const'>Message</span><span class='period'>.</span><span class='id new'>new</span>
      <span class='id msg'>msg</span><span class='period'>.</span><span class='id rd'>rd</span> <span class='op'>=</span> <span class='int'>1</span>
      <span class='id msg'>msg</span><span class='period'>.</span><span class='id add_question'>add_question</span><span class='lparen'>(</span><span class='id candidate'>candidate</span><span class='comma'>,</span> <span class='id typeclass'>typeclass</span><span class='rparen'>)</span>
      <span class='kw'>unless</span> <span class='id sender'>sender</span> <span class='op'>=</span> <span class='id senders'>senders</span><span class='lbracket'>[</span><span class='lbracket'>[</span><span class='id candidate'>candidate</span><span class='comma'>,</span> <span class='id nameserver'>nameserver</span><span class='comma'>,</span> <span class='id port'>port</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
        <span class='id sender'>sender</span> <span class='op'>=</span> <span class='id senders'>senders</span><span class='lbracket'>[</span><span class='lbracket'>[</span><span class='id candidate'>candidate</span><span class='comma'>,</span> <span class='id nameserver'>nameserver</span><span class='comma'>,</span> <span class='id port'>port</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span>
          <span class='id requester'>requester</span><span class='period'>.</span><span class='id sender'>sender</span><span class='lparen'>(</span><span class='id msg'>msg</span><span class='comma'>,</span> <span class='id candidate'>candidate</span><span class='comma'>,</span> <span class='id nameserver'>nameserver</span><span class='comma'>,</span> <span class='id port'>port</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
      <span class='id reply'>reply</span><span class='comma'>,</span> <span class='id reply_name'>reply_name</span> <span class='op'>=</span> <span class='id requester'>requester</span><span class='period'>.</span><span class='id request'>request</span><span class='lparen'>(</span><span class='id sender'>sender</span><span class='comma'>,</span> <span class='id tout'>tout</span><span class='rparen'>)</span>
      <span class='kw'>case</span> <span class='id reply'>reply</span><span class='period'>.</span><span class='id rcode'>rcode</span>
      <span class='kw'>when</span> <span class='const'>RCode</span><span class='op'>::</span><span class='const'>NoError</span>
        <span class='kw'>if</span> <span class='id reply'>reply</span><span class='period'>.</span><span class='id tc'>tc</span> <span class='op'>==</span> <span class='int'>1</span> <span class='kw'>and</span> <span class='kw'>not</span> <span class='const'>Requester</span><span class='op'>::</span><span class='const'>TCP</span> <span class='op'>===</span> <span class='id requester'>requester</span>
          <span class='id requester'>requester</span><span class='period'>.</span><span class='id close'>close</span>
          <span class='comment'># Retry via TCP:
</span>          <span class='id requester'>requester</span> <span class='op'>=</span> <span class='id make_tcp_requester'>make_tcp_requester</span><span class='lparen'>(</span><span class='id nameserver'>nameserver</span><span class='comma'>,</span> <span class='id port'>port</span><span class='rparen'>)</span>
          <span class='id senders'>senders</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
          <span class='comment'># This will use TCP for all remaining candidates (assuming the
</span>          <span class='comment'># current candidate does not already respond successfully via
</span>          <span class='comment'># TCP).  This makes sense because we already know the full
</span>          <span class='comment'># response will not fit in an untruncated UDP packet.
</span>          <span class='kw'>redo</span>
        <span class='kw'>else</span>
          <span class='id extract_resources'>extract_resources</span><span class='lparen'>(</span><span class='id reply'>reply</span><span class='comma'>,</span> <span class='id reply_name'>reply_name</span><span class='comma'>,</span> <span class='id typeclass'>typeclass</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id proc'>proc</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
        <span class='kw'>return</span>
      <span class='kw'>when</span> <span class='const'>RCode</span><span class='op'>::</span><span class='const'>NXDomain</span>
        <span class='id raise'>raise</span> <span class='const'>Config</span><span class='op'>::</span><span class='const'>NXDomain</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id reply_name'>reply_name</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id raise'>raise</span> <span class='const'>Config</span><span class='op'>::</span><span class='const'>OtherResolvError</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id reply_name'>reply_name</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='rbrace'>}</span>
  <span class='kw'>ensure</span>
    <span class='id requester'>requester</span><span class='period'>.</span><span class='id close'>close</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="extract_resources-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>extract_resources</strong>(msg, name, typeclass) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/resolv.rb', line 547</span>

<span class='kw'>def</span> <span class='id extract_resources'>extract_resources</span><span class='lparen'>(</span><span class='id msg'>msg</span><span class='comma'>,</span> <span class='id name'>name</span><span class='comma'>,</span> <span class='id typeclass'>typeclass</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='kw'>if</span> <span class='id typeclass'>typeclass</span> <span class='op'>&lt;</span> <span class='const'>Resource</span><span class='op'>::</span><span class='const'>ANY</span>
    <span class='id n0'>n0</span> <span class='op'>=</span> <span class='const'>Name</span><span class='period'>.</span><span class='id create'>create</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span>
    <span class='id msg'>msg</span><span class='period'>.</span><span class='id each_answer'>each_answer</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id n'>n</span><span class='comma'>,</span> <span class='id ttl'>ttl</span><span class='comma'>,</span> <span class='id data'>data</span><span class='op'>|</span>
      <span class='kw'>yield</span> <span class='id data'>data</span> <span class='kw'>if</span> <span class='id n0'>n0</span> <span class='op'>==</span> <span class='id n'>n</span>
    <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='id yielded'>yielded</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='id n0'>n0</span> <span class='op'>=</span> <span class='const'>Name</span><span class='period'>.</span><span class='id create'>create</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span>
  <span class='id msg'>msg</span><span class='period'>.</span><span class='id each_answer'>each_answer</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id n'>n</span><span class='comma'>,</span> <span class='id ttl'>ttl</span><span class='comma'>,</span> <span class='id data'>data</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id n0'>n0</span> <span class='op'>==</span> <span class='id n'>n</span>
      <span class='kw'>case</span> <span class='id data'>data</span>
      <span class='kw'>when</span> <span class='id typeclass'>typeclass</span>
        <span class='kw'>yield</span> <span class='id data'>data</span>
        <span class='id yielded'>yielded</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='kw'>when</span> <span class='const'>Resource</span><span class='op'>::</span><span class='const'>CNAME</span>
        <span class='id n0'>n0</span> <span class='op'>=</span> <span class='id data'>data</span><span class='period'>.</span><span class='id name'>name</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='rbrace'>}</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id yielded'>yielded</span>
  <span class='id msg'>msg</span><span class='period'>.</span><span class='id each_answer'>each_answer</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id n'>n</span><span class='comma'>,</span> <span class='id ttl'>ttl</span><span class='comma'>,</span> <span class='id data'>data</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id n0'>n0</span> <span class='op'>==</span> <span class='id n'>n</span>
      <span class='kw'>case</span> <span class='id data'>data</span>
      <span class='kw'>when</span> <span class='id typeclass'>typeclass</span>
        <span class='kw'>yield</span> <span class='id data'>data</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="getaddress-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>getaddress</strong>(name) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Gets the IP address of <tt>name</tt> from the DNS resolver.</p>

<p><tt>name</tt> can be a Resolv::DNS::Name or a String.  Retrieved address
will be a Resolv::IPv4 or Resolv::IPv6</p>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="ResolvError.html" title="Resolv::ResolvError (class)">ResolvError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


366
367
368
369</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/resolv.rb', line 366</span>

<span class='kw'>def</span> <span class='id getaddress'>getaddress</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span>
  <span class='id each_address'>each_address</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id address'>address</span><span class='op'>|</span> <span class='kw'>return</span> <span class='id address'>address</span><span class='rbrace'>}</span>
  <span class='id raise'>raise</span> <span class='const'>ResolvError</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DNS result has no information for </span><span class='embexpr_beg'>#{</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="getaddresses-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>getaddresses</strong>(name) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Gets all IP addresses for <tt>name</tt> from the DNS resolver.</p>

<p><tt>name</tt> can be a Resolv::DNS::Name or a String.  Retrieved addresses
will be a Resolv::IPv4 or Resolv::IPv6</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


377
378
379
380
381</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/resolv.rb', line 377</span>

<span class='kw'>def</span> <span class='id getaddresses'>getaddresses</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span>
  <span class='id ret'>ret</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id each_address'>each_address</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id address'>address</span><span class='op'>|</span> <span class='id ret'>ret</span> <span class='op'>&lt;&lt;</span> <span class='id address'>address</span><span class='rbrace'>}</span>
  <span class='kw'>return</span> <span class='id ret'>ret</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="getname-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>getname</strong>(address) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Gets the hostname for <tt>address</tt> from the DNS resolver.</p>

<p><tt>address</tt> must be a Resolv::IPv4, Resolv::IPv6 or a String. 
Retrieved name will be a Resolv::DNS::Name.</p>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="ResolvError.html" title="Resolv::ResolvError (class)">ResolvError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


413
414
415
416</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/resolv.rb', line 413</span>

<span class='kw'>def</span> <span class='id getname'>getname</span><span class='lparen'>(</span><span class='id address'>address</span><span class='rparen'>)</span>
  <span class='id each_name'>each_name</span><span class='lparen'>(</span><span class='id address'>address</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id name'>name</span><span class='op'>|</span> <span class='kw'>return</span> <span class='id name'>name</span><span class='rbrace'>}</span>
  <span class='id raise'>raise</span> <span class='const'>ResolvError</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DNS result has no information for </span><span class='embexpr_beg'>#{</span><span class='id address'>address</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="getnames-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>getnames</strong>(address) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Gets all hostnames for <tt>address</tt> from the DNS resolver.</p>

<p><tt>address</tt> must be a Resolv::IPv4, Resolv::IPv6 or a String. 
Retrieved names will be Resolv::DNS::Name instances.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


424
425
426
427
428</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/resolv.rb', line 424</span>

<span class='kw'>def</span> <span class='id getnames'>getnames</span><span class='lparen'>(</span><span class='id address'>address</span><span class='rparen'>)</span>
  <span class='id ret'>ret</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id each_name'>each_name</span><span class='lparen'>(</span><span class='id address'>address</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id name'>name</span><span class='op'>|</span> <span class='id ret'>ret</span> <span class='op'>&lt;&lt;</span> <span class='id name'>name</span><span class='rbrace'>}</span>
  <span class='kw'>return</span> <span class='id ret'>ret</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="getresource-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>getresource</strong>(name, typeclass) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Look up the <tt>typeclass</tt> DNS resource of <tt>name</tt>.</p>

<p><tt>name</tt> must be a Resolv::DNS::Name or a String.</p>

<p><tt>typeclass</tt> should be one of the following:</p>
<ul><li>
<p>Resolv::DNS::Resource::IN::A</p>
</li><li>
<p>Resolv::DNS::Resource::IN::AAAA</p>
</li><li>
<p>Resolv::DNS::Resource::IN::ANY</p>
</li><li>
<p>Resolv::DNS::Resource::IN::CNAME</p>
</li><li>
<p>Resolv::DNS::Resource::IN::HINFO</p>
</li><li>
<p>Resolv::DNS::Resource::IN::MINFO</p>
</li><li>
<p>Resolv::DNS::Resource::IN::MX</p>
</li><li>
<p>Resolv::DNS::Resource::IN::NS</p>
</li><li>
<p>Resolv::DNS::Resource::IN::PTR</p>
</li><li>
<p>Resolv::DNS::Resource::IN::SOA</p>
</li><li>
<p>Resolv::DNS::Resource::IN::TXT</p>
</li><li>
<p>Resolv::DNS::Resource::IN::WKS</p>
</li></ul>

<p>Returned resource is represented as a Resolv::DNS::Resource instance, i.e.
Resolv::DNS::Resource::IN::A.</p>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="ResolvError.html" title="Resolv::ResolvError (class)">ResolvError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


474
475
476
477</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/resolv.rb', line 474</span>

<span class='kw'>def</span> <span class='id getresource'>getresource</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id typeclass'>typeclass</span><span class='rparen'>)</span>
  <span class='id each_resource'>each_resource</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id typeclass'>typeclass</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id resource'>resource</span><span class='op'>|</span> <span class='kw'>return</span> <span class='id resource'>resource</span><span class='rbrace'>}</span>
  <span class='id raise'>raise</span> <span class='const'>ResolvError</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DNS result has no information for </span><span class='embexpr_beg'>#{</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="getresources-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>getresources</strong>(name, typeclass) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Looks up all <tt>typeclass</tt> DNS resources for <tt>name</tt>.  See
#getresource for argument details.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


483
484
485
486
487</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/resolv.rb', line 483</span>

<span class='kw'>def</span> <span class='id getresources'>getresources</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id typeclass'>typeclass</span><span class='rparen'>)</span>
  <span class='id ret'>ret</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id each_resource'>each_resource</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id typeclass'>typeclass</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id resource'>resource</span><span class='op'>|</span> <span class='id ret'>ret</span> <span class='op'>&lt;&lt;</span> <span class='id resource'>resource</span><span class='rbrace'>}</span>
  <span class='kw'>return</span> <span class='id ret'>ret</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="lazy_initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>lazy_initialize</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


339
340
341
342
343
344
345
346
347</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/resolv.rb', line 339</span>

<span class='kw'>def</span> <span class='id lazy_initialize'>lazy_initialize</span> <span class='comment'># :nodoc:
</span>  <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id synchronize'>synchronize</span> <span class='lbrace'>{</span>
    <span class='kw'>unless</span> <span class='ivar'>@initialized</span>
      <span class='ivar'>@config</span><span class='period'>.</span><span class='id lazy_initialize'>lazy_initialize</span>
      <span class='ivar'>@initialized</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>end</span>
  <span class='rbrace'>}</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="make_tcp_requester-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>make_tcp_requester</strong>(host, port) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


543
544
545</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/resolv.rb', line 543</span>

<span class='kw'>def</span> <span class='id make_tcp_requester'>make_tcp_requester</span><span class='lparen'>(</span><span class='id host'>host</span><span class='comma'>,</span> <span class='id port'>port</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='kw'>return</span> <span class='const'>Requester</span><span class='op'>::</span><span class='const'>TCP</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id host'>host</span><span class='comma'>,</span> <span class='id port'>port</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="make_udp_requester-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>make_udp_requester</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


534
535
536
537
538
539
540
541</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/resolv.rb', line 534</span>

<span class='kw'>def</span> <span class='id make_udp_requester'>make_udp_requester</span> <span class='comment'># :nodoc:
</span>  <span class='id nameserver_port'>nameserver_port</span> <span class='op'>=</span> <span class='ivar'>@config</span><span class='period'>.</span><span class='id nameserver_port'>nameserver_port</span>
  <span class='kw'>if</span> <span class='id nameserver_port'>nameserver_port</span><span class='period'>.</span><span class='id length'>length</span> <span class='op'>==</span> <span class='int'>1</span>
    <span class='const'>Requester</span><span class='op'>::</span><span class='const'>ConnectedUDP</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='op'>*</span><span class='id nameserver_port'>nameserver_port</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='const'>Requester</span><span class='op'>::</span><span class='const'>UnconnectedUDP</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='op'>*</span><span class='id nameserver_port'>nameserver_port</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sat Sep  3 14:10:05 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.9.3).
</div>

  </body>
</html>