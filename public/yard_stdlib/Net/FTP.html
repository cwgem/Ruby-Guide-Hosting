<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Net::FTP
  
    &mdash; Ruby 1.9 Ruby Standard Library
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (F)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../Net.html" title="Net (module)">Net</a></span></span>
     &raquo; 
    <span class="title">FTP</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Net::FTP
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Net::FTP</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="../MonitorMixin.html" title="MonitorMixin (module)">MonitorMixin</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/net/ftp.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>This class implements the File Transfer Protocol.  If you have used a
command-line FTP program, and are familiar with the commands, you will be
able to use this class easily.  Some extra features are included to take
advantage of Ruby's style and strengths.</p>

<h2>Example</h2>

<pre class="code"><span class='id require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>net/ftp</span><span class='tstring_end'>'</span></span></pre>

<h3>Example 1</h3>

<pre class="code"><span class='id ftp'>ftp</span> <span class='op'>=</span> <span class='const'>Net</span><span class='op'>::</span><span class='const'>FTP</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>ftp.netlab.co.jp</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='id ftp'>ftp</span><span class='period'>.</span><span class='id login'>login</span>
<span class='id files'>files</span> <span class='op'>=</span> <span class='id ftp'>ftp</span><span class='period'>.</span><span class='id chdir'>chdir</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>pub/lang/ruby/contrib</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='id files'>files</span> <span class='op'>=</span> <span class='id ftp'>ftp</span><span class='period'>.</span><span class='id list'>list</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>n*</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='id ftp'>ftp</span><span class='period'>.</span><span class='id getbinaryfile'>getbinaryfile</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>nif.rb-0.91.gz</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>nif.gz</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='int'>1024</span><span class='rparen'>)</span>
<span class='id ftp'>ftp</span><span class='period'>.</span><span class='id close'>close</span></pre>

<h3>Example 2</h3>

<pre class="code"><span class='const'>Net</span><span class='op'>::</span><span class='const'>FTP</span><span class='period'>.</span><span class='id open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>ftp.netlab.co.jp</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id ftp'>ftp</span><span class='op'>|</span>
  <span class='id ftp'>ftp</span><span class='period'>.</span><span class='id login'>login</span>
  <span class='id files'>files</span> <span class='op'>=</span> <span class='id ftp'>ftp</span><span class='period'>.</span><span class='id chdir'>chdir</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>pub/lang/ruby/contrib</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='id files'>files</span> <span class='op'>=</span> <span class='id ftp'>ftp</span><span class='period'>.</span><span class='id list'>list</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>n*</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='id ftp'>ftp</span><span class='period'>.</span><span class='id getbinaryfile'>getbinaryfile</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>nif.rb-0.91.gz</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>nif.gz</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='int'>1024</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>

<h2>Major Methods</h2>

<p>The following are the methods most likely to be useful to users:</p>
<ul><li>
<p>FTP.open</p>
</li><li>
<p>#getbinaryfile</p>
</li><li>
<p>#gettextfile</p>
</li><li>
<p>#putbinaryfile</p>
</li><li>
<p>#puttextfile</p>
</li><li>
<p>#chdir</p>
</li><li>
<p>#nlst</p>
</li><li>
<p>#size</p>
</li><li>
<p>#rename</p>
</li><li>
<p>#delete</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
</div><h2>Defined Under Namespace</h2>
<p class="children">
   
    
   
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="FTP/NullSocket.html" title="Net::FTP::NullSocket (class)">NullSocket</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="FTP_PORT-constant" class="">FTP_PORT =
          <div class="docstring">
  <div class="discussion">
    
<p>:stopdoc:</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='int'>21</span></pre></dd>
      
        <dt id="CRLF-constant" class="">CRLF =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\r\n</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="DEFAULT_BLOCKSIZE-constant" class="">DEFAULT_BLOCKSIZE =
          
        </dt>
        <dd><pre class="code"><span class='int'>4096</span></pre></dd>
      
        <dt id="MDTM_REGEXP-constant" class="">MDTM_REGEXP =
          <div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^(\d\d\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)</span><span class='regexp_end'>/</span></span></pre></dd>
      
    </dl>
  


  
  
  
  
  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#binary-instance_method" title="#binary (instance method)">- (Object) <strong>binary</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>When <tt>true</tt>, transfers are performed in binary mode.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#debug_mode-instance_method" title="#debug_mode (instance method)">- (Object) <strong>debug_mode</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>When <tt>true</tt>, all traffic to and from the server is written to
<tt>$stdout</tt>.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#last_response-instance_method" title="#last_response (instance method)">- (Object) <strong>last_response</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The server's last response.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#last_response_code-instance_method" title="#last_response_code (instance method)">- (Object) <strong>last_response_code</strong> </a>
    

    
      (also: #lastresp)
    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The server's last response code.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#passive-instance_method" title="#passive (instance method)">- (Object) <strong>passive</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>When <tt>true</tt>, the connection is in passive mode.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#resume-instance_method" title="#resume (instance method)">- (Object) <strong>resume</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets or retrieves the <tt>resume</tt> status, which decides whether
incomplete transfers are resumed or restarted.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#welcome-instance_method" title="#welcome (instance method)">- (Object) <strong>welcome</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The server's welcome message.</p>
</div></span>
  
</li>

    
  </ul>



  
  
  

  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#open-class_method" title="open (class method)">+ (Object) <strong>open</strong>(host, user = nil, passwd = nil, acct = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A synonym for <tt>FTP.new</tt>, but with a mandatory host parameter.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#abort-instance_method" title="#abort (instance method)">- (Object) <strong>abort</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Aborts the previous command (ABOR command).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#acct-instance_method" title="#acct (instance method)">- (Object) <strong>acct</strong>(account) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends the ACCT command.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#chdir-instance_method" title="#chdir (instance method)">- (Object) <strong>chdir</strong>(dirname) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Changes the (remote) directory.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#close-instance_method" title="#close (instance method)">- (Object) <strong>close</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Closes the connection.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#closed%3F-instance_method" title="#closed? (instance method)">- (Boolean) <strong>closed?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns <tt>true</tt> iff the connection is closed.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#connect-instance_method" title="#connect (instance method)">- (Object) <strong>connect</strong>(host, port = FTP_PORT) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Establishes an FTP connection to host, optionally overriding the default
port.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete-instance_method" title="#delete (instance method)">- (Object) <strong>delete</strong>(filename) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Deletes a file on the server.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get-instance_method" title="#get (instance method)">- (Object) <strong>get</strong>(remotefile, localfile = File.basename(remotefile), blocksize = DEFAULT_BLOCKSIZE, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Retrieves <tt>remotefile</tt> in whatever mode the session is set (text or
binary).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getbinaryfile-instance_method" title="#getbinaryfile (instance method)">- (Object) <strong>getbinaryfile</strong>(remotefile, localfile = File.basename(remotefile), blocksize = DEFAULT_BLOCKSIZE) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Retrieves <tt>remotefile</tt> in binary mode, storing the result in
<tt>localfile</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#gettextfile-instance_method" title="#gettextfile (instance method)">- (Object) <strong>gettextfile</strong>(remotefile, localfile = File.basename(remotefile)) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Retrieves <tt>remotefile</tt> in ASCII (text) mode, storing the result in
<tt>localfile</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#help-instance_method" title="#help (instance method)">- (Object) <strong>help</strong>(arg = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Issues the HELP command.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (FTP) <strong>initialize</strong>(host = nil, user = nil, passwd = nil, acct = nil) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates and returns a new <tt>FTP</tt> object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#list-instance_method" title="#list (instance method)">- (Object) <strong>list</strong>(*args, &amp;block) </a>
    

    
      (also: #ls, #dir)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns an array of file information in the directory (the output is like
`ls -l`).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#login-instance_method" title="#login (instance method)">- (Object) <strong>login</strong>(user = &quot;anonymous&quot;, passwd = nil, acct = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Logs in to the remote host.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mdtm-instance_method" title="#mdtm (instance method)">- (Object) <strong>mdtm</strong>(filename) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Issues the MDTM command.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mkdir-instance_method" title="#mkdir (instance method)">- (Object) <strong>mkdir</strong>(dirname) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a remote directory.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mtime-instance_method" title="#mtime (instance method)">- (Object) <strong>mtime</strong>(filename, local = false) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the last modification time of the (remote) file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#nlst-instance_method" title="#nlst (instance method)">- (Object) <strong>nlst</strong>(dir = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns an array of filenames in the remote directory.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#noop-instance_method" title="#noop (instance method)">- (Object) <strong>noop</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Issues a NOOP command.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#put-instance_method" title="#put (instance method)">- (Object) <strong>put</strong>(localfile, remotefile = File.basename(localfile), blocksize = DEFAULT_BLOCKSIZE, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Transfers <tt>localfile</tt> to the server in whatever mode the session is
set (text or binary).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#putbinaryfile-instance_method" title="#putbinaryfile (instance method)">- (Object) <strong>putbinaryfile</strong>(localfile, remotefile = File.basename(localfile), blocksize = DEFAULT_BLOCKSIZE, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Transfers <tt>localfile</tt> to the server in binary mode, storing the
result in <tt>remotefile</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#puttextfile-instance_method" title="#puttextfile (instance method)">- (Object) <strong>puttextfile</strong>(localfile, remotefile = File.basename(localfile), &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Transfers <tt>localfile</tt> to the server in ASCII (text) mode, storing
the result in <tt>remotefile</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pwd-instance_method" title="#pwd (instance method)">- (Object) <strong>pwd</strong> </a>
    

    
      (also: #getdir)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the current remote directory.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#quit-instance_method" title="#quit (instance method)">- (Object) <strong>quit</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Exits the FTP session.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rename-instance_method" title="#rename (instance method)">- (Object) <strong>rename</strong>(fromname, toname) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Renames a file on the server.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#retrbinary-instance_method" title="#retrbinary (instance method)">- (Object) <strong>retrbinary</strong>(cmd, blocksize, rest_offset = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Puts the connection into binary (image) mode, issues the given command, and
fetches the data returned, passing it to the associated block in chunks of
<tt>blocksize</tt> characters.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#retrlines-instance_method" title="#retrlines (instance method)">- (Object) <strong>retrlines</strong>(cmd) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Puts the connection into ASCII (text) mode, issues the given command, and
passes the resulting data, one line at a time, to the associated block.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#return_code-instance_method" title="#return_code (instance method)">- (Object) <strong>return_code</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Obsolete.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#return_code%3D-instance_method" title="#return_code= (instance method)">- (Object) <strong>return_code=</strong>(s) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Obsolete.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rmdir-instance_method" title="#rmdir (instance method)">- (Object) <strong>rmdir</strong>(dirname) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Removes a remote directory.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sendcmd-instance_method" title="#sendcmd (instance method)">- (Object) <strong>sendcmd</strong>(cmd) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a command and returns the response.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_socket-instance_method" title="#set_socket (instance method)">- (Object) <strong>set_socket</strong>(sock, get_greeting = true) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>WRITEME or make private.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#site-instance_method" title="#site (instance method)">- (Object) <strong>site</strong>(arg) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Issues a SITE command.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#size-instance_method" title="#size (instance method)">- (Object) <strong>size</strong>(filename) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the size of the given (remote) filename.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#status-instance_method" title="#status (instance method)">- (Object) <strong>status</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the status (STAT command).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#storbinary-instance_method" title="#storbinary (instance method)">- (Object) <strong>storbinary</strong>(cmd, file, blocksize, rest_offset = nil, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Puts the connection into binary (image) mode, issues the given server-side
command (such as "STOR myfile"), and sends the contents of the file named
<tt>file</tt> to the server.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#storlines-instance_method" title="#storlines (instance method)">- (Object) <strong>storlines</strong>(cmd, file, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Puts the connection into ASCII (text) mode, issues the given server-side
command (such as "STOR myfile"), and sends the contents of the file named
<tt>file</tt> to the server, one line at a time.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#system-instance_method" title="#system (instance method)">- (Object) <strong>system</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns system information.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#voidcmd-instance_method" title="#voidcmd (instance method)">- (Object) <strong>voidcmd</strong>(cmd) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a command and expect a response beginning with '2'.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../MonitorMixin.html" title="MonitorMixin (module)">MonitorMixin</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../MonitorMixin.html#extend_object-class_method" title="MonitorMixin.extend_object (method)">extend_object</a></span>, <span class='object_link'><a href="../MonitorMixin.html#mon_check_owner-instance_method" title="MonitorMixin#mon_check_owner (method)">#mon_check_owner</a></span>, <span class='object_link'><a href="../MonitorMixin.html#mon_enter-instance_method" title="MonitorMixin#mon_enter (method)">#mon_enter</a></span>, <span class='object_link'><a href="../MonitorMixin.html#mon_enter_for_cond-instance_method" title="MonitorMixin#mon_enter_for_cond (method)">#mon_enter_for_cond</a></span>, <span class='object_link'><a href="../MonitorMixin.html#mon_exit-instance_method" title="MonitorMixin#mon_exit (method)">#mon_exit</a></span>, <span class='object_link'><a href="../MonitorMixin.html#mon_exit_for_cond-instance_method" title="MonitorMixin#mon_exit_for_cond (method)">#mon_exit_for_cond</a></span>, <span class='object_link'><a href="../MonitorMixin.html#mon_initialize-instance_method" title="MonitorMixin#mon_initialize (method)">#mon_initialize</a></span>, <span class='object_link'><a href="../MonitorMixin.html#mon_synchronize-instance_method" title="MonitorMixin#mon_synchronize (method)">#mon_synchronize</a></span>, <span class='object_link'><a href="../MonitorMixin.html#mon_try_enter-instance_method" title="MonitorMixin#mon_try_enter (method)">#mon_try_enter</a></span>, <span class='object_link'><a href="../MonitorMixin.html#new_cond-instance_method" title="MonitorMixin#new_cond (method)">#new_cond</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Net::FTP (class)">FTP</a></span></tt>) <strong>initialize</strong>(host = nil, user = nil, passwd = nil, acct = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Creates and returns a new <tt>FTP</tt> object. If a <tt>host</tt> is given,
a connection is made. Additionally, if the <tt>user</tt> is given, the
given user name, password, and (optionally) account are used to log in. 
See #login.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


130
131
132
133
134
135
136
137
138
139
140
141
142
143
144</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 130</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id host'>host</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id user'>user</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id passwd'>passwd</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id acct'>acct</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='ivar'>@binary</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='ivar'>@passive</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@debug_mode</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@resume</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@sock</span> <span class='op'>=</span> <span class='const'>NullSocket</span><span class='period'>.</span><span class='id new'>new</span>
  <span class='ivar'>@logged_in</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>if</span> <span class='id host'>host</span>
    <span class='id connect'>connect</span><span class='lparen'>(</span><span class='id host'>host</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id user'>user</span>
      <span class='id login'>login</span><span class='lparen'>(</span><span class='id user'>user</span><span class='comma'>,</span> <span class='id passwd'>passwd</span><span class='comma'>,</span> <span class='id acct'>acct</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="binary=-instance_method"></span>
      <span id="binary-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="binary-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>binary</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>When <tt>true</tt>, transfers are performed in binary mode.  Default:
<tt>true</tt>.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


83
84
85</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 83</span>

<span class='kw'>def</span> <span class='id binary'>binary</span>
  <span class='ivar'>@binary</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="debug_mode=-instance_method"></span>
      <span id="debug_mode-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="debug_mode-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>debug_mode</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>When <tt>true</tt>, all traffic to and from the server is written to
<tt>$stdout</tt>.  Default: <tt>false</tt>.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


90
91
92</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 90</span>

<span class='kw'>def</span> <span class='id debug_mode'>debug_mode</span>
  <span class='ivar'>@debug_mode</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="last_response-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="last_response-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>last_response</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>The server's last response.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 104</span>

<span class='kw'>def</span> <span class='id last_response'>last_response</span>
  <span class='ivar'>@last_response</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="last_response_code-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="last_response_code-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>last_response_code</strong>  <span class="extras">(readonly)</span>
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='lastresp-instance_method'>lastresp</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    
<p>The server's last response code.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


100
101
102</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 100</span>

<span class='kw'>def</span> <span class='id last_response_code'>last_response_code</span>
  <span class='ivar'>@last_response_code</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="passive=-instance_method"></span>
      <span id="passive-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="passive-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>passive</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>When <tt>true</tt>, the connection is in passive mode.  Default:
<tt>false</tt>.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 86</span>

<span class='kw'>def</span> <span class='id passive'>passive</span>
  <span class='ivar'>@passive</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="resume=-instance_method"></span>
      <span id="resume-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="resume-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>resume</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sets or retrieves the <tt>resume</tt> status, which decides whether
incomplete transfers are resumed or restarted.  Default: <tt>false</tt>.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


94
95
96</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 94</span>

<span class='kw'>def</span> <span class='id resume'>resume</span>
  <span class='ivar'>@resume</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="welcome-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="welcome-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>welcome</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>The server's welcome message.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


97
98
99</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 97</span>

<span class='kw'>def</span> <span class='id welcome'>welcome</span>
  <span class='ivar'>@welcome</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="open-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>open</strong>(host, user = nil, passwd = nil, acct = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>A synonym for <tt>FTP.new</tt>, but with a mandatory host parameter.</p>

<p>If a block is given, it is passed the <tt>FTP</tt> object, which will be
closed when the block finishes, or when an exception is raised.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113
114
115
116
117
118
119
120
121
122
123</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 112</span>

<span class='kw'>def</span> <span class='const'>FTP</span><span class='period'>.</span><span class='id open'>open</span><span class='lparen'>(</span><span class='id host'>host</span><span class='comma'>,</span> <span class='id user'>user</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id passwd'>passwd</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id acct'>acct</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id block_given?'>block_given?</span>
    <span class='id ftp'>ftp</span> <span class='op'>=</span> <span class='id new'>new</span><span class='lparen'>(</span><span class='id host'>host</span><span class='comma'>,</span> <span class='id user'>user</span><span class='comma'>,</span> <span class='id passwd'>passwd</span><span class='comma'>,</span> <span class='id acct'>acct</span><span class='rparen'>)</span>
    <span class='kw'>begin</span>
      <span class='kw'>yield</span> <span class='id ftp'>ftp</span>
    <span class='kw'>ensure</span>
      <span class='id ftp'>ftp</span><span class='period'>.</span><span class='id close'>close</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id new'>new</span><span class='lparen'>(</span><span class='id host'>host</span><span class='comma'>,</span> <span class='id user'>user</span><span class='comma'>,</span> <span class='id passwd'>passwd</span><span class='comma'>,</span> <span class='id acct'>acct</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="abort-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>abort</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Aborts the previous command (ABOR command).</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


837
838
839
840
841
842
843
844
845
846</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 837</span>

<span class='kw'>def</span> <span class='id abort'>abort</span>
  <span class='id line'>line</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ABOR</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='const'>CRLF</span>
  <span class='id print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>put: ABOR\n</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='ivar'>@debug_mode</span>
  <span class='ivar'>@sock</span><span class='period'>.</span><span class='id send'>send</span><span class='lparen'>(</span><span class='id line'>line</span><span class='comma'>,</span> <span class='const'>Socket</span><span class='op'>::</span><span class='const'>MSG_OOB</span><span class='rparen'>)</span>
  <span class='id resp'>resp</span> <span class='op'>=</span> <span class='id getmultiline'>getmultiline</span>
  <span class='kw'>unless</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>426</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>226</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>225</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='id resp'>resp</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id raise'>raise</span> <span class='const'>FTPProtoError</span><span class='comma'>,</span> <span class='id resp'>resp</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id resp'>resp</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="acct-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>acct</strong>(account) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends the ACCT command.</p>

<p>This is a less common FTP command, to send account information if the
destination host requires it.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


689
690
691
692</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 689</span>

<span class='kw'>def</span> <span class='id acct'>acct</span><span class='lparen'>(</span><span class='id account'>account</span><span class='rparen'>)</span>
  <span class='id cmd'>cmd</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ACCT </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id account'>account</span>
  <span class='id voidcmd'>voidcmd</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="chdir-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>chdir</strong>(dirname) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Changes the (remote) directory.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


759
760
761
762
763
764
765
766
767
768
769
770
771
772</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 759</span>

<span class='kw'>def</span> <span class='id chdir'>chdir</span><span class='lparen'>(</span><span class='id dirname'>dirname</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id dirname'>dirname</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>..</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>begin</span>
      <span class='id voidcmd'>voidcmd</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CDUP</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>return</span>
    <span class='kw'>rescue</span> <span class='const'>FTPPermError</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
      <span class='kw'>if</span> <span class='id e'>e</span><span class='period'>.</span><span class='id message'>message</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>500</span><span class='tstring_end'>&quot;</span></span>
        <span class='id raise'>raise</span> <span class='id e'>e</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id cmd'>cmd</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CWD </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id dirname'>dirname</span>
  <span class='id voidcmd'>voidcmd</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="close-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>close</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Closes the connection.  Further operations are impossible until you open a
new connection with #connect.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


907
908
909</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 907</span>

<span class='kw'>def</span> <span class='id close'>close</span>
  <span class='ivar'>@sock</span><span class='period'>.</span><span class='id close'>close</span> <span class='kw'>if</span> <span class='ivar'>@sock</span> <span class='kw'>and</span> <span class='kw'>not</span> <span class='ivar'>@sock</span><span class='period'>.</span><span class='id closed?'>closed?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="closed?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>closed?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns <tt>true</tt> iff the connection is closed.</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


914
915
916</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 914</span>

<span class='kw'>def</span> <span class='id closed?'>closed?</span>
  <span class='ivar'>@sock</span> <span class='op'>==</span> <span class='kw'>nil</span> <span class='kw'>or</span> <span class='ivar'>@sock</span><span class='period'>.</span><span class='id closed?'>closed?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="connect-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>connect</strong>(host, port = FTP_PORT) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Establishes an FTP connection to host, optionally overriding the default
port. If the environment variable <tt>SOCKS_SERVER</tt> is set, sets up the
connection through a SOCKS proxy. Raises an exception (typically
<tt>Errno::ECONNREFUSED</tt>) if the connection cannot be established.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


217
218
219
220
221
222
223
224
225</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 217</span>

<span class='kw'>def</span> <span class='id connect'>connect</span><span class='lparen'>(</span><span class='id host'>host</span><span class='comma'>,</span> <span class='id port'>port</span> <span class='op'>=</span> <span class='const'>FTP_PORT</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='ivar'>@debug_mode</span>
    <span class='id print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>connect: </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id host'>host</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id port'>port</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@sock</span> <span class='op'>=</span> <span class='id open_socket'>open_socket</span><span class='lparen'>(</span><span class='id host'>host</span><span class='comma'>,</span> <span class='id port'>port</span><span class='rparen'>)</span>
    <span class='id voidresp'>voidresp</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="delete-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>delete</strong>(filename) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Deletes a file on the server.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


745
746
747
748
749
750
751
752
753
754</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 745</span>

<span class='kw'>def</span> <span class='id delete'>delete</span><span class='lparen'>(</span><span class='id filename'>filename</span><span class='rparen'>)</span>
  <span class='id resp'>resp</span> <span class='op'>=</span> <span class='id sendcmd'>sendcmd</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DELE </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id filename'>filename</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id resp'>resp</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>250</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>return</span>
  <span class='kw'>elsif</span> <span class='id resp'>resp</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='CHAR'>?5</span>
    <span class='id raise'>raise</span> <span class='const'>FTPPermError</span><span class='comma'>,</span> <span class='id resp'>resp</span>
  <span class='kw'>else</span>
    <span class='id raise'>raise</span> <span class='const'>FTPReplyError</span><span class='comma'>,</span> <span class='id resp'>resp</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="get-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>get</strong>(remotefile, localfile = File.basename(remotefile), blocksize = DEFAULT_BLOCKSIZE, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Retrieves <tt>remotefile</tt> in whatever mode the session is set (text or
binary).  See #gettextfile and #getbinaryfile.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


618
619
620
621
622
623
624
625</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 618</span>

<span class='kw'>def</span> <span class='id get'>get</span><span class='lparen'>(</span><span class='id remotefile'>remotefile</span><span class='comma'>,</span> <span class='id localfile'>localfile</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id basename'>basename</span><span class='lparen'>(</span><span class='id remotefile'>remotefile</span><span class='rparen'>)</span><span class='comma'>,</span>
        <span class='id blocksize'>blocksize</span> <span class='op'>=</span> <span class='const'>DEFAULT_BLOCKSIZE</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span> <span class='comment'># :yield: data
</span>  <span class='kw'>if</span> <span class='ivar'>@binary</span>
    <span class='id getbinaryfile'>getbinaryfile</span><span class='lparen'>(</span><span class='id remotefile'>remotefile</span><span class='comma'>,</span> <span class='id localfile'>localfile</span><span class='comma'>,</span> <span class='id blocksize'>blocksize</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id gettextfile'>gettextfile</span><span class='lparen'>(</span><span class='id remotefile'>remotefile</span><span class='comma'>,</span> <span class='id localfile'>localfile</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="getbinaryfile-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>getbinaryfile</strong>(remotefile, localfile = File.basename(remotefile), blocksize = DEFAULT_BLOCKSIZE) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Retrieves <tt>remotefile</tt> in binary mode, storing the result in
<tt>localfile</tt>. If <tt>localfile</tt> is nil, returns retrieved data.
If a block is supplied, it is passed the retrieved data in
<tt>blocksize</tt> chunks.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 560</span>

<span class='kw'>def</span> <span class='id getbinaryfile'>getbinaryfile</span><span class='lparen'>(</span><span class='id remotefile'>remotefile</span><span class='comma'>,</span> <span class='id localfile'>localfile</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id basename'>basename</span><span class='lparen'>(</span><span class='id remotefile'>remotefile</span><span class='rparen'>)</span><span class='comma'>,</span>
                  <span class='id blocksize'>blocksize</span> <span class='op'>=</span> <span class='const'>DEFAULT_BLOCKSIZE</span><span class='rparen'>)</span> <span class='comment'># :yield: data
</span>  <span class='id result'>result</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>if</span> <span class='id localfile'>localfile</span>
    <span class='kw'>if</span> <span class='ivar'>@resume</span>
      <span class='id rest_offset'>rest_offset</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id size?'>size?</span><span class='lparen'>(</span><span class='id localfile'>localfile</span><span class='rparen'>)</span>
      <span class='id f'>f</span> <span class='op'>=</span> <span class='id open'>open</span><span class='lparen'>(</span><span class='id localfile'>localfile</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id rest_offset'>rest_offset</span> <span class='op'>=</span> <span class='kw'>nil</span>
      <span class='id f'>f</span> <span class='op'>=</span> <span class='id open'>open</span><span class='lparen'>(</span><span class='id localfile'>localfile</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>w</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>elsif</span> <span class='op'>!</span><span class='id block_given?'>block_given?</span>
    <span class='id result'>result</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>begin</span>
    <span class='id f'>f</span><span class='period'>.</span><span class='id binmode'>binmode</span> <span class='kw'>if</span> <span class='id localfile'>localfile</span>
    <span class='id retrbinary'>retrbinary</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RETR </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id remotefile'>remotefile</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='comma'>,</span> <span class='id blocksize'>blocksize</span><span class='comma'>,</span> <span class='id rest_offset'>rest_offset</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id data'>data</span><span class='op'>|</span>
      <span class='id f'>f</span><span class='period'>.</span><span class='id write'>write</span><span class='lparen'>(</span><span class='id data'>data</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id localfile'>localfile</span>
      <span class='kw'>yield</span><span class='lparen'>(</span><span class='id data'>data</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id block_given?'>block_given?</span>
      <span class='id result'>result</span><span class='period'>.</span><span class='id concat'>concat</span><span class='lparen'>(</span><span class='id data'>data</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id result'>result</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='id result'>result</span>
  <span class='kw'>ensure</span>
    <span class='id f'>f</span><span class='period'>.</span><span class='id close'>close</span> <span class='kw'>if</span> <span class='id localfile'>localfile</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="gettextfile-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>gettextfile</strong>(remotefile, localfile = File.basename(remotefile)) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Retrieves <tt>remotefile</tt> in ASCII (text) mode, storing the result in
<tt>localfile</tt>. If <tt>localfile</tt> is nil, returns retrieved data.
If a block is supplied, it is passed the retrieved data one line at a time.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 594</span>

<span class='kw'>def</span> <span class='id gettextfile'>gettextfile</span><span class='lparen'>(</span><span class='id remotefile'>remotefile</span><span class='comma'>,</span> <span class='id localfile'>localfile</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id basename'>basename</span><span class='lparen'>(</span><span class='id remotefile'>remotefile</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='comment'># :yield: line
</span>  <span class='id result'>result</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>if</span> <span class='id localfile'>localfile</span>
    <span class='id f'>f</span> <span class='op'>=</span> <span class='id open'>open</span><span class='lparen'>(</span><span class='id localfile'>localfile</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>w</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='op'>!</span><span class='id block_given?'>block_given?</span>
    <span class='id result'>result</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>begin</span>
    <span class='id retrlines'>retrlines</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RETR </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id remotefile'>remotefile</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id line'>line</span><span class='comma'>,</span> <span class='id newline'>newline</span><span class='op'>|</span>
      <span class='id l'>l</span> <span class='op'>=</span> <span class='id newline'>newline</span> <span class='op'>?</span> <span class='id line'>line</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='id line'>line</span>
      <span class='id f'>f</span><span class='period'>.</span><span class='id print'>print</span><span class='lparen'>(</span><span class='id l'>l</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id localfile'>localfile</span>
      <span class='kw'>yield</span><span class='lparen'>(</span><span class='id line'>line</span><span class='comma'>,</span> <span class='id newline'>newline</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id block_given?'>block_given?</span>
      <span class='id result'>result</span><span class='period'>.</span><span class='id concat'>concat</span><span class='lparen'>(</span><span class='id l'>l</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id result'>result</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='id result'>result</span>
  <span class='kw'>ensure</span>
    <span class='id f'>f</span><span class='period'>.</span><span class='id close'>close</span> <span class='kw'>if</span> <span class='id localfile'>localfile</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="help-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>help</strong>(arg = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Issues the HELP command.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


871
872
873
874
875
876
877</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 871</span>

<span class='kw'>def</span> <span class='id help'>help</span><span class='lparen'>(</span><span class='id arg'>arg</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id cmd'>cmd</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HELP</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>if</span> <span class='id arg'>arg</span>
    <span class='id cmd'>cmd</span> <span class='op'>=</span> <span class='id cmd'>cmd</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id arg'>arg</span>
  <span class='kw'>end</span>
  <span class='id sendcmd'>sendcmd</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="list-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>list</strong>(*args, &amp;block) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='ls-instance_method'>ls</span>, <span id='dir-instance_method'>dir</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns an array of file information in the directory (the output is like
`ls -l`).  If a block is given, it iterates through the listing.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


713
714
715
716
717
718
719
720
721
722
723
724
725
726
727</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 713</span>

<span class='kw'>def</span> <span class='id list'>list</span><span class='lparen'>(</span><span class='op'>*</span><span class='id args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span> <span class='comment'># :yield: line
</span>  <span class='id cmd'>cmd</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LIST</span><span class='tstring_end'>&quot;</span></span>
  <span class='id args'>args</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id arg'>arg</span><span class='op'>|</span>
    <span class='id cmd'>cmd</span> <span class='op'>=</span> <span class='id cmd'>cmd</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id arg'>arg</span><span class='period'>.</span><span class='id to_s'>to_s</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id block'>block</span>
    <span class='id retrlines'>retrlines</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id lines'>lines</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id retrlines'>retrlines</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id line'>line</span><span class='op'>|</span>
      <span class='id lines'>lines</span> <span class='op'>&lt;&lt;</span> <span class='id line'>line</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='id lines'>lines</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="login-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>login</strong>(user = &quot;anonymous&quot;, passwd = nil, acct = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Logs in to the remote host. The session must have been previously
connected.  If <tt>user</tt> is the string "anonymous" and the
<tt>password</tt> is <tt>nil</tt>, a password of <tt>user@host</tt> is
synthesized. If the <tt>acct</tt> parameter is not <tt>nil</tt>, an FTP
ACCT command is sent following the successful login.  Raises an exception
on error (typically <tt>Net::FTPPermError</tt>).</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 423</span>

<span class='kw'>def</span> <span class='id login'>login</span><span class='lparen'>(</span><span class='id user'>user</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>anonymous</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id passwd'>passwd</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id acct'>acct</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id user'>user</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>anonymous</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>and</span> <span class='id passwd'>passwd</span> <span class='op'>==</span> <span class='kw'>nil</span>
    <span class='id passwd'>passwd</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>anonymous@</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id resp'>resp</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id resp'>resp</span> <span class='op'>=</span> <span class='id sendcmd'>sendcmd</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>USER </span><span class='tstring_end'>'</span></span> <span class='op'>+</span> <span class='id user'>user</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id resp'>resp</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='CHAR'>?3</span>
      <span class='id raise'>raise</span> <span class='const'>FTPReplyError</span><span class='comma'>,</span> <span class='id resp'>resp</span> <span class='kw'>if</span> <span class='id passwd'>passwd</span><span class='period'>.</span><span class='id nil?'>nil?</span>
      <span class='id resp'>resp</span> <span class='op'>=</span> <span class='id sendcmd'>sendcmd</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>PASS </span><span class='tstring_end'>'</span></span> <span class='op'>+</span> <span class='id passwd'>passwd</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id resp'>resp</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='CHAR'>?3</span>
      <span class='id raise'>raise</span> <span class='const'>FTPReplyError</span><span class='comma'>,</span> <span class='id resp'>resp</span> <span class='kw'>if</span> <span class='id acct'>acct</span><span class='period'>.</span><span class='id nil?'>nil?</span>
      <span class='id resp'>resp</span> <span class='op'>=</span> <span class='id sendcmd'>sendcmd</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>ACCT </span><span class='tstring_end'>'</span></span> <span class='op'>+</span> <span class='id acct'>acct</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id resp'>resp</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='CHAR'>?2</span>
    <span class='id raise'>raise</span> <span class='const'>FTPReplyError</span><span class='comma'>,</span> <span class='id resp'>resp</span>
  <span class='kw'>end</span>
  <span class='ivar'>@welcome</span> <span class='op'>=</span> <span class='id resp'>resp</span>
  <span class='id send_type_command'>send_type_command</span>
  <span class='ivar'>@logged_in</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="mdtm-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>mdtm</strong>(filename) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Issues the MDTM command.  TODO: more info.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


861
862
863
864
865
866</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 861</span>

<span class='kw'>def</span> <span class='id mdtm'>mdtm</span><span class='lparen'>(</span><span class='id filename'>filename</span><span class='rparen'>)</span>
  <span class='id resp'>resp</span> <span class='op'>=</span> <span class='id sendcmd'>sendcmd</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MDTM </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id filename'>filename</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id resp'>resp</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>213</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>return</span> <span class='id resp'>resp</span><span class='lbracket'>[</span><span class='int'>3</span> <span class='op'>..</span> <span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id strip'>strip</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="mkdir-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>mkdir</strong>(dirname) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Creates a remote directory.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


802
803
804
805</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 802</span>

<span class='kw'>def</span> <span class='id mkdir'>mkdir</span><span class='lparen'>(</span><span class='id dirname'>dirname</span><span class='rparen'>)</span>
  <span class='id resp'>resp</span> <span class='op'>=</span> <span class='id sendcmd'>sendcmd</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MKD </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id dirname'>dirname</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id parse257'>parse257</span><span class='lparen'>(</span><span class='id resp'>resp</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="mtime-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>mtime</strong>(filename, local = false) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the last modification time of the (remote) file.  If <tt>local</tt>
is <tt>true</tt>, it is returned as a local time, otherwise it's a UTC
time.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


793
794
795
796
797</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 793</span>

<span class='kw'>def</span> <span class='id mtime'>mtime</span><span class='lparen'>(</span><span class='id filename'>filename</span><span class='comma'>,</span> <span class='id local'>local</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id str'>str</span> <span class='op'>=</span> <span class='id mdtm'>mdtm</span><span class='lparen'>(</span><span class='id filename'>filename</span><span class='rparen'>)</span>
  <span class='id ary'>ary</span> <span class='op'>=</span> <span class='id str'>str</span><span class='period'>.</span><span class='id scan'>scan</span><span class='lparen'>(</span><span class='const'>MDTM_REGEXP</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id collect'>collect</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span> <span class='id i'>i</span><span class='period'>.</span><span class='id to_i'>to_i</span><span class='rbrace'>}</span>
  <span class='kw'>return</span> <span class='id local'>local</span> <span class='op'>?</span> <span class='const'>Time</span><span class='period'>.</span><span class='id local'>local</span><span class='lparen'>(</span><span class='op'>*</span><span class='id ary'>ary</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='const'>Time</span><span class='period'>.</span><span class='id gm'>gm</span><span class='lparen'>(</span><span class='op'>*</span><span class='id ary'>ary</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="nlst-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>nlst</strong>(dir = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns an array of filenames in the remote directory.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


697
698
699
700
701
702
703
704
705
706
707</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 697</span>

<span class='kw'>def</span> <span class='id nlst'>nlst</span><span class='lparen'>(</span><span class='id dir'>dir</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id cmd'>cmd</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NLST</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>if</span> <span class='id dir'>dir</span>
    <span class='id cmd'>cmd</span> <span class='op'>=</span> <span class='id cmd'>cmd</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id dir'>dir</span>
  <span class='kw'>end</span>
  <span class='id files'>files</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id retrlines'>retrlines</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id line'>line</span><span class='op'>|</span>
    <span class='id files'>files</span><span class='period'>.</span><span class='id push'>push</span><span class='lparen'>(</span><span class='id line'>line</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id files'>files</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="noop-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>noop</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Issues a NOOP command.</p>

<p>Does nothing except return a response.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


891
892
893</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 891</span>

<span class='kw'>def</span> <span class='id noop'>noop</span>
  <span class='id voidcmd'>voidcmd</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NOOP</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="put-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>put</strong>(localfile, remotefile = File.basename(localfile), blocksize = DEFAULT_BLOCKSIZE, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Transfers <tt>localfile</tt> to the server in whatever mode the session is
set (text or binary).  See #puttextfile and #putbinaryfile.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


674
675
676
677
678
679
680
681</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 674</span>

<span class='kw'>def</span> <span class='id put'>put</span><span class='lparen'>(</span><span class='id localfile'>localfile</span><span class='comma'>,</span> <span class='id remotefile'>remotefile</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id basename'>basename</span><span class='lparen'>(</span><span class='id localfile'>localfile</span><span class='rparen'>)</span><span class='comma'>,</span>
        <span class='id blocksize'>blocksize</span> <span class='op'>=</span> <span class='const'>DEFAULT_BLOCKSIZE</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='ivar'>@binary</span>
    <span class='id putbinaryfile'>putbinaryfile</span><span class='lparen'>(</span><span class='id localfile'>localfile</span><span class='comma'>,</span> <span class='id remotefile'>remotefile</span><span class='comma'>,</span> <span class='id blocksize'>blocksize</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id puttextfile'>puttextfile</span><span class='lparen'>(</span><span class='id localfile'>localfile</span><span class='comma'>,</span> <span class='id remotefile'>remotefile</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="putbinaryfile-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>putbinaryfile</strong>(localfile, remotefile = File.basename(localfile), blocksize = DEFAULT_BLOCKSIZE, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Transfers <tt>localfile</tt> to the server in binary mode, storing the
result in <tt>remotefile</tt>. If a block is supplied, calls it, passing in
the transmitted data in <tt>blocksize</tt> chunks.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652
653
654</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 632</span>

<span class='kw'>def</span> <span class='id putbinaryfile'>putbinaryfile</span><span class='lparen'>(</span><span class='id localfile'>localfile</span><span class='comma'>,</span> <span class='id remotefile'>remotefile</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id basename'>basename</span><span class='lparen'>(</span><span class='id localfile'>localfile</span><span class='rparen'>)</span><span class='comma'>,</span>
                  <span class='id blocksize'>blocksize</span> <span class='op'>=</span> <span class='const'>DEFAULT_BLOCKSIZE</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span> <span class='comment'># :yield: data
</span>  <span class='kw'>if</span> <span class='ivar'>@resume</span>
    <span class='kw'>begin</span>
      <span class='id rest_offset'>rest_offset</span> <span class='op'>=</span> <span class='id size'>size</span><span class='lparen'>(</span><span class='id remotefile'>remotefile</span><span class='rparen'>)</span>
    <span class='kw'>rescue</span> <span class='const'>Net</span><span class='op'>::</span><span class='const'>FTPPermError</span>
      <span class='id rest_offset'>rest_offset</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id rest_offset'>rest_offset</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
  <span class='id f'>f</span> <span class='op'>=</span> <span class='id open'>open</span><span class='lparen'>(</span><span class='id localfile'>localfile</span><span class='rparen'>)</span>
  <span class='kw'>begin</span>
    <span class='id f'>f</span><span class='period'>.</span><span class='id binmode'>binmode</span>
    <span class='kw'>if</span> <span class='id rest_offset'>rest_offset</span>
      <span class='id storbinary'>storbinary</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>APPE </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id remotefile'>remotefile</span><span class='comma'>,</span> <span class='id f'>f</span><span class='comma'>,</span> <span class='id blocksize'>blocksize</span><span class='comma'>,</span> <span class='id rest_offset'>rest_offset</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id storbinary'>storbinary</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>STOR </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id remotefile'>remotefile</span><span class='comma'>,</span> <span class='id f'>f</span><span class='comma'>,</span> <span class='id blocksize'>blocksize</span><span class='comma'>,</span> <span class='id rest_offset'>rest_offset</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>ensure</span>
    <span class='id f'>f</span><span class='period'>.</span><span class='id close'>close</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="puttextfile-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>puttextfile</strong>(localfile, remotefile = File.basename(localfile), &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Transfers <tt>localfile</tt> to the server in ASCII (text) mode, storing
the result in <tt>remotefile</tt>. If callback or an associated block is
supplied, calls it, passing in the transmitted data one line at a time.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


661
662
663
664
665
666
667
668</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 661</span>

<span class='kw'>def</span> <span class='id puttextfile'>puttextfile</span><span class='lparen'>(</span><span class='id localfile'>localfile</span><span class='comma'>,</span> <span class='id remotefile'>remotefile</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id basename'>basename</span><span class='lparen'>(</span><span class='id localfile'>localfile</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span> <span class='comment'># :yield: line
</span>  <span class='id f'>f</span> <span class='op'>=</span> <span class='id open'>open</span><span class='lparen'>(</span><span class='id localfile'>localfile</span><span class='rparen'>)</span>
  <span class='kw'>begin</span>
    <span class='id storlines'>storlines</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>STOR </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id remotefile'>remotefile</span><span class='comma'>,</span> <span class='id f'>f</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='kw'>ensure</span>
    <span class='id f'>f</span><span class='period'>.</span><span class='id close'>close</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="pwd-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>pwd</strong> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='getdir-instance_method'>getdir</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the current remote directory.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


817
818
819
820</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 817</span>

<span class='kw'>def</span> <span class='id pwd'>pwd</span>
  <span class='id resp'>resp</span> <span class='op'>=</span> <span class='id sendcmd'>sendcmd</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>PWD</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id parse257'>parse257</span><span class='lparen'>(</span><span class='id resp'>resp</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="quit-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>quit</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Exits the FTP session.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


882
883
884</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 882</span>

<span class='kw'>def</span> <span class='id quit'>quit</span>
  <span class='id voidcmd'>voidcmd</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>QUIT</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="rename-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>rename</strong>(fromname, toname) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Renames a file on the server.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


734
735
736
737
738
739
740</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 734</span>

<span class='kw'>def</span> <span class='id rename'>rename</span><span class='lparen'>(</span><span class='id fromname'>fromname</span><span class='comma'>,</span> <span class='id toname'>toname</span><span class='rparen'>)</span>
  <span class='id resp'>resp</span> <span class='op'>=</span> <span class='id sendcmd'>sendcmd</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RNFR </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id fromname'>fromname</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id resp'>resp</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='CHAR'>?3</span>
    <span class='id raise'>raise</span> <span class='const'>FTPReplyError</span><span class='comma'>,</span> <span class='id resp'>resp</span>
  <span class='kw'>end</span>
  <span class='id voidcmd'>voidcmd</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RNTO </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id toname'>toname</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="retrbinary-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>retrbinary</strong>(cmd, blocksize, rest_offset = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Puts the connection into binary (image) mode, issues the given command, and
fetches the data returned, passing it to the associated block in chunks of
<tt>blocksize</tt> characters. Note that <tt>cmd</tt> is a server command
(such as "RETR myfile").</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


454
455
456
457
458
459
460
461
462
463
464
465
466
467</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 454</span>

<span class='kw'>def</span> <span class='id retrbinary'>retrbinary</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='comma'>,</span> <span class='id blocksize'>blocksize</span><span class='comma'>,</span> <span class='id rest_offset'>rest_offset</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span> <span class='comment'># :yield: data
</span>  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id with_binary'>with_binary</span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id conn'>conn</span> <span class='op'>=</span> <span class='id transfercmd'>transfercmd</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='comma'>,</span> <span class='id rest_offset'>rest_offset</span><span class='rparen'>)</span>
      <span class='id loop'>loop</span> <span class='kw'>do</span>
        <span class='id data'>data</span> <span class='op'>=</span> <span class='id conn'>conn</span><span class='period'>.</span><span class='id read'>read</span><span class='lparen'>(</span><span class='id blocksize'>blocksize</span><span class='rparen'>)</span>
        <span class='kw'>break</span> <span class='kw'>if</span> <span class='id data'>data</span> <span class='op'>==</span> <span class='kw'>nil</span>
        <span class='kw'>yield</span><span class='lparen'>(</span><span class='id data'>data</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
      <span class='id conn'>conn</span><span class='period'>.</span><span class='id close'>close</span>
      <span class='id voidresp'>voidresp</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="retrlines-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>retrlines</strong>(cmd) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Puts the connection into ASCII (text) mode, issues the given command, and
passes the resulting data, one line at a time, to the associated block. If
no block is given, prints the lines. Note that <tt>cmd</tt> is a server
command (such as "RETR myfile").</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


475
476
477
478
479
480
481
482
483
484
485
486
487
488</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 475</span>

<span class='kw'>def</span> <span class='id retrlines'>retrlines</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='rparen'>)</span> <span class='comment'># :yield: line
</span>  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id with_binary'>with_binary</span><span class='lparen'>(</span><span class='kw'>false</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id conn'>conn</span> <span class='op'>=</span> <span class='id transfercmd'>transfercmd</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='rparen'>)</span>
      <span class='id loop'>loop</span> <span class='kw'>do</span>
        <span class='id line'>line</span> <span class='op'>=</span> <span class='id conn'>conn</span><span class='period'>.</span><span class='id gets'>gets</span>
        <span class='kw'>break</span> <span class='kw'>if</span> <span class='id line'>line</span> <span class='op'>==</span> <span class='kw'>nil</span>
        <span class='kw'>yield</span><span class='lparen'>(</span><span class='id line'>line</span><span class='period'>.</span><span class='id sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\r?\n\z</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='op'>!</span><span class='id line'>line</span><span class='period'>.</span><span class='id match'>match</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\n\z</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id nil?'>nil?</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
      <span class='id conn'>conn</span><span class='period'>.</span><span class='id close'>close</span>
      <span class='id voidresp'>voidresp</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="return_code-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>return_code</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Obsolete</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


186
187
188
189</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 186</span>

<span class='kw'>def</span> <span class='id return_code'>return_code</span> <span class='comment'># :nodoc:
</span>  <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>warning: Net::FTP#return_code is obsolete and do nothing</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="return_code=-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>return_code=</strong>(s) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Obsolete</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


192
193
194</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 192</span>

<span class='kw'>def</span> <span class='id return_code='>return_code=</span><span class='lparen'>(</span><span class='id s'>s</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id puts'>puts</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>warning: Net::FTP#return_code= is obsolete and do nothing</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="rmdir-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>rmdir</strong>(dirname) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Removes a remote directory.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


810
811
812</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 810</span>

<span class='kw'>def</span> <span class='id rmdir'>rmdir</span><span class='lparen'>(</span><span class='id dirname'>dirname</span><span class='rparen'>)</span>
  <span class='id voidcmd'>voidcmd</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RMD </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id dirname'>dirname</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="sendcmd-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>sendcmd</strong>(cmd) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a command and returns the response.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


322
323
324
325
326
327</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 322</span>

<span class='kw'>def</span> <span class='id sendcmd'>sendcmd</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='rparen'>)</span>
  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id putline'>putline</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id getresp'>getresp</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="set_socket-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>set_socket</strong>(sock, get_greeting = true) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>WRITEME or make private</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


230
231
232
233
234
235
236
237</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 230</span>

<span class='kw'>def</span> <span class='id set_socket'>set_socket</span><span class='lparen'>(</span><span class='id sock'>sock</span><span class='comma'>,</span> <span class='id get_greeting'>get_greeting</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@sock</span> <span class='op'>=</span> <span class='id sock'>sock</span>
    <span class='kw'>if</span> <span class='id get_greeting'>get_greeting</span>
      <span class='id voidresp'>voidresp</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="site-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>site</strong>(arg) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Issues a SITE command.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


898
899
900
901</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 898</span>

<span class='kw'>def</span> <span class='id site'>site</span><span class='lparen'>(</span><span class='id arg'>arg</span><span class='rparen'>)</span>
  <span class='id cmd'>cmd</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SITE </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id arg'>arg</span>
  <span class='id voidcmd'>voidcmd</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="size-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>size</strong>(filename) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the size of the given (remote) filename.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


777
778
779
780
781
782
783
784
785</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 777</span>

<span class='kw'>def</span> <span class='id size'>size</span><span class='lparen'>(</span><span class='id filename'>filename</span><span class='rparen'>)</span>
  <span class='id with_binary'>with_binary</span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id resp'>resp</span> <span class='op'>=</span> <span class='id sendcmd'>sendcmd</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SIZE </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id filename'>filename</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id resp'>resp</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>213</span><span class='tstring_end'>&quot;</span></span>
      <span class='id raise'>raise</span> <span class='const'>FTPReplyError</span><span class='comma'>,</span> <span class='id resp'>resp</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='id resp'>resp</span><span class='lbracket'>[</span><span class='int'>3</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id strip'>strip</span><span class='period'>.</span><span class='id to_i'>to_i</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="status-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>status</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the status (STAT command).</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


851
852
853
854
855
856</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 851</span>

<span class='kw'>def</span> <span class='id status'>status</span>
  <span class='id line'>line</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>STAT</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='const'>CRLF</span>
  <span class='id print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>put: STAT\n</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='ivar'>@debug_mode</span>
  <span class='ivar'>@sock</span><span class='period'>.</span><span class='id send'>send</span><span class='lparen'>(</span><span class='id line'>line</span><span class='comma'>,</span> <span class='const'>Socket</span><span class='op'>::</span><span class='const'>MSG_OOB</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id getresp'>getresp</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="storbinary-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>storbinary</strong>(cmd, file, blocksize, rest_offset = nil, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Puts the connection into binary (image) mode, issues the given server-side
command (such as "STOR myfile"), and sends the contents of the file named
<tt>file</tt> to the server. If the optional block is given, it also passes
it the data, in chunks of <tt>blocksize</tt> characters.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 496</span>

<span class='kw'>def</span> <span class='id storbinary'>storbinary</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='comma'>,</span> <span class='id file'>file</span><span class='comma'>,</span> <span class='id blocksize'>blocksize</span><span class='comma'>,</span> <span class='id rest_offset'>rest_offset</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span> <span class='comment'># :yield: data
</span>  <span class='kw'>if</span> <span class='id rest_offset'>rest_offset</span>
    <span class='id file'>file</span><span class='period'>.</span><span class='id seek'>seek</span><span class='lparen'>(</span><span class='id rest_offset'>rest_offset</span><span class='comma'>,</span> <span class='const'>IO</span><span class='op'>::</span><span class='const'>SEEK_SET</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id with_binary'>with_binary</span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id conn'>conn</span> <span class='op'>=</span> <span class='id transfercmd'>transfercmd</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='rparen'>)</span>
      <span class='id loop'>loop</span> <span class='kw'>do</span>
        <span class='id buf'>buf</span> <span class='op'>=</span> <span class='id file'>file</span><span class='period'>.</span><span class='id read'>read</span><span class='lparen'>(</span><span class='id blocksize'>blocksize</span><span class='rparen'>)</span>
        <span class='kw'>break</span> <span class='kw'>if</span> <span class='id buf'>buf</span> <span class='op'>==</span> <span class='kw'>nil</span>
        <span class='id conn'>conn</span><span class='period'>.</span><span class='id write'>write</span><span class='lparen'>(</span><span class='id buf'>buf</span><span class='rparen'>)</span>
        <span class='kw'>yield</span><span class='lparen'>(</span><span class='id buf'>buf</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id block'>block</span>
      <span class='kw'>end</span>
      <span class='id conn'>conn</span><span class='period'>.</span><span class='id close'>close</span>
      <span class='id voidresp'>voidresp</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>EPIPE</span>
  <span class='comment'># EPIPE, in this case, means that the data connection was unexpectedly
</span>  <span class='comment'># terminated.  Rather than just raising EPIPE to the caller, check the
</span>  <span class='comment'># response on the control connection.  If getresp doesn't raise a more
</span>  <span class='comment'># appropriate exception, re-raise the original exception.
</span>  <span class='id getresp'>getresp</span>
  <span class='id raise'>raise</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="storlines-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>storlines</strong>(cmd, file, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Puts the connection into ASCII (text) mode, issues the given server-side
command (such as "STOR myfile"), and sends the contents of the file named
<tt>file</tt> to the server, one line at a time. If the optional block is
given, it also passes it the lines.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 528</span>

<span class='kw'>def</span> <span class='id storlines'>storlines</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='comma'>,</span> <span class='id file'>file</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span> <span class='comment'># :yield: line
</span>  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id with_binary'>with_binary</span><span class='lparen'>(</span><span class='kw'>false</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id conn'>conn</span> <span class='op'>=</span> <span class='id transfercmd'>transfercmd</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='rparen'>)</span>
      <span class='id loop'>loop</span> <span class='kw'>do</span>
        <span class='id buf'>buf</span> <span class='op'>=</span> <span class='id file'>file</span><span class='period'>.</span><span class='id gets'>gets</span>
        <span class='kw'>break</span> <span class='kw'>if</span> <span class='id buf'>buf</span> <span class='op'>==</span> <span class='kw'>nil</span>
        <span class='kw'>if</span> <span class='id buf'>buf</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>2</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='const'>CRLF</span>
          <span class='id buf'>buf</span> <span class='op'>=</span> <span class='id buf'>buf</span><span class='period'>.</span><span class='id chomp'>chomp</span> <span class='op'>+</span> <span class='const'>CRLF</span>
        <span class='kw'>end</span>
        <span class='id conn'>conn</span><span class='period'>.</span><span class='id write'>write</span><span class='lparen'>(</span><span class='id buf'>buf</span><span class='rparen'>)</span>
        <span class='kw'>yield</span><span class='lparen'>(</span><span class='id buf'>buf</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id block'>block</span>
      <span class='kw'>end</span>
      <span class='id conn'>conn</span><span class='period'>.</span><span class='id close'>close</span>
      <span class='id voidresp'>voidresp</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>EPIPE</span>
  <span class='comment'># EPIPE, in this case, means that the data connection was unexpectedly
</span>  <span class='comment'># terminated.  Rather than just raising EPIPE to the caller, check the
</span>  <span class='comment'># response on the control connection.  If getresp doesn't raise a more
</span>  <span class='comment'># appropriate exception, re-raise the original exception.
</span>  <span class='id getresp'>getresp</span>
  <span class='id raise'>raise</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="system-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>system</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns system information.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


826
827
828
829
830
831
832</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 826</span>

<span class='kw'>def</span> <span class='id system'>system</span>
  <span class='id resp'>resp</span> <span class='op'>=</span> <span class='id sendcmd'>sendcmd</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SYST</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id resp'>resp</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>3</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>215</span><span class='tstring_end'>&quot;</span></span>
    <span class='id raise'>raise</span> <span class='const'>FTPReplyError</span><span class='comma'>,</span> <span class='id resp'>resp</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id resp'>resp</span><span class='lbracket'>[</span><span class='int'>4</span> <span class='op'>..</span> <span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="voidcmd-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>voidcmd</strong>(cmd) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a command and expect a response beginning with '2'.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


332
333
334
335
336
337</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/ftp.rb', line 332</span>

<span class='kw'>def</span> <span class='id voidcmd'>voidcmd</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='rparen'>)</span>
  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id putline'>putline</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='rparen'>)</span>
    <span class='id voidresp'>voidresp</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sat Sep  3 14:10:18 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.9.3).
</div>

  </body>
</html>