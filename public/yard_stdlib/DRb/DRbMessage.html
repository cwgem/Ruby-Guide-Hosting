<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: DRb::DRbMessage
  
    &mdash; Ruby 1.9 Ruby Standard Library
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (D)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../DRb.html" title="DRb (module)">DRb</a></span></span>
     &raquo; 
    <span class="title">DRbMessage</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: DRb::DRbMessage
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">DRb::DRbMessage</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/drb/drb.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Handler for sending and receiving drb messages.</p>

<p>This takes care of the low-level marshalling and unmarshalling of drb
requests and responses sent over the wire between server and client.  This
relieves the implementor of a new drb protocol layer with having to deal
with these details.</p>

<p>The user does not have to directly deal with this object in normal use.</p>


  </div>
</div>
<div class="tags">
  
</div>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#dump-instance_method" title="#dump (instance method)">- (Object) <strong>dump</strong>(obj, error = false) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (DRbMessage) <strong>initialize</strong>(config) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load-instance_method" title="#load (instance method)">- (Object) <strong>load</strong>(soc) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#make_proxy-instance_method" title="#make_proxy (instance method)">- (Object) <strong>make_proxy</strong>(obj, error = false) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#recv_reply-instance_method" title="#recv_reply (instance method)">- (Object) <strong>recv_reply</strong>(stream) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#recv_request-instance_method" title="#recv_request (instance method)">- (Object) <strong>recv_request</strong>(stream) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_reply-instance_method" title="#send_reply (instance method)">- (Object) <strong>send_reply</strong>(stream, succ, result) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_request-instance_method" title="#send_request (instance method)">- (Object) <strong>send_request</strong>(stream, ref, msg_id, arg, b) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="DRb::DRbMessage (class)">DRbMessage</a></span></tt>) <strong>initialize</strong>(config) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


549
550
551
552</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 549</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id config'>config</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='ivar'>@load_limit</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:load_limit</span><span class='rbracket'>]</span>
  <span class='ivar'>@argc_limit</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:argc_limit</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="dump-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>dump</strong>(obj, error = false) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


554
555
556
557
558
559
560
561
562</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 554</span>

<span class='kw'>def</span> <span class='id dump'>dump</span><span class='lparen'>(</span><span class='id obj'>obj</span><span class='comma'>,</span> <span class='id error'>error</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>  <span class='comment'># :nodoc:
</span>  <span class='id obj'>obj</span> <span class='op'>=</span> <span class='id make_proxy'>make_proxy</span><span class='lparen'>(</span><span class='id obj'>obj</span><span class='comma'>,</span> <span class='id error'>error</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id obj'>obj</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span> <span class='const'>DRbUndumped</span>
  <span class='kw'>begin</span>
    <span class='id str'>str</span> <span class='op'>=</span> <span class='const'>Marshal</span><span class='op'>::</span><span class='id dump'>dump</span><span class='lparen'>(</span><span class='id obj'>obj</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span>
    <span class='id str'>str</span> <span class='op'>=</span> <span class='const'>Marshal</span><span class='op'>::</span><span class='id dump'>dump</span><span class='lparen'>(</span><span class='id make_proxy'>make_proxy</span><span class='lparen'>(</span><span class='id obj'>obj</span><span class='comma'>,</span> <span class='id error'>error</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='lbracket'>[</span><span class='id str'>str</span><span class='period'>.</span><span class='id size'>size</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>N</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='id str'>str</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="load-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>load</strong>(soc) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="DRbConnError.html" title="DRb::DRbConnError (class)">DRbConnError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 564</span>

<span class='kw'>def</span> <span class='id load'>load</span><span class='lparen'>(</span><span class='id soc'>soc</span><span class='rparen'>)</span>  <span class='comment'># :nodoc:
</span>  <span class='kw'>begin</span>
    <span class='id sz'>sz</span> <span class='op'>=</span> <span class='id soc'>soc</span><span class='period'>.</span><span class='id read'>read</span><span class='lparen'>(</span><span class='int'>4</span><span class='rparen'>)</span>        <span class='comment'># sizeof (N)
</span>  <span class='kw'>rescue</span>
    <span class='id raise'>raise</span><span class='lparen'>(</span><span class='const'>DRbConnError</span><span class='comma'>,</span> <span class='gvar'>$!</span><span class='period'>.</span><span class='id message'>message</span><span class='comma'>,</span> <span class='gvar'>$!</span><span class='period'>.</span><span class='id backtrace'>backtrace</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id raise'>raise</span><span class='lparen'>(</span><span class='const'>DRbConnError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>connection closed</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id sz'>sz</span><span class='period'>.</span><span class='id nil?'>nil?</span>
  <span class='id raise'>raise</span><span class='lparen'>(</span><span class='const'>DRbConnError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>premature header</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id sz'>sz</span><span class='period'>.</span><span class='id size'>size</span> <span class='op'>&lt;</span> <span class='int'>4</span>
  <span class='id sz'>sz</span> <span class='op'>=</span> <span class='id sz'>sz</span><span class='period'>.</span><span class='id unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>N</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='id raise'>raise</span><span class='lparen'>(</span><span class='const'>DRbConnError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>too large packet </span><span class='embexpr_beg'>#{</span><span class='id sz'>sz</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@load_limit</span> <span class='op'>&lt;</span> <span class='id sz'>sz</span>
  <span class='kw'>begin</span>
    <span class='id str'>str</span> <span class='op'>=</span> <span class='id soc'>soc</span><span class='period'>.</span><span class='id read'>read</span><span class='lparen'>(</span><span class='id sz'>sz</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span>
    <span class='id raise'>raise</span><span class='lparen'>(</span><span class='const'>DRbConnError</span><span class='comma'>,</span> <span class='gvar'>$!</span><span class='period'>.</span><span class='id message'>message</span><span class='comma'>,</span> <span class='gvar'>$!</span><span class='period'>.</span><span class='id backtrace'>backtrace</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id raise'>raise</span><span class='lparen'>(</span><span class='const'>DRbConnError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>connection closed</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id str'>str</span><span class='period'>.</span><span class='id nil?'>nil?</span>
  <span class='id raise'>raise</span><span class='lparen'>(</span><span class='const'>DRbConnError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>premature marshal format(can\'t read)</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id str'>str</span><span class='period'>.</span><span class='id size'>size</span> <span class='op'>&lt;</span> <span class='id sz'>sz</span>
  <span class='const'>DRb</span><span class='period'>.</span><span class='id mutex'>mutex</span><span class='period'>.</span><span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='kw'>begin</span>
      <span class='id save'>save</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id current'>current</span><span class='lbracket'>[</span><span class='symbol'>:drb_untaint</span><span class='rbracket'>]</span>
      <span class='const'>Thread</span><span class='period'>.</span><span class='id current'>current</span><span class='lbracket'>[</span><span class='symbol'>:drb_untaint</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
      <span class='const'>Marshal</span><span class='op'>::</span><span class='id load'>load</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
    <span class='kw'>rescue</span> <span class='const'>NameError</span><span class='comma'>,</span> <span class='const'>ArgumentError</span>
      <span class='const'>DRbUnknown</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='gvar'>$!</span><span class='comma'>,</span> <span class='id str'>str</span><span class='rparen'>)</span>
    <span class='kw'>ensure</span>
      <span class='const'>Thread</span><span class='period'>.</span><span class='id current'>current</span><span class='lbracket'>[</span><span class='symbol'>:drb_untaint</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id x'>x</span><span class='op'>|</span>
        <span class='id x'>x</span><span class='period'>.</span><span class='id untaint'>untaint</span>
      <span class='kw'>end</span>
      <span class='const'>Thread</span><span class='period'>.</span><span class='id current'>current</span><span class='lbracket'>[</span><span class='symbol'>:drb_untaint</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id save'>save</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="make_proxy-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>make_proxy</strong>(obj, error = false) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


638
639
640
641
642
643
644</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 638</span>

<span class='kw'>def</span> <span class='id make_proxy'>make_proxy</span><span class='lparen'>(</span><span class='id obj'>obj</span><span class='comma'>,</span> <span class='id error'>error</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id error'>error</span>
    <span class='const'>DRbRemoteError</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id obj'>obj</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='const'>DRbObject</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id obj'>obj</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="recv_reply-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>recv_reply</strong>(stream) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


631
632
633
634
635</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 631</span>

<span class='kw'>def</span> <span class='id recv_reply'>recv_reply</span><span class='lparen'>(</span><span class='id stream'>stream</span><span class='rparen'>)</span>  <span class='comment'># :nodoc:
</span>  <span class='id succ'>succ</span> <span class='op'>=</span> <span class='id load'>load</span><span class='lparen'>(</span><span class='id stream'>stream</span><span class='rparen'>)</span>
  <span class='id result'>result</span> <span class='op'>=</span> <span class='id load'>load</span><span class='lparen'>(</span><span class='id stream'>stream</span><span class='rparen'>)</span>
  <span class='lbracket'>[</span><span class='id succ'>succ</span><span class='comma'>,</span> <span class='id result'>result</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="recv_request-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>recv_request</strong>(stream) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="DRbConnError.html" title="DRb::DRbConnError (class)">DRbConnError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


611
612
613
614
615
616
617
618
619
620
621
622
623</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 611</span>

<span class='kw'>def</span> <span class='id recv_request'>recv_request</span><span class='lparen'>(</span><span class='id stream'>stream</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='id ref'>ref</span> <span class='op'>=</span> <span class='id load'>load</span><span class='lparen'>(</span><span class='id stream'>stream</span><span class='rparen'>)</span>
  <span class='id ro'>ro</span> <span class='op'>=</span> <span class='const'>DRb</span><span class='period'>.</span><span class='id to_obj'>to_obj</span><span class='lparen'>(</span><span class='id ref'>ref</span><span class='rparen'>)</span>
  <span class='id msg'>msg</span> <span class='op'>=</span> <span class='id load'>load</span><span class='lparen'>(</span><span class='id stream'>stream</span><span class='rparen'>)</span>
  <span class='id argc'>argc</span> <span class='op'>=</span> <span class='id load'>load</span><span class='lparen'>(</span><span class='id stream'>stream</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span><span class='lparen'>(</span><span class='const'>DRbConnError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>too many arguments</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@argc_limit</span> <span class='op'>&lt;</span> <span class='id argc'>argc</span>
  <span class='id argv'>argv</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id argc'>argc</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id argc'>argc</span><span class='period'>.</span><span class='id times'>times</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id n'>n</span><span class='op'>|</span>
    <span class='id argv'>argv</span><span class='lbracket'>[</span><span class='id n'>n</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id load'>load</span><span class='lparen'>(</span><span class='id stream'>stream</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id block'>block</span> <span class='op'>=</span> <span class='id load'>load</span><span class='lparen'>(</span><span class='id stream'>stream</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id ro'>ro</span><span class='comma'>,</span> <span class='id msg'>msg</span><span class='comma'>,</span> <span class='id argv'>argv</span><span class='comma'>,</span> <span class='id block'>block</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_reply-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>send_reply</strong>(stream, succ, result) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


625
626
627
628
629</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 625</span>

<span class='kw'>def</span> <span class='id send_reply'>send_reply</span><span class='lparen'>(</span><span class='id stream'>stream</span><span class='comma'>,</span> <span class='id succ'>succ</span><span class='comma'>,</span> <span class='id result'>result</span><span class='rparen'>)</span>  <span class='comment'># :nodoc:
</span>  <span class='id stream'>stream</span><span class='period'>.</span><span class='id write'>write</span><span class='lparen'>(</span><span class='id dump'>dump</span><span class='lparen'>(</span><span class='id succ'>succ</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='id dump'>dump</span><span class='lparen'>(</span><span class='id result'>result</span><span class='comma'>,</span> <span class='op'>!</span><span class='id succ'>succ</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>rescue</span>
  <span class='id raise'>raise</span><span class='lparen'>(</span><span class='const'>DRbConnError</span><span class='comma'>,</span> <span class='gvar'>$!</span><span class='period'>.</span><span class='id message'>message</span><span class='comma'>,</span> <span class='gvar'>$!</span><span class='period'>.</span><span class='id backtrace'>backtrace</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_request-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>send_request</strong>(stream, ref, msg_id, arg, b) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


597
598
599
600
601
602
603
604
605
606
607
608
609</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 597</span>

<span class='kw'>def</span> <span class='id send_request'>send_request</span><span class='lparen'>(</span><span class='id stream'>stream</span><span class='comma'>,</span> <span class='id ref'>ref</span><span class='comma'>,</span> <span class='id msg_id'>msg_id</span><span class='comma'>,</span> <span class='id arg'>arg</span><span class='comma'>,</span> <span class='id b'>b</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='id ary'>ary</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id ary'>ary</span><span class='period'>.</span><span class='id push'>push</span><span class='lparen'>(</span><span class='id dump'>dump</span><span class='lparen'>(</span><span class='id ref'>ref</span><span class='period'>.</span><span class='id __drbref'>__drbref</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='id ary'>ary</span><span class='period'>.</span><span class='id push'>push</span><span class='lparen'>(</span><span class='id dump'>dump</span><span class='lparen'>(</span><span class='id msg_id'>msg_id</span><span class='period'>.</span><span class='id id2name'>id2name</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='id ary'>ary</span><span class='period'>.</span><span class='id push'>push</span><span class='lparen'>(</span><span class='id dump'>dump</span><span class='lparen'>(</span><span class='id arg'>arg</span><span class='period'>.</span><span class='id length'>length</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='id arg'>arg</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id e'>e</span><span class='op'>|</span>
    <span class='id ary'>ary</span><span class='period'>.</span><span class='id push'>push</span><span class='lparen'>(</span><span class='id dump'>dump</span><span class='lparen'>(</span><span class='id e'>e</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id ary'>ary</span><span class='period'>.</span><span class='id push'>push</span><span class='lparen'>(</span><span class='id dump'>dump</span><span class='lparen'>(</span><span class='id b'>b</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='id stream'>stream</span><span class='period'>.</span><span class='id write'>write</span><span class='lparen'>(</span><span class='id ary'>ary</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>rescue</span>
  <span class='id raise'>raise</span><span class='lparen'>(</span><span class='const'>DRbConnError</span><span class='comma'>,</span> <span class='gvar'>$!</span><span class='period'>.</span><span class='id message'>message</span><span class='comma'>,</span> <span class='gvar'>$!</span><span class='period'>.</span><span class='id backtrace'>backtrace</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sat Sep  3 14:10:15 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.9.3).
</div>

  </body>
</html>