<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Net::IMAP
  
    &mdash; Ruby 1.9 Ruby Standard Library
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (I)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../Net.html" title="Net (module)">Net</a></span></span>
     &raquo; 
    <span class="title">IMAP</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Net::IMAP
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Net::IMAP</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="../MonitorMixin.html" title="MonitorMixin (module)">MonitorMixin</a></span>, OpenSSL, SSL</dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/net/imap.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Net::IMAP implements Internet Message Access Protocol (IMAP) client
functionality.  The protocol is described in [IMAP].</p>

<h2>IMAP Overview</h2>

<p>An IMAP client connects to a server, and then authenticates itself using
either #authenticate() or #login().  Having authenticated itself, there is
a range of commands available to it.  Most work with mailboxes, which may
be arranged in an hierarchical namespace, and each of which contains zero
or more messages.  How this is implemented on the server is
implementation-dependent; on a UNIX server, it will frequently be
implemented as a files in mailbox format within a hierarchy of directories.</p>

<p>To work on the messages within a mailbox, the client must first select that
mailbox, using either #select() or (for read-only access) #examine().  Once
the client has successfully selected a mailbox, they enter
<em>selected</em> state, and that mailbox becomes the <em>current</em>
mailbox, on which mail-item related commands implicitly operate.</p>

<p>Messages have two sorts of identifiers: message sequence numbers, and UIDs.</p>

<p>Message sequence numbers number messages within a mail box from 1 up to the
number of items in the mail box.  If new message arrives during a session,
it receives a sequence number equal to the new size of the mail box.  If
messages are expunged from the mailbox, remaining messages have their
sequence numbers "shuffled down" to fill the gaps.</p>

<p>UIDs, on the other hand, are permanently guaranteed not to identify another
message within the same mailbox, even if the existing message is deleted. 
UIDs are required to be assigned in ascending (but not necessarily
sequential) order within a mailbox; this means that if a non-IMAP client
rearranges the order of mailitems within a mailbox, the UIDs have to be
reassigned.  An IMAP client cannot thus rearrange message orders.</p>

<h2>Examples of Usage</h2>

<h3>List sender and subject of all recent messages in the default mailbox</h3>

<pre class="code"><span class='id imap'>imap</span> <span class='op'>=</span> <span class='const'>Net</span><span class='op'>::</span><span class='const'>IMAP</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>mail.example.com</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='id imap'>imap</span><span class='period'>.</span><span class='id authenticate'>authenticate</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>LOGIN</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>joe_user</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>joes_password</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='id imap'>imap</span><span class='period'>.</span><span class='id examine'>examine</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>INBOX</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='id imap'>imap</span><span class='period'>.</span><span class='id search'>search</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RECENT</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id message_id'>message_id</span><span class='op'>|</span>
  <span class='id envelope'>envelope</span> <span class='op'>=</span> <span class='id imap'>imap</span><span class='period'>.</span><span class='id fetch'>fetch</span><span class='lparen'>(</span><span class='id message_id'>message_id</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ENVELOPE</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id attr'>attr</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ENVELOPE</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id envelope'>envelope</span><span class='period'>.</span><span class='id from'>from</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_content'>: \t</span><span class='embexpr_beg'>#{</span><span class='id envelope'>envelope</span><span class='period'>.</span><span class='id subject'>subject</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>

<h3>Move all messages from April 2003 from "Mail/sent-mail" to "Mail/sent-apr03"</h3>

<pre class="code"><span class='id imap'>imap</span> <span class='op'>=</span> <span class='const'>Net</span><span class='op'>::</span><span class='const'>IMAP</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>mail.example.com</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='id imap'>imap</span><span class='period'>.</span><span class='id authenticate'>authenticate</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>LOGIN</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>joe_user</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>joes_password</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='id imap'>imap</span><span class='period'>.</span><span class='id select'>select</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Mail/sent-mail</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>if</span> <span class='kw'>not</span> <span class='id imap'>imap</span><span class='period'>.</span><span class='id list'>list</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Mail/</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>sent-apr03</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='id imap'>imap</span><span class='period'>.</span><span class='id create'>create</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Mail/sent-apr03</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span>
<span class='id imap'>imap</span><span class='period'>.</span><span class='id search'>search</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BEFORE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>30-Apr-2003</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SINCE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1-Apr-2003</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id message_id'>message_id</span><span class='op'>|</span>
  <span class='id imap'>imap</span><span class='period'>.</span><span class='id copy'>copy</span><span class='lparen'>(</span><span class='id message_id'>message_id</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Mail/sent-apr03</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id imap'>imap</span><span class='period'>.</span><span class='id store'>store</span><span class='lparen'>(</span><span class='id message_id'>message_id</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>+FLAGS</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:Deleted</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span>
<span class='id imap'>imap</span><span class='period'>.</span><span class='id expunge'>expunge</span></pre>

<h2>Thread Safety</h2>

<p>Net::IMAP supports concurrent threads. For example,</p>

<pre class="code"><span class='id imap'>imap</span> <span class='op'>=</span> <span class='const'>Net</span><span class='op'>::</span><span class='const'>IMAP</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>imap.foo.net</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>imap2</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id imap'>imap</span><span class='period'>.</span><span class='id authenticate'>authenticate</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cram-md5</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>password</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id imap'>imap</span><span class='period'>.</span><span class='id select'>select</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>inbox</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id fetch_thread'>fetch_thread</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id start'>start</span> <span class='lbrace'>{</span> <span class='id imap'>imap</span><span class='period'>.</span><span class='id fetch'>fetch</span><span class='lparen'>(</span><span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UID</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='id search_result'>search_result</span> <span class='op'>=</span> <span class='id imap'>imap</span><span class='period'>.</span><span class='id search'>search</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BODY</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='id fetch_result'>fetch_result</span> <span class='op'>=</span> <span class='id fetch_thread'>fetch_thread</span><span class='period'>.</span><span class='id value'>value</span>
<span class='id imap'>imap</span><span class='period'>.</span><span class='id disconnect'>disconnect</span></pre>

<p>This script invokes the FETCH command and the SEARCH command concurrently.</p>

<h2>Errors</h2>

<p>An IMAP server can send three different types of responses to indicate
failure:</p>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>NO</p></td>
<td>
<p>the attempted command could not be successfully completed.  For instance,
the username/password used for logging in are incorrect; the selected
mailbox does not exists; etc.</p>
</td></tr><tr><td class="rdoc-term"><p>BAD</p></td>
<td>
<p>the request from the client does not follow the server's understanding of
the IMAP protocol.  This includes attempting commands from the wrong client
state; for instance, attempting to perform a SEARCH command without having
SELECTed a current mailbox.  It can also signal an internal server failure
(such as a disk crash) has occurred.</p>
</td></tr><tr><td class="rdoc-term"><p>BYE</p></td>
<td>
<p>the server is saying goodbye.  This can be part of a normal logout
sequence, and can be used as part of a login sequence to indicate that the
server is (for some reason) unwilling to accept our connection.  As a
response to any other command, it indicates either that the server is
shutting down, or that the server is timing out the client connection due
to inactivity.</p>
</td></tr></table>

<p>These three error response are represented by the errors
Net::IMAP::NoResponseError, Net::IMAP::BadResponseError, and
Net::IMAP::ByeResponseError, all of which are subclasses of
Net::IMAP::ResponseError.  Essentially, all methods that involve sending a
request to the server can generate one of these errors. Only the most
pertinent instances have been documented below.</p>

<p>Because the IMAP class uses Sockets for communication, its methods are also
susceptible to the various errors that can occur when working with sockets.
These are generally represented as Errno errors.  For instance, any method
that involves sending a request to the server and/or receiving a response
from it could raise an Errno::EPIPE error if the network connection
unexpectedly goes down.  See the socket(7), ip(7), tcp(7), socket(2),
connect(2), and associated man pages.</p>

<p>Finally, a Net::IMAP::DataFormatError is thrown if low-level data is found
to be in an incorrect format (for instance, when converting between UTF-8
and UTF-16), and Net::IMAP::ResponseParseError is thrown if a server
response is non-parseable.</p>

<h2>References</h2>
<dl class="rdoc-list"><dt>[IMAP]</dt>
<dd><ol style="display: upper-alpha"><li>
<p>Crispin, "INTERNET MESSAGE ACCESS PROTOCOL - VERSION 4rev1",</p>
</li></ol>

<p>RFC 2060, December 1996.  (Note: since obsoleted by RFC 3501)</p>
</dd><dt>[LANGUAGE-TAGS]</dt>
<dd>
<p>Alvestrand, H., "Tags for the Identification of Languages", RFC 1766, March
1995.</p>
</dd><dt>[MD5]</dt>
<dd>
<p>Myers, J., and M. Rose, "The Content-MD5 Header Field", RFC 1864, October
1995.</p>
</dd><dt>[MIME-IMB]</dt>
<dd>
<p>Freed, N., and N. Borenstein, "MIME (Multipurpose Internet Mail Extensions)
Part One: Format of Internet Message Bodies", RFC 2045, November 1996.</p>
</dd><dt>[RFC-822]</dt>
<dd>
<p>Crocker, D., "Standard for the Format of ARPA Internet Text Messages", STD
11, RFC 822, University of Delaware, August 1982.</p>
</dd><dt>[RFC-2087]</dt>
<dd>
<p>Myers, J., "IMAP4 QUOTA extension", RFC 2087, January 1997.</p>
</dd><dt>[RFC-2086]</dt>
<dd>
<p>Myers, J., "IMAP4 ACL extension", RFC 2086, January 1997.</p>
</dd><dt>[RFC-2195]</dt>
<dd>
<p>Klensin, J., Catoe, R., and Krumviede, P., "IMAP/POP AUTHorize Extension
for Simple Challenge/Response", RFC 2195, September 1997.</p>
</dd><dt>[SORT-THREAD-EXT]</dt>
<dd>
<p>Crispin, M., "INTERNET MESSAGE ACCESS PROTOCOL - SORT and THREAD
Extensions", draft-ietf-imapext-sort, May 2003.</p>
</dd><dt>[OSSL]</dt>
<dd>
<p><a href="http://www.openssl.org">www.openssl.org</a></p>
</dd><dt>[RSSL]</dt>
<dd>
<p><a
href="http://savannah.gnu.org/projects/rubypki">savannah.gnu.org/projects/rubypki</a></p>
</dd><dt>[UTF7]</dt>
<dd>
<p>Goldsmith, D. and Davis, M., "UTF-7: A Mail-Safe Transformation Format of
Unicode", RFC 2152, May 1997.</p>
</dd></dl>


  </div>
</div>
<div class="tags">
  
</div><h2>Defined Under Namespace</h2>
<p class="children">
   
    
   
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="IMAP/Address.html" title="Net::IMAP::Address (class)">Address</a></span>, <span class='object_link'><a href="IMAP/Atom.html" title="Net::IMAP::Atom (class)">Atom</a></span>, <span class='object_link'><a href="IMAP/BadResponseError.html" title="Net::IMAP::BadResponseError (class)">BadResponseError</a></span>, <span class='object_link'><a href="IMAP/BodyTypeBasic.html" title="Net::IMAP::BodyTypeBasic (class)">BodyTypeBasic</a></span>, <span class='object_link'><a href="IMAP/BodyTypeMessage.html" title="Net::IMAP::BodyTypeMessage (class)">BodyTypeMessage</a></span>, <span class='object_link'><a href="IMAP/BodyTypeMultipart.html" title="Net::IMAP::BodyTypeMultipart (class)">BodyTypeMultipart</a></span>, <span class='object_link'><a href="IMAP/BodyTypeText.html" title="Net::IMAP::BodyTypeText (class)">BodyTypeText</a></span>, <span class='object_link'><a href="IMAP/ByeResponseError.html" title="Net::IMAP::ByeResponseError (class)">ByeResponseError</a></span>, <span class='object_link'><a href="IMAP/ContentDisposition.html" title="Net::IMAP::ContentDisposition (class)">ContentDisposition</a></span>, <span class='object_link'><a href="IMAP/ContinuationRequest.html" title="Net::IMAP::ContinuationRequest (class)">ContinuationRequest</a></span>, <span class='object_link'><a href="IMAP/CramMD5Authenticator.html" title="Net::IMAP::CramMD5Authenticator (class)">CramMD5Authenticator</a></span>, <span class='object_link'><a href="IMAP/DataFormatError.html" title="Net::IMAP::DataFormatError (class)">DataFormatError</a></span>, <span class='object_link'><a href="IMAP/DigestMD5Authenticator.html" title="Net::IMAP::DigestMD5Authenticator (class)">DigestMD5Authenticator</a></span>, <span class='object_link'><a href="IMAP/Envelope.html" title="Net::IMAP::Envelope (class)">Envelope</a></span>, <span class='object_link'><a href="IMAP/Error.html" title="Net::IMAP::Error (class)">Error</a></span>, <span class='object_link'><a href="IMAP/FetchData.html" title="Net::IMAP::FetchData (class)">FetchData</a></span>, <span class='object_link'><a href="IMAP/FlagCountError.html" title="Net::IMAP::FlagCountError (class)">FlagCountError</a></span>, <span class='object_link'><a href="IMAP/Literal.html" title="Net::IMAP::Literal (class)">Literal</a></span>, <span class='object_link'><a href="IMAP/LoginAuthenticator.html" title="Net::IMAP::LoginAuthenticator (class)">LoginAuthenticator</a></span>, <span class='object_link'><a href="IMAP/MailboxACLItem.html" title="Net::IMAP::MailboxACLItem (class)">MailboxACLItem</a></span>, <span class='object_link'><a href="IMAP/MailboxList.html" title="Net::IMAP::MailboxList (class)">MailboxList</a></span>, <span class='object_link'><a href="IMAP/MailboxQuota.html" title="Net::IMAP::MailboxQuota (class)">MailboxQuota</a></span>, <span class='object_link'><a href="IMAP/MailboxQuotaRoot.html" title="Net::IMAP::MailboxQuotaRoot (class)">MailboxQuotaRoot</a></span>, <span class='object_link'><a href="IMAP/MessageSet.html" title="Net::IMAP::MessageSet (class)">MessageSet</a></span>, <span class='object_link'><a href="IMAP/NoResponseError.html" title="Net::IMAP::NoResponseError (class)">NoResponseError</a></span>, <span class='object_link'><a href="IMAP/PlainAuthenticator.html" title="Net::IMAP::PlainAuthenticator (class)">PlainAuthenticator</a></span>, <span class='object_link'><a href="IMAP/QuotedString.html" title="Net::IMAP::QuotedString (class)">QuotedString</a></span>, <span class='object_link'><a href="IMAP/RawData.html" title="Net::IMAP::RawData (class)">RawData</a></span>, <span class='object_link'><a href="IMAP/ResponseCode.html" title="Net::IMAP::ResponseCode (class)">ResponseCode</a></span>, <span class='object_link'><a href="IMAP/ResponseError.html" title="Net::IMAP::ResponseError (class)">ResponseError</a></span>, <span class='object_link'><a href="IMAP/ResponseParseError.html" title="Net::IMAP::ResponseParseError (class)">ResponseParseError</a></span>, <span class='object_link'><a href="IMAP/ResponseParser.html" title="Net::IMAP::ResponseParser (class)">ResponseParser</a></span>, <span class='object_link'><a href="IMAP/ResponseText.html" title="Net::IMAP::ResponseText (class)">ResponseText</a></span>, <span class='object_link'><a href="IMAP/StatusData.html" title="Net::IMAP::StatusData (class)">StatusData</a></span>, <span class='object_link'><a href="IMAP/TaggedResponse.html" title="Net::IMAP::TaggedResponse (class)">TaggedResponse</a></span>, <span class='object_link'><a href="IMAP/ThreadMember.html" title="Net::IMAP::ThreadMember (class)">ThreadMember</a></span>, <span class='object_link'><a href="IMAP/UntaggedResponse.html" title="Net::IMAP::UntaggedResponse (class)">UntaggedResponse</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="SEEN-constant" class="">SEEN =
          <div class="docstring">
  <div class="discussion">
    
<p>Flag indicating a message has been seen</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='symbol'>:Seen</span></pre></dd>
      
        <dt id="ANSWERED-constant" class="">ANSWERED =
          <div class="docstring">
  <div class="discussion">
    
<p>Flag indicating a message has been answered</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='symbol'>:Answered</span></pre></dd>
      
        <dt id="FLAGGED-constant" class="">FLAGGED =
          <div class="docstring">
  <div class="discussion">
    
<p>Flag indicating a message has been flagged for special or urgent attention</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='symbol'>:Flagged</span></pre></dd>
      
        <dt id="DELETED-constant" class="">DELETED =
          <div class="docstring">
  <div class="discussion">
    
<p>Flag indicating a message has been marked for deletion.  This will occur
when the mailbox is closed or expunged.</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='symbol'>:Deleted</span></pre></dd>
      
        <dt id="DRAFT-constant" class="">DRAFT =
          <div class="docstring">
  <div class="discussion">
    
<p>Flag indicating a message is only a draft or work-in-progress version.</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='symbol'>:Draft</span></pre></dd>
      
        <dt id="RECENT-constant" class="">RECENT =
          <div class="docstring">
  <div class="discussion">
    
<p>Flag indicating that the message is "recent", meaning that this session is
the first session in which the client has been notified of this message.</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='symbol'>:Recent</span></pre></dd>
      
        <dt id="NOINFERIORS-constant" class="">NOINFERIORS =
          <div class="docstring">
  <div class="discussion">
    
<p>Flag indicating that a mailbox context name cannot contain children.</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='symbol'>:Noinferiors</span></pre></dd>
      
        <dt id="NOSELECT-constant" class="">NOSELECT =
          <div class="docstring">
  <div class="discussion">
    
<p>Flag indicating that a mailbox is not selected.</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='symbol'>:Noselect</span></pre></dd>
      
        <dt id="MARKED-constant" class="">MARKED =
          <div class="docstring">
  <div class="discussion">
    
<p>Flag indicating that a mailbox has been marked "interesting" by the server;
this commonly indicates that the mailbox contains new messages.</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='symbol'>:Marked</span></pre></dd>
      
        <dt id="UNMARKED-constant" class="">UNMARKED =
          <div class="docstring">
  <div class="discussion">
    
<p>Flag indicating that the mailbox does not contains new messages.</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='symbol'>:Unmarked</span></pre></dd>
      
        <dt id="CRLF-constant" class="">CRLF =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\r\n</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="PORT-constant" class="">PORT =
          <div class="docstring">
  <div class="discussion">
    
<p>:nodoc: :nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='int'>143</span></pre></dd>
      
        <dt id="SSL_PORT-constant" class="">SSL_PORT =
          <div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='int'>993</span></pre></dd>
      
        <dt id="DATE_MONTH-constant" class="">DATE_MONTH =
          
        </dt>
        <dd><pre class="code">[name].push(data)
end

def send_command(cmd, *args, &amp;block)
  synchronize do
    args.each do |i|
      validate_data(i)
    end
    tag = generate_tag
    put_string(tag + &quot; &quot; + cmd)
    args.each do |i|
      put_string(&quot; &quot;)
      send_data(i)
    end
    put_string(CRLF)
    if cmd == &quot;LOGOUT&quot;
      @logout_command_tag = tag
    end
    if block
      add_response_handler(block)
    end
    begin
      return get_tagged_response(tag, cmd)
    ensure
      if block
        remove_response_handler(block)
      end
    end
  end
end

def generate_tag
  @tagno += 1
  return format(&quot;%s%04d&quot;, @tag_prefix, @tagno)
end

def put_string(str)
  @sock.print(str)
  if @@debug
    if @debug_output_bol
      $stderr.print(&quot;C: &quot;)
    end
    $stderr.print(str.gsub(/\n(?!\z)/n, &quot;\nC: &quot;))
    if /\r\n\z/n.match(str)
      @debug_output_bol = true
    else
      @debug_output_bol = false
    end
  end
end

def validate_data(data)
  case data
  when nil
  when String
  when Integer
    if data &lt; 0 || data &gt;= 4294967296
      raise DataFormatError, num.to_s
    end
  when Array
    data.each do |i|
      validate_data(i)
    end
  when Time
  when Symbol
  else
    data.validate
  end
end

def send_data(data)
  case data
  when nil
    put_string(&quot;NIL&quot;)
  when String
    send_string_data(data)
  when Integer
    send_number_data(data)
  when Array
    send_list_data(data)
  when Time
    send_time_data(data)
  when Symbol
    send_symbol_data(data)
  else
    data.send_data(self)
  end
end

def send_string_data(str)
  case str
  when &quot;&quot;
    put_string('&quot;&quot;')
  when /[\x80-\xff\r\n]/n
    # literal
    send_literal(str)
  when /[(){ \x00-\x1f\x7f%*&quot;\\]/n
    # quoted string
    send_quoted_string(str)
  else
    put_string(str)
  end
end

def send_quoted_string(str)
  put_string('&quot;' + str.gsub(/[&quot;\\]/n, &quot;\\\\\\&amp;&quot;) + '&quot;')
end

def send_literal(str)
  put_string(&quot;{&quot; + str.bytesize.to_s + &quot;}&quot; + CRLF)
  @continuation_request_arrival.wait
  raise @exception if @exception
  put_string(str)
end

def send_number_data(num)
  put_string(num.to_s)
end

def send_list_data(list)
  put_string(&quot;(&quot;)
  first = true
  list.each do |i|
    if first
      first = false
    else
      put_string(&quot; &quot;)
    end
    send_data(i)
  end
  put_string(&quot;)&quot;)
end

DATE_MONTH = %w(Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec)</pre></dd>
      
        <dt id="debug-classvariable" class="">@@debug =
          
        </dt>
        <dd><pre class="code"><span class='kw'>false</span></pre></dd>
      
        <dt id="authenticators-classvariable" class="">@@authenticators =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span><span class='rbrace'>}</span></pre></dd>
      
        <dt id="max_flag_count-classvariable" class="">@@max_flag_count =
          
        </dt>
        <dd><pre class="code"><span class='int'>10000</span></pre></dd>
      
    </dl>
  


  
  
  
  
  
  
  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#client_thread-instance_method" title="#client_thread (instance method)">- (Object) <strong>client_thread</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The thread to receive exceptions.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#greeting-instance_method" title="#greeting (instance method)">- (Object) <strong>greeting</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns an initial greeting response from the server.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#response_handlers-instance_method" title="#response_handlers (instance method)">- (Object) <strong>response_handlers</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns all response handlers.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#responses-instance_method" title="#responses (instance method)">- (Object) <strong>responses</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns recorded untagged responses.</p>
</div></span>
  
</li>

    
  </ul>



  
  
  
  
  

  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_authenticator-class_method" title="add_authenticator (class method)">+ (Object) <strong>add_authenticator</strong>(auth_type, authenticator) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Adds an authenticator for Net::IMAP#authenticate.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#debug-class_method" title="debug (class method)">+ (Object) <strong>debug</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the debug mode.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#debug%3D-class_method" title="debug= (class method)">+ (Object) <strong>debug=</strong>(val) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the debug mode.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#decode_utf7-class_method" title="decode_utf7 (class method)">+ (Object) <strong>decode_utf7</strong>(s) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Decode a string from modified UTF-7 format to UTF-8.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#encode_utf7-class_method" title="encode_utf7 (class method)">+ (Object) <strong>encode_utf7</strong>(s) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Encode a string from UTF-8 format to modified UTF-7.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#format_date-class_method" title="format_date (class method)">+ (Object) <strong>format_date</strong>(time) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Formats <tt>time</tt> as an IMAP-style date.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#format_datetime-class_method" title="format_datetime (class method)">+ (Object) <strong>format_datetime</strong>(time) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Formats <tt>time</tt> as an IMAP-style date-time.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#max_flag_count-class_method" title="max_flag_count (class method)">+ (Object) <strong>max_flag_count</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the max number of flags interned to symbols.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#max_flag_count%3D-class_method" title="max_flag_count= (class method)">+ (Object) <strong>max_flag_count=</strong>(count) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the max number of flags interned to symbols.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_response_handler-instance_method" title="#add_response_handler (instance method)">- (Object) <strong>add_response_handler</strong>(handler = Proc.new) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Adds a response handler.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#append-instance_method" title="#append (instance method)">- (Object) <strong>append</strong>(mailbox, message, flags = nil, date_time = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a APPEND command to append the <tt>message</tt> to the end of the
<tt>mailbox</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#authenticate-instance_method" title="#authenticate (instance method)">- (Object) <strong>authenticate</strong>(auth_type, *args) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends an AUTHENTICATE command to authenticate the client.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#capability-instance_method" title="#capability (instance method)">- (Object) <strong>capability</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a CAPABILITY command, and returns an array of capabilities that the
server supports.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check-instance_method" title="#check (instance method)">- (Object) <strong>check</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a CHECK command to request a checkpoint of the currently selected
mailbox.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#close-instance_method" title="#close (instance method)">- (Object) <strong>close</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a CLOSE command to close the currently selected mailbox.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#copy-instance_method" title="#copy (instance method)">- (Object) <strong>copy</strong>(set, mailbox) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a COPY command to copy the specified message(s) to the end of the
specified destination <tt>mailbox</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#copy_internal-instance_method" title="#copy_internal (instance method)">- (Object) <strong>copy_internal</strong>(cmd, set, mailbox) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create-instance_method" title="#create (instance method)">- (Object) <strong>create</strong>(mailbox) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a CREATE command to create a new <tt>mailbox</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_ssl_params-instance_method" title="#create_ssl_params (instance method)">- (Object) <strong>create_ssl_params</strong>(certs = nil, verify = true) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete-instance_method" title="#delete (instance method)">- (Object) <strong>delete</strong>(mailbox) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a DELETE command to remove the <tt>mailbox</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#disconnect-instance_method" title="#disconnect (instance method)">- (Object) <strong>disconnect</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Disconnects from the server.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#disconnected%3F-instance_method" title="#disconnected? (instance method)">- (Boolean) <strong>disconnected?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if disconnected from the server.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#examine-instance_method" title="#examine (instance method)">- (Object) <strong>examine</strong>(mailbox) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a EXAMINE command to select a <tt>mailbox</tt> so that messages in
the <tt>mailbox</tt> can be accessed.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#expunge-instance_method" title="#expunge (instance method)">- (Object) <strong>expunge</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a EXPUNGE command to permanently remove from the currently selected
mailbox all messages that have the Deleted flag set.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fetch-instance_method" title="#fetch (instance method)">- (Object) <strong>fetch</strong>(set, attr) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a FETCH command to retrieve data associated with a message in the
mailbox.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fetch_internal-instance_method" title="#fetch_internal (instance method)">- (Object) <strong>fetch_internal</strong>(cmd, set, attr) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#generate_tag-instance_method" title="#generate_tag (instance method)">- (Object) <strong>generate_tag</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_response-instance_method" title="#get_response (instance method)">- (Object) <strong>get_response</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_tagged_response-instance_method" title="#get_tagged_response (instance method)">- (Object) <strong>get_tagged_response</strong>(tag, cmd) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getacl-instance_method" title="#getacl (instance method)">- (Object) <strong>getacl</strong>(mailbox) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Send the GETACL command along with specified <tt>mailbox</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getquota-instance_method" title="#getquota (instance method)">- (Object) <strong>getquota</strong>(mailbox) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends the GETQUOTA command along with specified <tt>mailbox</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getquotaroot-instance_method" title="#getquotaroot (instance method)">- (Object) <strong>getquotaroot</strong>(mailbox) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends the GETQUOTAROOT command along with specified <tt>mailbox</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#idle-instance_method" title="#idle (instance method)">- (Object) <strong>idle</strong>(&amp;response_handler) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends an IDLE command that waits for notifications of new or expunged
messages.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#idle_done-instance_method" title="#idle_done (instance method)">- (Object) <strong>idle_done</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Leaves IDLE.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (IMAP) <strong>initialize</strong>(host, port_or_options = {}, usessl = false, certs = nil, verify = true) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>call-seq:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#list-instance_method" title="#list (instance method)">- (Object) <strong>list</strong>(refname, mailbox) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a LIST command, and returns a subset of names from the complete set
of all names available to the client.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#login-instance_method" title="#login (instance method)">- (Object) <strong>login</strong>(user, password) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a LOGIN command to identify the client and carries the plaintext
<tt>password</tt> authenticating this <tt>user</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#logout-instance_method" title="#logout (instance method)">- (Object) <strong>logout</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a LOGOUT command to inform the server that the client is done with
the connection.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#lsub-instance_method" title="#lsub (instance method)">- (Object) <strong>lsub</strong>(refname, mailbox) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a LSUB command, and returns a subset of names from the set of names
that the user has declared as being "active" or "subscribed".</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#noop-instance_method" title="#noop (instance method)">- (Object) <strong>noop</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a NOOP command to the server.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#normalize_searching_criteria-instance_method" title="#normalize_searching_criteria (instance method)">- (Object) <strong>normalize_searching_criteria</strong>(keys) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#put_string-instance_method" title="#put_string (instance method)">- (Object) <strong>put_string</strong>(str) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#receive_responses-instance_method" title="#receive_responses (instance method)">- (Object) <strong>receive_responses</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#record_response-instance_method" title="#record_response (instance method)">- (Object) <strong>record_response</strong>(name, data) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_response_handler-instance_method" title="#remove_response_handler (instance method)">- (Object) <strong>remove_response_handler</strong>(handler) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Removes the response handler.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rename-instance_method" title="#rename (instance method)">- (Object) <strong>rename</strong>(mailbox, newname) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a RENAME command to change the name of the <tt>mailbox</tt> to
<tt>newname</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#search-instance_method" title="#search (instance method)">- (Object) <strong>search</strong>(keys, charset = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a SEARCH command to search the mailbox for messages that match the
given searching criteria, and returns message sequence numbers.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#search_internal-instance_method" title="#search_internal (instance method)">- (Object) <strong>search_internal</strong>(cmd, keys, charset) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#select-instance_method" title="#select (instance method)">- (Object) <strong>select</strong>(mailbox) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a SELECT command to select a <tt>mailbox</tt> so that messages in the
<tt>mailbox</tt> can be accessed.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_command-instance_method" title="#send_command (instance method)">- (Object) <strong>send_command</strong>(cmd, *args, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_data-instance_method" title="#send_data (instance method)">- (Object) <strong>send_data</strong>(data) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_list_data-instance_method" title="#send_list_data (instance method)">- (Object) <strong>send_list_data</strong>(list) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_literal-instance_method" title="#send_literal (instance method)">- (Object) <strong>send_literal</strong>(str) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_number_data-instance_method" title="#send_number_data (instance method)">- (Object) <strong>send_number_data</strong>(num) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_quoted_string-instance_method" title="#send_quoted_string (instance method)">- (Object) <strong>send_quoted_string</strong>(str) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_string_data-instance_method" title="#send_string_data (instance method)">- (Object) <strong>send_string_data</strong>(str) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_symbol_data-instance_method" title="#send_symbol_data (instance method)">- (Object) <strong>send_symbol_data</strong>(symbol) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_time_data-instance_method" title="#send_time_data (instance method)">- (Object) <strong>send_time_data</strong>(time) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#setacl-instance_method" title="#setacl (instance method)">- (Object) <strong>setacl</strong>(mailbox, user, rights) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends the SETACL command along with <tt>mailbox</tt>, <tt>user</tt> and the
<tt>rights</tt> that user is to have on that mailbox.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#setquota-instance_method" title="#setquota (instance method)">- (Object) <strong>setquota</strong>(mailbox, quota) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a SETQUOTA command along with the specified <tt>mailbox</tt> and
<tt>quota</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sort-instance_method" title="#sort (instance method)">- (Object) <strong>sort</strong>(sort_keys, search_keys, charset) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a SORT command to sort messages in the mailbox.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sort_internal-instance_method" title="#sort_internal (instance method)">- (Object) <strong>sort_internal</strong>(cmd, sort_keys, search_keys, charset) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start_tls_session-instance_method" title="#start_tls_session (instance method)">- (Object) <strong>start_tls_session</strong>(params = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#starttls-instance_method" title="#starttls (instance method)">- (Object) <strong>starttls</strong>(options = {}, verify = true) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a STARTTLS command to start TLS session.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#status-instance_method" title="#status (instance method)">- (Object) <strong>status</strong>(mailbox, attr) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a STATUS command, and returns the status of the indicated
<tt>mailbox</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#store-instance_method" title="#store (instance method)">- (Object) <strong>store</strong>(set, attr, flags) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a STORE command to alter data associated with messages in the
mailbox, in particular their flags.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#store_internal-instance_method" title="#store_internal (instance method)">- (Object) <strong>store_internal</strong>(cmd, set, attr, flags) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#subscribe-instance_method" title="#subscribe (instance method)">- (Object) <strong>subscribe</strong>(mailbox) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a SUBSCRIBE command to add the specified <tt>mailbox</tt> name to the
server's set of "active" or "subscribed" mailboxes as returned by #lsub().</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#thread-instance_method" title="#thread (instance method)">- (Object) <strong>thread</strong>(algorithm, search_keys, charset) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>As for #search(), but returns message sequence numbers in threaded format,
as a Net::IMAP::ThreadMember tree.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#thread_internal-instance_method" title="#thread_internal (instance method)">- (Object) <strong>thread_internal</strong>(cmd, algorithm, search_keys, charset) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#uid_copy-instance_method" title="#uid_copy (instance method)">- (Object) <strong>uid_copy</strong>(set, mailbox) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>As for #copy(), but <tt>set</tt> contains unique identifiers.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#uid_fetch-instance_method" title="#uid_fetch (instance method)">- (Object) <strong>uid_fetch</strong>(set, attr) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>As for #fetch(), but <tt>set</tt> contains unique identifiers.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#uid_search-instance_method" title="#uid_search (instance method)">- (Object) <strong>uid_search</strong>(keys, charset = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>As for #search(), but returns unique identifiers.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#uid_sort-instance_method" title="#uid_sort (instance method)">- (Object) <strong>uid_sort</strong>(sort_keys, search_keys, charset) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>As for #sort(), but returns an array of unique identifiers.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#uid_store-instance_method" title="#uid_store (instance method)">- (Object) <strong>uid_store</strong>(set, attr, flags) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>As for #store(), but <tt>set</tt> contains unique identifiers.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#uid_thread-instance_method" title="#uid_thread (instance method)">- (Object) <strong>uid_thread</strong>(algorithm, search_keys, charset) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>As for #thread(), but returns unique identifiers instead of message
sequence numbers.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unsubscribe-instance_method" title="#unsubscribe (instance method)">- (Object) <strong>unsubscribe</strong>(mailbox) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a UNSUBSCRIBE command to remove the specified <tt>mailbox</tt> name
from the server's set of "active" or "subscribed" mailboxes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#validate_data-instance_method" title="#validate_data (instance method)">- (Object) <strong>validate_data</strong>(data) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#xlist-instance_method" title="#xlist (instance method)">- (Object) <strong>xlist</strong>(refname, mailbox) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends a XLIST command, and returns a subset of names from the complete set
of all names available to the client.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../MonitorMixin.html" title="MonitorMixin (module)">MonitorMixin</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../MonitorMixin.html#extend_object-class_method" title="MonitorMixin.extend_object (method)">extend_object</a></span>, <span class='object_link'><a href="../MonitorMixin.html#mon_check_owner-instance_method" title="MonitorMixin#mon_check_owner (method)">#mon_check_owner</a></span>, <span class='object_link'><a href="../MonitorMixin.html#mon_enter-instance_method" title="MonitorMixin#mon_enter (method)">#mon_enter</a></span>, <span class='object_link'><a href="../MonitorMixin.html#mon_enter_for_cond-instance_method" title="MonitorMixin#mon_enter_for_cond (method)">#mon_enter_for_cond</a></span>, <span class='object_link'><a href="../MonitorMixin.html#mon_exit-instance_method" title="MonitorMixin#mon_exit (method)">#mon_exit</a></span>, <span class='object_link'><a href="../MonitorMixin.html#mon_exit_for_cond-instance_method" title="MonitorMixin#mon_exit_for_cond (method)">#mon_exit_for_cond</a></span>, <span class='object_link'><a href="../MonitorMixin.html#mon_initialize-instance_method" title="MonitorMixin#mon_initialize (method)">#mon_initialize</a></span>, <span class='object_link'><a href="../MonitorMixin.html#mon_synchronize-instance_method" title="MonitorMixin#mon_synchronize (method)">#mon_synchronize</a></span>, <span class='object_link'><a href="../MonitorMixin.html#mon_try_enter-instance_method" title="MonitorMixin#mon_try_enter (method)">#mon_try_enter</a></span>, <span class='object_link'><a href="../MonitorMixin.html#new_cond-instance_method" title="MonitorMixin#new_cond (method)">#new_cond</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Net::IMAP (class)">IMAP</a></span></tt>) <strong>initialize</strong>(host, port_or_options = {}, usessl = false, certs = nil, verify = true) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>call-seq:</p>

<pre class="code"><span class='const'>Net</span><span class='op'>::</span><span class='const'>IMAP</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id host'>host</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span></pre>

<p>Creates a new Net::IMAP object and connects it to the specified
<tt>host</tt>.</p>

<p><tt>options</tt> is an option hash, each key of which is a symbol.</p>

<p>The available options are:</p>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>port</p></td>
<td>
<p>port number (default value is 143 for imap, or 993 for imaps)</p>
</td></tr><tr><td class="rdoc-term"><p>ssl</p></td>
<td>
<p>if options[:ssl] is true, then an attempt will be made to use SSL (now TLS)
to connect to the server.  For this to work OpenSSL [OSSL] and the Ruby
OpenSSL [RSSL] extensions need to be installed. if options[:ssl] is a hash,
it's passed to OpenSSL::SSL::SSLContext#set_params as parameters.</p>
</td></tr></table>

<p>The most common errors are:</p>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>Errno::ECONNREFUSED</p></td>
<td>
<p>connection refused by <tt>host</tt> or an intervening firewall.</p>
</td></tr><tr><td class="rdoc-term"><p>Errno::ETIMEDOUT</p></td>
<td>
<p>connection timed out (possibly due to packets being dropped by an
intervening firewall).</p>
</td></tr><tr><td class="rdoc-term"><p>Errno::ENETUNREACH</p></td>
<td>
<p>there is no route to that network.</p>
</td></tr><tr><td class="rdoc-term"><p>SocketError</p></td>
<td>
<p>hostname not known or other socket error.</p>
</td></tr><tr><td class="rdoc-term"><p>Net::IMAP::ByeResponseError</p></td>
<td>
<p>we connected to the host, but they immediately said goodbye to us.</p>
</td></tr></table>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1011
1012
1013
1014
1015
1016
1017
1018
1019
1020
1021
1022
1023
1024
1025
1026
1027
1028
1029
1030
1031
1032
1033
1034
1035
1036
1037
1038
1039
1040
1041
1042
1043
1044
1045
1046
1047
1048
1049
1050
1051
1052
1053
1054
1055
1056
1057
1058
1059</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1011</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id host'>host</span><span class='comma'>,</span> <span class='id port_or_options'>port_or_options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span>
               <span class='id usessl'>usessl</span> <span class='op'>=</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='id certs'>certs</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id verify'>verify</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='ivar'>@host</span> <span class='op'>=</span> <span class='id host'>host</span>
  <span class='kw'>begin</span>
    <span class='id options'>options</span> <span class='op'>=</span> <span class='id port_or_options'>port_or_options</span><span class='period'>.</span><span class='id to_hash'>to_hash</span>
  <span class='kw'>rescue</span> <span class='const'>NoMethodError</span>
    <span class='comment'># for backward compatibility
</span>    <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:port</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id port_or_options'>port_or_options</span>
    <span class='kw'>if</span> <span class='id usessl'>usessl</span>
      <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:ssl</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id create_ssl_params'>create_ssl_params</span><span class='lparen'>(</span><span class='id certs'>certs</span><span class='comma'>,</span> <span class='id verify'>verify</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='ivar'>@port</span> <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:port</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:ssl</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='const'>SSL_PORT</span> <span class='op'>:</span> <span class='const'>PORT</span><span class='rparen'>)</span>
  <span class='ivar'>@tag_prefix</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RUBY</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@tagno</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@parser</span> <span class='op'>=</span> <span class='const'>ResponseParser</span><span class='period'>.</span><span class='id new'>new</span>
  <span class='ivar'>@sock</span> <span class='op'>=</span> <span class='const'>TCPSocket</span><span class='period'>.</span><span class='id open'>open</span><span class='lparen'>(</span><span class='ivar'>@host</span><span class='comma'>,</span> <span class='ivar'>@port</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:ssl</span><span class='rbracket'>]</span>
    <span class='id start_tls_session'>start_tls_session</span><span class='lparen'>(</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:ssl</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='ivar'>@usessl</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>else</span>
    <span class='ivar'>@usessl</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
  <span class='ivar'>@responses</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id freeze'>freeze</span><span class='rparen'>)</span>
  <span class='ivar'>@tagged_responses</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@response_handlers</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@tagged_response_arrival</span> <span class='op'>=</span> <span class='id new_cond'>new_cond</span>
  <span class='ivar'>@continuation_request_arrival</span> <span class='op'>=</span> <span class='id new_cond'>new_cond</span>
  <span class='ivar'>@idle_done_cond</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@logout_command_tag</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@debug_output_bol</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='ivar'>@exception</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='ivar'>@greeting</span> <span class='op'>=</span> <span class='id get_response'>get_response</span>
  <span class='kw'>if</span> <span class='ivar'>@greeting</span><span class='period'>.</span><span class='id name'>name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BYE</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@sock</span><span class='period'>.</span><span class='id close'>close</span>
    <span class='id raise'>raise</span> <span class='const'>ByeResponseError</span><span class='comma'>,</span> <span class='ivar'>@greeting</span>
  <span class='kw'>end</span>

  <span class='ivar'>@client_thread</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id current'>current</span>
  <span class='ivar'>@receiver_thread</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id start'>start</span> <span class='lbrace'>{</span>
    <span class='kw'>begin</span>
      <span class='id receive_responses'>receive_responses</span>
    <span class='kw'>rescue</span> <span class='const'>Exception</span>
    <span class='kw'>end</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="client_thread=-instance_method"></span>
      <span id="client_thread-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="client_thread-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>client_thread</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>The thread to receive exceptions.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


224
225
226</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 224</span>

<span class='kw'>def</span> <span class='id client_thread'>client_thread</span>
  <span class='ivar'>@client_thread</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="greeting-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="greeting-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>greeting</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns an initial greeting response from the server.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


209
210
211</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 209</span>

<span class='kw'>def</span> <span class='id greeting'>greeting</span>
  <span class='ivar'>@greeting</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="response_handlers-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="response_handlers-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>response_handlers</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns all response handlers.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


221
222
223</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 221</span>

<span class='kw'>def</span> <span class='id response_handlers'>response_handlers</span>
  <span class='ivar'>@response_handlers</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="responses-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="responses-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>responses</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns recorded untagged responses.  For example:</p>

<pre class="code"><span class='id imap'>imap</span><span class='period'>.</span><span class='id select'>select</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>inbox</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id p'>p</span> <span class='id imap'>imap</span><span class='period'>.</span><span class='id responses'>responses</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EXISTS</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
<span class='comment'>#=&gt; 2
</span><span class='id p'>p</span> <span class='id imap'>imap</span><span class='period'>.</span><span class='id responses'>responses</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UIDVALIDITY</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
<span class='comment'>#=&gt; 968263756</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


218
219
220</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 218</span>

<span class='kw'>def</span> <span class='id responses'>responses</span>
  <span class='ivar'>@responses</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="add_authenticator-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>add_authenticator</strong>(auth_type, authenticator) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Adds an authenticator for Net::IMAP#authenticate.  <tt>auth_type</tt> is
the type of authentication this authenticator supports (for instance,
"LOGIN").  The <tt>authenticator</tt> is an object which defines a
process() method to handle authentication with the server.  See
Net::IMAP::LoginAuthenticator, Net::IMAP::CramMD5Authenticator, and
Net::IMAP::DigestMD5Authenticator for examples.</p>

<p>If <tt>auth_type</tt> refers to an existing authenticator, it will be
replaced by the new one.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


294
295
296</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 294</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id add_authenticator'>add_authenticator</span><span class='lparen'>(</span><span class='id auth_type'>auth_type</span><span class='comma'>,</span> <span class='id authenticator'>authenticator</span><span class='rparen'>)</span>
  <span class='cvar'>@@authenticators</span><span class='lbracket'>[</span><span class='id auth_type'>auth_type</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id authenticator'>authenticator</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="debug-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>debug</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the debug mode.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


264
265
266</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 264</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id debug'>debug</span>
  <span class='kw'>return</span> <span class='cvar'>@@debug</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="debug=-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>debug=</strong>(val) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sets the debug mode.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


269
270
271</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 269</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id debug='>debug=</span><span class='lparen'>(</span><span class='id val'>val</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='cvar'>@@debug</span> <span class='op'>=</span> <span class='id val'>val</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="decode_utf7-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>decode_utf7</strong>(s) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Decode a string from modified UTF-7 format to UTF-8.</p>

<p>UTF-7 is a 7-bit encoding of Unicode [UTF7].  IMAP uses a slightly modified
version of this to encode mailbox names containing non-ASCII characters;
see [IMAP] section 5.1.3.</p>

<p>Net::IMAP does <em>not</em> automatically encode and decode mailbox names
to and from utf7.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


936
937
938
939
940
941
942
943
944
945
946
947
948
949</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 936</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id decode_utf7'>decode_utf7</span><span class='lparen'>(</span><span class='id s'>s</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id s'>s</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&amp;(.*?)-</span><span class='regexp_end'>/n</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span>
    <span class='kw'>if</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id empty?'>empty?</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
      <span class='id base64'>base64</span> <span class='op'>=</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id tr'>tr</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id x'>x</span> <span class='op'>=</span> <span class='id base64'>base64</span><span class='period'>.</span><span class='id length'>length</span> <span class='op'>%</span> <span class='int'>4</span>
      <span class='kw'>if</span> <span class='id x'>x</span> <span class='op'>&gt;</span> <span class='int'>0</span>
        <span class='id base64'>base64</span><span class='period'>.</span><span class='id concat'>concat</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span> <span class='op'>*</span> <span class='lparen'>(</span><span class='int'>4</span> <span class='op'>-</span> <span class='id x'>x</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
      <span class='id base64'>base64</span><span class='period'>.</span><span class='id unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>m</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>n*</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>U*</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id force_encoding'>force_encoding</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="encode_utf7-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>encode_utf7</strong>(s) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Encode a string from UTF-8 format to modified UTF-7.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


952
953
954
955
956
957
958
959
960
961</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 952</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id encode_utf7'>encode_utf7</span><span class='lparen'>(</span><span class='id s'>s</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id s'>s</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(&amp;)|([^\x20-\x7e]+)</span><span class='regexp_end'>/u</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span>
    <span class='kw'>if</span> <span class='backref'>$1</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;-</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
      <span class='id base64'>base64</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='backref'>$&amp;</span><span class='period'>.</span><span class='id unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>U*</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>n*</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>m</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id base64'>base64</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>=\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id tr'>tr</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id force_encoding'>force_encoding</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ASCII-8BIT</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="format_date-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>format_date</strong>(time) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Formats <tt>time</tt> as an IMAP-style date.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


964
965
966</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 964</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id format_date'>format_date</span><span class='lparen'>(</span><span class='id time'>time</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id time'>time</span><span class='period'>.</span><span class='id strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>%d-%b-%Y</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="format_datetime-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>format_datetime</strong>(time) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Formats <tt>time</tt> as an IMAP-style date-time.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


969
970
971</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 969</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id format_datetime'>format_datetime</span><span class='lparen'>(</span><span class='id time'>time</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id time'>time</span><span class='period'>.</span><span class='id strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>%d-%b-%Y %H:%M %z</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="max_flag_count-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>max_flag_count</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the max number of flags interned to symbols.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


274
275
276</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 274</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id max_flag_count'>max_flag_count</span>
  <span class='kw'>return</span> <span class='cvar'>@@max_flag_count</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="max_flag_count=-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>max_flag_count=</strong>(count) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sets the max number of flags interned to symbols.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


279
280
281</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 279</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id max_flag_count='>max_flag_count=</span><span class='lparen'>(</span><span class='id count'>count</span><span class='rparen'>)</span>
  <span class='cvar'>@@max_flag_count</span> <span class='op'>=</span> <span class='id count'>count</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="add_response_handler-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>add_response_handler</strong>(handler = Proc.new) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Adds a response handler. For example, to detect when the server sends us a
new EXISTS response (which normally indicates new messages being added to
the mail box), you could add the following handler after selecting the
mailbox.</p>

<pre class="code"><span class='id imap'>imap</span><span class='period'>.</span><span class='id add_response_handler'>add_response_handler</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id resp'>resp</span><span class='op'>|</span>
  <span class='kw'>if</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Net</span><span class='op'>::</span><span class='const'>IMAP</span><span class='op'>::</span><span class='const'>UntaggedResponse</span><span class='rparen'>)</span> <span class='kw'>and</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id name'>name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EXISTS</span><span class='tstring_end'>&quot;</span></span>
    <span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Mailbox now has </span><span class='embexpr_beg'>#{</span><span class='id resp'>resp</span><span class='period'>.</span><span class='id data'>data</span><span class='rbrace'>}</span><span class='tstring_content'> messages</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='rbrace'>}</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


858
859
860</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 858</span>

<span class='kw'>def</span> <span class='id add_response_handler'>add_response_handler</span><span class='lparen'>(</span><span class='id handler'>handler</span> <span class='op'>=</span> <span class='const'>Proc</span><span class='period'>.</span><span class='id new'>new</span><span class='rparen'>)</span>
  <span class='ivar'>@response_handlers</span><span class='period'>.</span><span class='id push'>push</span><span class='lparen'>(</span><span class='id handler'>handler</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="append-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>append</strong>(mailbox, message, flags = nil, date_time = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a APPEND command to append the <tt>message</tt> to the end of the
<tt>mailbox</tt>. The optional <tt>flags</tt> argument is an array of flags
to initially passing to the new message.  The optional <tt>date_time</tt>
argument specifies the creation time to assign to the new message; it
defaults to the current time. For example:</p>

<pre class="code"><span class='id imap'>imap</span><span class='period'>.</span><span class='id append'>append</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>inbox</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='heredoc_beg'>&lt;&lt;EOF</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\n</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\r\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:Seen</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='const'>Time</span><span class='period'>.</span><span class='id now'>now</span><span class='rparen'>)</span>
<span class='tstring_content'>Subject: hello
From: shugo@ruby-lang.org
To: shugo@ruby-lang.org

hello world
</span><span class='heredoc_end'>EOF</span></pre>

<p>A Net::IMAP::NoResponseError is raised if the mailbox does not exist (it is
not created automatically), or if the flags, date_time, or message
arguments contain errors.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


677
678
679
680
681
682
683
684
685</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 677</span>

<span class='kw'>def</span> <span class='id append'>append</span><span class='lparen'>(</span><span class='id mailbox'>mailbox</span><span class='comma'>,</span> <span class='id message'>message</span><span class='comma'>,</span> <span class='id flags'>flags</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id date_time'>date_time</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id args'>args</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>if</span> <span class='id flags'>flags</span>
    <span class='id args'>args</span><span class='period'>.</span><span class='id push'>push</span><span class='lparen'>(</span><span class='id flags'>flags</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id args'>args</span><span class='period'>.</span><span class='id push'>push</span><span class='lparen'>(</span><span class='id date_time'>date_time</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id date_time'>date_time</span>
  <span class='id args'>args</span><span class='period'>.</span><span class='id push'>push</span><span class='lparen'>(</span><span class='const'>Literal</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id message'>message</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>APPEND</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='comma'>,</span> <span class='op'>*</span><span class='id args'>args</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="authenticate-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>authenticate</strong>(auth_type, *args) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends an AUTHENTICATE command to authenticate the client. The
<tt>auth_type</tt> parameter is a string that represents the authentication
mechanism to be used. Currently Net::IMAP supports authentication
mechanisms:</p>

<pre class="code">LOGIN:: login using cleartext user and password.
CRAM-MD5:: login with cleartext user and encrypted password
           (see [RFC-2195] for a full description).  This
           mechanism requires that the server have the user's
           password stored in clear-text password.</pre>

<p>For both these mechanisms, there should be two <tt>args</tt>: username and
(cleartext) password.  A server may not support one or other of these
mechanisms; check #capability() for a capability of the form "AUTH=LOGIN"
or "AUTH=CRAM-MD5".</p>

<p>Authentication is done using the appropriate authenticator object: see
@@authenticators for more information on plugging in your own
authenticator.</p>

<p>For example:</p>

<pre class="code"><span class='id imap'>imap</span><span class='period'>.</span><span class='id authenticate'>authenticate</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>LOGIN</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='id user'>user</span><span class='comma'>,</span> <span class='id password'>password</span><span class='rparen'>)</span></pre>

<p>A Net::IMAP::NoResponseError is raised if authentication fails.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 395</span>

<span class='kw'>def</span> <span class='id authenticate'>authenticate</span><span class='lparen'>(</span><span class='id auth_type'>auth_type</span><span class='comma'>,</span> <span class='op'>*</span><span class='id args'>args</span><span class='rparen'>)</span>
  <span class='id auth_type'>auth_type</span> <span class='op'>=</span> <span class='id auth_type'>auth_type</span><span class='period'>.</span><span class='id upcase'>upcase</span>
  <span class='kw'>unless</span> <span class='cvar'>@@authenticators</span><span class='period'>.</span><span class='id has_key?'>has_key?</span><span class='lparen'>(</span><span class='id auth_type'>auth_type</span><span class='rparen'>)</span>
    <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span>
      <span class='id format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>unknown auth type - &quot;%s&quot;</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='id auth_type'>auth_type</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id authenticator'>authenticator</span> <span class='op'>=</span> <span class='cvar'>@@authenticators</span><span class='lbracket'>[</span><span class='id auth_type'>auth_type</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='op'>*</span><span class='id args'>args</span><span class='rparen'>)</span>
  <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>AUTHENTICATE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id auth_type'>auth_type</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id resp'>resp</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id instance_of?'>instance_of?</span><span class='lparen'>(</span><span class='const'>ContinuationRequest</span><span class='rparen'>)</span>
      <span class='id data'>data</span> <span class='op'>=</span> <span class='id authenticator'>authenticator</span><span class='period'>.</span><span class='id process'>process</span><span class='lparen'>(</span><span class='id resp'>resp</span><span class='period'>.</span><span class='id data'>data</span><span class='period'>.</span><span class='id text'>text</span><span class='period'>.</span><span class='id unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>m</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='id s'>s</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id data'>data</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>m</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\n</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id send_string_data'>send_string_data</span><span class='lparen'>(</span><span class='id s'>s</span><span class='rparen'>)</span>
      <span class='id put_string'>put_string</span><span class='lparen'>(</span><span class='const'>CRLF</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="capability-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>capability</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a CAPABILITY command, and returns an array of capabilities that the
server supports.  Each capability is a string.  See [IMAP] for a list of
possible capabilities.</p>

<p>Note that the Net::IMAP class does not modify its behaviour according to
the capabilities of the server; it is up to the user of the class to ensure
that a certain capability is supported by a server before using it.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


337
338
339
340
341
342</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 337</span>

<span class='kw'>def</span> <span class='id capability'>capability</span>
  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CAPABILITY</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='ivar'>@responses</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CAPABILITY</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="check-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>check</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a CHECK command to request a checkpoint of the currently selected
mailbox.  This performs implementation-specific housekeeping, for instance,
reconciling the mailbox's in-memory and on-disk state.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


691
692
693</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 691</span>

<span class='kw'>def</span> <span class='id check'>check</span>
  <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CHECK</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="close-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>close</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a CLOSE command to close the currently selected mailbox. The CLOSE
command permanently removes from the mailbox all messages that have the
Deleted flag set.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


698
699
700</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 698</span>

<span class='kw'>def</span> <span class='id close'>close</span>
  <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CLOSE</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="copy-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>copy</strong>(set, mailbox) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a COPY command to copy the specified message(s) to the end of the
specified destination <tt>mailbox</tt>. The <tt>set</tt> parameter is a
number or an array of numbers or a Range object. The number is a message
sequence number.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


819
820
821</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 819</span>

<span class='kw'>def</span> <span class='id copy'>copy</span><span class='lparen'>(</span><span class='id set'>set</span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
  <span class='id copy_internal'>copy_internal</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>COPY</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id set'>set</span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="copy_internal-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>copy_internal</strong>(cmd, set, mailbox) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1354
1355
1356</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1354</span>

<span class='kw'>def</span> <span class='id copy_internal'>copy_internal</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='comma'>,</span> <span class='id set'>set</span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
  <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='comma'>,</span> <span class='const'>MessageSet</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id set'>set</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="create-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>create</strong>(mailbox) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a CREATE command to create a new <tt>mailbox</tt>.</p>

<p>A Net::IMAP::NoResponseError is raised if a mailbox with that name cannot
be created.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


458
459
460</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 458</span>

<span class='kw'>def</span> <span class='id create'>create</span><span class='lparen'>(</span><span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
  <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CREATE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="create_ssl_params-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>create_ssl_params</strong>(certs = nil, verify = true) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1393
1394
1395
1396
1397
1398
1399
1400
1401
1402
1403
1404
1405
1406
1407
1408</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1393</span>

<span class='kw'>def</span> <span class='id create_ssl_params'>create_ssl_params</span><span class='lparen'>(</span><span class='id certs'>certs</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id verify'>verify</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id params'>params</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>if</span> <span class='id certs'>certs</span>
    <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id file?'>file?</span><span class='lparen'>(</span><span class='id certs'>certs</span><span class='rparen'>)</span>
      <span class='id params'>params</span><span class='lbracket'>[</span><span class='symbol'>:ca_file</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id certs'>certs</span>
    <span class='kw'>elsif</span> <span class='const'>File</span><span class='period'>.</span><span class='id directory?'>directory?</span><span class='lparen'>(</span><span class='id certs'>certs</span><span class='rparen'>)</span>
      <span class='id params'>params</span><span class='lbracket'>[</span><span class='symbol'>:ca_path</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id certs'>certs</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id verify'>verify</span>
    <span class='id params'>params</span><span class='lbracket'>[</span><span class='symbol'>:verify_mode</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>VERIFY_PEER</span>
  <span class='kw'>else</span>
    <span class='id params'>params</span><span class='lbracket'>[</span><span class='symbol'>:verify_mode</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>VERIFY_NONE</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id params'>params</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="delete-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>delete</strong>(mailbox) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a DELETE command to remove the <tt>mailbox</tt>.</p>

<p>A Net::IMAP::NoResponseError is raised if a mailbox with that name cannot
be deleted, either because it does not exist or because the client does not
have permission to delete it.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


467
468
469</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 467</span>

<span class='kw'>def</span> <span class='id delete'>delete</span><span class='lparen'>(</span><span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
  <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DELETE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="disconnect-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>disconnect</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Disconnects from the server.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 299</span>

<span class='kw'>def</span> <span class='id disconnect'>disconnect</span>
  <span class='kw'>begin</span>
    <span class='kw'>begin</span>
      <span class='comment'># try to call SSL::SSLSocket#io.
</span>      <span class='ivar'>@sock</span><span class='period'>.</span><span class='id io'>io</span><span class='period'>.</span><span class='id shutdown'>shutdown</span>
    <span class='kw'>rescue</span> <span class='const'>NoMethodError</span>
      <span class='comment'># @sock is not an SSL::SSLSocket.
</span>      <span class='ivar'>@sock</span><span class='period'>.</span><span class='id shutdown'>shutdown</span>
    <span class='kw'>end</span>
  <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ENOTCONN</span>
    <span class='comment'># ignore `Errno::ENOTCONN: Socket is not connected' on some platforms.
</span>  <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
    <span class='ivar'>@receiver_thread</span><span class='period'>.</span><span class='id raise'>raise</span><span class='lparen'>(</span><span class='id e'>e</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='ivar'>@receiver_thread</span><span class='period'>.</span><span class='id join'>join</span>
  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='kw'>unless</span> <span class='ivar'>@sock</span><span class='period'>.</span><span class='id closed?'>closed?</span>
      <span class='ivar'>@sock</span><span class='period'>.</span><span class='id close'>close</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id raise'>raise</span> <span class='id e'>e</span> <span class='kw'>if</span> <span class='id e'>e</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="disconnected?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>disconnected?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns true if disconnected from the server.</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


323
324
325</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 323</span>

<span class='kw'>def</span> <span class='id disconnected?'>disconnected?</span>
  <span class='kw'>return</span> <span class='ivar'>@sock</span><span class='period'>.</span><span class='id closed?'>closed?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="examine-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>examine</strong>(mailbox) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a EXAMINE command to select a <tt>mailbox</tt> so that messages in
the <tt>mailbox</tt> can be accessed.  Behaves the same as #select(),
except that the selected <tt>mailbox</tt> is identified as read-only.</p>

<p>A Net::IMAP::NoResponseError is raised if the mailbox does not exist or is
for some reason non-examinable.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


447
448
449
450
451
452</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 447</span>

<span class='kw'>def</span> <span class='id examine'>examine</span><span class='lparen'>(</span><span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@responses</span><span class='period'>.</span><span class='id clear'>clear</span>
    <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EXAMINE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="expunge-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>expunge</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a EXPUNGE command to permanently remove from the currently selected
mailbox all messages that have the Deleted flag set.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


704
705
706
707
708
709</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 704</span>

<span class='kw'>def</span> <span class='id expunge'>expunge</span>
  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EXPUNGE</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='ivar'>@responses</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EXPUNGE</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="fetch-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>fetch</strong>(set, attr) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a FETCH command to retrieve data associated with a message in the
mailbox. The <tt>set</tt> parameter is a number or an array of numbers or a
Range object. The number is a message sequence number.  <tt>attr</tt> is a
list of attributes to fetch; see the documentation for Net::IMAP::FetchData
for a list of valid attributes. The return value is an array of
Net::IMAP::FetchData. For example:</p>

<pre class="code"><span class='id p'>p</span> <span class='id imap'>imap</span><span class='period'>.</span><span class='id fetch'>fetch</span><span class='lparen'>(</span><span class='int'>6</span><span class='op'>..</span><span class='int'>8</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UID</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='comment'>#=&gt; [#&lt;Net::IMAP::FetchData seqno=6, attr={&quot;UID&quot;=&gt;98}&gt;, \\
</span>     <span class='comment'>#&lt;Net::IMAP::FetchData seqno=7, attr={&quot;UID&quot;=&gt;99}&gt;, \\
</span>     <span class='comment'>#&lt;Net::IMAP::FetchData seqno=8, attr={&quot;UID&quot;=&gt;100}&gt;]
</span><span class='id p'>p</span> <span class='id imap'>imap</span><span class='period'>.</span><span class='id fetch'>fetch</span><span class='lparen'>(</span><span class='int'>6</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BODY[HEADER.FIELDS (SUBJECT)]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='comment'>#=&gt; [#&lt;Net::IMAP::FetchData seqno=6, attr={&quot;BODY[HEADER.FIELDS (SUBJECT)]&quot;=&gt;&quot;Subject: test\r\n\r\n&quot;}&gt;]
</span><span class='id data'>data</span> <span class='op'>=</span> <span class='id imap'>imap</span><span class='period'>.</span><span class='id uid_fetch'>uid_fetch</span><span class='lparen'>(</span><span class='int'>98</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RFC822.SIZE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>INTERNALDATE</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
<span class='id p'>p</span> <span class='id data'>data</span><span class='period'>.</span><span class='id seqno'>seqno</span>
<span class='comment'>#=&gt; 6
</span><span class='id p'>p</span> <span class='id data'>data</span><span class='period'>.</span><span class='id attr'>attr</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RFC822.SIZE</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
<span class='comment'>#=&gt; 611
</span><span class='id p'>p</span> <span class='id data'>data</span><span class='period'>.</span><span class='id attr'>attr</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>INTERNALDATE</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
<span class='comment'>#=&gt; &quot;12-Oct-2000 22:40:59 +0900&quot;
</span><span class='id p'>p</span> <span class='id data'>data</span><span class='period'>.</span><span class='id attr'>attr</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UID</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
<span class='comment'>#=&gt; 98</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


783
784
785</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 783</span>

<span class='kw'>def</span> <span class='id fetch'>fetch</span><span class='lparen'>(</span><span class='id set'>set</span><span class='comma'>,</span> <span class='id attr'>attr</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id fetch_internal'>fetch_internal</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FETCH</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id set'>set</span><span class='comma'>,</span> <span class='id attr'>attr</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="fetch_internal-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>fetch_internal</strong>(cmd, set, attr) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1326
1327
1328
1329
1330
1331
1332
1333
1334
1335
1336
1337
1338
1339
1340
1341</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1326</span>

<span class='kw'>def</span> <span class='id fetch_internal'>fetch_internal</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='comma'>,</span> <span class='id set'>set</span><span class='comma'>,</span> <span class='id attr'>attr</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id attr'>attr</span>
  <span class='kw'>when</span> <span class='const'>String</span> <span class='kw'>then</span>
    <span class='id attr'>attr</span> <span class='op'>=</span> <span class='const'>RawData</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id attr'>attr</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='const'>Array</span> <span class='kw'>then</span>
    <span class='id attr'>attr</span> <span class='op'>=</span> <span class='id attr'>attr</span><span class='period'>.</span><span class='id map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id arg'>arg</span><span class='op'>|</span>
      <span class='id arg'>arg</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='const'>RawData</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id arg'>arg</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='id arg'>arg</span>
    <span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@responses</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FETCH</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='comma'>,</span> <span class='const'>MessageSet</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id set'>set</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id attr'>attr</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='ivar'>@responses</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FETCH</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="generate_tag-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>generate_tag</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1194
1195
1196
1197</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1194</span>

<span class='kw'>def</span> <span class='id generate_tag'>generate_tag</span>
  <span class='ivar'>@tagno</span> <span class='op'>+=</span> <span class='int'>1</span>
  <span class='kw'>return</span> <span class='id format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%s%04d</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='ivar'>@tag_prefix</span><span class='comma'>,</span> <span class='ivar'>@tagno</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="get_response-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>get_response</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1139
1140
1141
1142
1143
1144
1145
1146
1147
1148
1149
1150
1151
1152
1153
1154
1155
1156
1157</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1139</span>

<span class='kw'>def</span> <span class='id get_response'>get_response</span>
  <span class='id buff'>buff</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>while</span> <span class='kw'>true</span>
    <span class='id s'>s</span> <span class='op'>=</span> <span class='ivar'>@sock</span><span class='period'>.</span><span class='id gets'>gets</span><span class='lparen'>(</span><span class='const'>CRLF</span><span class='rparen'>)</span>
    <span class='kw'>break</span> <span class='kw'>unless</span> <span class='id s'>s</span>
    <span class='id buff'>buff</span><span class='period'>.</span><span class='id concat'>concat</span><span class='lparen'>(</span><span class='id s'>s</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\{(\d+)\}\r\n</span><span class='regexp_end'>/n</span></span> <span class='op'>=~</span> <span class='id s'>s</span>
      <span class='id s'>s</span> <span class='op'>=</span> <span class='ivar'>@sock</span><span class='period'>.</span><span class='id read'>read</span><span class='lparen'>(</span><span class='backref'>$1</span><span class='period'>.</span><span class='id to_i'>to_i</span><span class='rparen'>)</span>
      <span class='id buff'>buff</span><span class='period'>.</span><span class='id concat'>concat</span><span class='lparen'>(</span><span class='id s'>s</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='kw'>break</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id buff'>buff</span><span class='period'>.</span><span class='id length'>length</span> <span class='op'>==</span> <span class='int'>0</span>
  <span class='kw'>if</span> <span class='cvar'>@@debug</span>
    <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id print'>print</span><span class='lparen'>(</span><span class='id buff'>buff</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^</span><span class='regexp_end'>/n</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>S: </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='ivar'>@parser</span><span class='period'>.</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='id buff'>buff</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="get_tagged_response-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>get_tagged_response</strong>(tag, cmd) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1123
1124
1125
1126
1127
1128
1129
1130
1131
1132
1133
1134
1135
1136
1137</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1123</span>

<span class='kw'>def</span> <span class='id get_tagged_response'>get_tagged_response</span><span class='lparen'>(</span><span class='id tag'>tag</span><span class='comma'>,</span> <span class='id cmd'>cmd</span><span class='rparen'>)</span>
  <span class='kw'>until</span> <span class='ivar'>@tagged_responses</span><span class='period'>.</span><span class='id key?'>key?</span><span class='lparen'>(</span><span class='id tag'>tag</span><span class='rparen'>)</span>
    <span class='id raise'>raise</span> <span class='ivar'>@exception</span> <span class='kw'>if</span> <span class='ivar'>@exception</span>
    <span class='ivar'>@tagged_response_arrival</span><span class='period'>.</span><span class='id wait'>wait</span>
  <span class='kw'>end</span>
  <span class='id resp'>resp</span> <span class='op'>=</span> <span class='ivar'>@tagged_responses</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='id tag'>tag</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id name'>name</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A(?:NO)\z</span><span class='regexp_end'>/ni</span></span>
    <span class='id raise'>raise</span> <span class='const'>NoResponseError</span><span class='comma'>,</span> <span class='id resp'>resp</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A(?:BAD)\z</span><span class='regexp_end'>/ni</span></span>
    <span class='id raise'>raise</span> <span class='const'>BadResponseError</span><span class='comma'>,</span> <span class='id resp'>resp</span>
  <span class='kw'>else</span>
    <span class='kw'>return</span> <span class='id resp'>resp</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="getacl-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>getacl</strong>(mailbox) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Send the GETACL command along with specified <tt>mailbox</tt>. If this
mailbox exists, an array containing objects of Net::IMAP::MailboxACLItem
will be returned.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


617
618
619
620
621
622</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 617</span>

<span class='kw'>def</span> <span class='id getacl'>getacl</span><span class='lparen'>(</span><span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GETACL</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='ivar'>@responses</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ACL</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="getquota-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>getquota</strong>(mailbox) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends the GETQUOTA command along with specified <tt>mailbox</tt>. If this
mailbox exists, then an array containing a Net::IMAP::MailboxQuota object
is returned.  This command generally is only available to server admin.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


581
582
583
584
585
586</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 581</span>

<span class='kw'>def</span> <span class='id getquota'>getquota</span><span class='lparen'>(</span><span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GETQUOTA</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='ivar'>@responses</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>QUOTA</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="getquotaroot-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>getquotaroot</strong>(mailbox) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends the GETQUOTAROOT command along with specified <tt>mailbox</tt>. This
command is generally available to both admin and user. If mailbox exists,
returns an array containing objects of Net::IMAP::MailboxQuotaRoot and
Net::IMAP::MailboxQuota.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


567
568
569
570
571
572
573
574
575</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 567</span>

<span class='kw'>def</span> <span class='id getquotaroot'>getquotaroot</span><span class='lparen'>(</span><span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GETQUOTAROOT</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
    <span class='id result'>result</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id result'>result</span><span class='period'>.</span><span class='id concat'>concat</span><span class='lparen'>(</span><span class='ivar'>@responses</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>QUOTAROOT</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id result'>result</span><span class='period'>.</span><span class='id concat'>concat</span><span class='lparen'>(</span><span class='ivar'>@responses</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>QUOTA</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id result'>result</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="idle-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>idle</strong>(&amp;response_handler) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends an IDLE command that waits for notifications of new or expunged
messages.  Yields responses from the server during the IDLE.</p>

<p>Use #idle_done() to leave IDLE.</p>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>LocalJumpError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


894
895
896
897
898
899
900
901
902
903
904
905
906
907
908
909
910
911
912
913
914
915
916</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 894</span>

<span class='kw'>def</span> <span class='id idle'>idle</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id response_handler'>response_handler</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>LocalJumpError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>no block given</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id response_handler'>response_handler</span>

  <span class='id response'>response</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id tag'>tag</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id current'>current</span><span class='lbracket'>[</span><span class='symbol'>:net_imap_tag</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id generate_tag'>generate_tag</span>
    <span class='id put_string'>put_string</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id tag'>tag</span><span class='rbrace'>}</span><span class='tstring_content'> IDLE</span><span class='embexpr_beg'>#{</span><span class='const'>CRLF</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

    <span class='kw'>begin</span>
      <span class='id add_response_handler'>add_response_handler</span><span class='lparen'>(</span><span class='id response_handler'>response_handler</span><span class='rparen'>)</span>
      <span class='ivar'>@idle_done_cond</span> <span class='op'>=</span> <span class='id new_cond'>new_cond</span>
      <span class='ivar'>@idle_done_cond</span><span class='period'>.</span><span class='id wait'>wait</span>
      <span class='ivar'>@idle_done_cond</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>ensure</span>
      <span class='id remove_response_handler'>remove_response_handler</span><span class='lparen'>(</span><span class='id response_handler'>response_handler</span><span class='rparen'>)</span>
      <span class='id put_string'>put_string</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DONE</span><span class='embexpr_beg'>#{</span><span class='const'>CRLF</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id response'>response</span> <span class='op'>=</span> <span class='id get_tagged_response'>get_tagged_response</span><span class='lparen'>(</span><span class='id tag'>tag</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>IDLE</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='id response'>response</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="idle_done-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>idle_done</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Leaves IDLE.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


919
920
921
922
923
924
925
926</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 919</span>

<span class='kw'>def</span> <span class='id idle_done'>idle_done</span>
  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='ivar'>@idle_done_cond</span><span class='period'>.</span><span class='id nil?'>nil?</span>
      <span class='id raise'>raise</span> <span class='const'>Net</span><span class='op'>::</span><span class='const'>IMAP</span><span class='op'>::</span><span class='const'>Error</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>not during IDLE</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='ivar'>@idle_done_cond</span><span class='period'>.</span><span class='id signal'>signal</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="list-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>list</strong>(refname, mailbox) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a LIST command, and returns a subset of names from the complete set
of all names available to the client. <tt>refname</tt> provides a context
(for instance, a base directory in a directory-based mailbox hierarchy). 
<tt>mailbox</tt> specifies a mailbox or (via wildcards) mailboxes under
that context. Two wildcards may be used in <tt>mailbox</tt>: '*', which
matches all characters <b>including</b> the hierarchy delimiter (for
instance, '/' on a UNIX-hosted directory-based mailbox hierarchy); and '%',
which matches all characters <b>except</b> the hierarchy delimiter.</p>

<p>If <tt>refname</tt> is empty, <tt>mailbox</tt> is used directly to
determine which mailboxes to match.  If <tt>mailbox</tt> is empty, the root
name of <tt>refname</tt> and the hierarchy delimiter are returned.</p>

<p>The return value is an array of <tt>Net::IMAP::MailboxList</tt>. For example:</p>

<pre class="code"><span class='id imap'>imap</span><span class='period'>.</span><span class='id create'>create</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo/bar</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id imap'>imap</span><span class='period'>.</span><span class='id create'>create</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo/baz</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id p'>p</span> <span class='id imap'>imap</span><span class='period'>.</span><span class='id list'>list</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo/%</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='comment'>#=&gt; [#&lt;Net::IMAP::MailboxList attr=[:Noselect], delim=&quot;/&quot;, name=&quot;foo/&quot;&gt;, \\
</span>     <span class='comment'>#&lt;Net::IMAP::MailboxList attr=[:Noinferiors, :Marked], delim=&quot;/&quot;, name=&quot;foo/bar&quot;&gt;, \\
</span>     <span class='comment'>#&lt;Net::IMAP::MailboxList attr=[:Noinferiors], delim=&quot;/&quot;, name=&quot;foo/baz&quot;&gt;]</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


524
525
526
527
528
529</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 524</span>

<span class='kw'>def</span> <span class='id list'>list</span><span class='lparen'>(</span><span class='id refname'>refname</span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LIST</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id refname'>refname</span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='ivar'>@responses</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LIST</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="login-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>login</strong>(user, password) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a LOGIN command to identify the client and carries the plaintext
<tt>password</tt> authenticating this <tt>user</tt>.  Note that, unlike
calling #authenticate() with an <tt>auth_type</tt> of "LOGIN", #login()
does <b>not</b> use the login authenticator.</p>

<p>A Net::IMAP::NoResponseError is raised if authentication fails.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


418
419
420</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 418</span>

<span class='kw'>def</span> <span class='id login'>login</span><span class='lparen'>(</span><span class='id user'>user</span><span class='comma'>,</span> <span class='id password'>password</span><span class='rparen'>)</span>
  <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LOGIN</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id user'>user</span><span class='comma'>,</span> <span class='id password'>password</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="logout-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>logout</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a LOGOUT command to inform the server that the client is done with
the connection.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


351
352
353</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 351</span>

<span class='kw'>def</span> <span class='id logout'>logout</span>
  <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LOGOUT</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="lsub-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>lsub</strong>(refname, mailbox) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a LSUB command, and returns a subset of names from the set of names
that the user has declared as being "active" or "subscribed". 
<tt>refname</tt> and <tt>mailbox</tt> are interpreted as for #list(). The
return value is an array of <tt>Net::IMAP::MailboxList</tt>.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


629
630
631
632
633
634</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 629</span>

<span class='kw'>def</span> <span class='id lsub'>lsub</span><span class='lparen'>(</span><span class='id refname'>refname</span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LSUB</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id refname'>refname</span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='ivar'>@responses</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LSUB</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="noop-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>noop</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a NOOP command to the server. It does nothing.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


345
346
347</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 345</span>

<span class='kw'>def</span> <span class='id noop'>noop</span>
  <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NOOP</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="normalize_searching_criteria-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>normalize_searching_criteria</strong>(keys) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1382
1383
1384
1385
1386
1387
1388
1389
1390
1391</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1382</span>

<span class='kw'>def</span> <span class='id normalize_searching_criteria'>normalize_searching_criteria</span><span class='lparen'>(</span><span class='id keys'>keys</span><span class='rparen'>)</span>
  <span class='id keys'>keys</span><span class='period'>.</span><span class='id collect!'>collect!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span>
    <span class='kw'>case</span> <span class='id i'>i</span>
    <span class='kw'>when</span> <span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='const'>Range</span><span class='comma'>,</span> <span class='const'>Array</span>
      <span class='const'>MessageSet</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id i'>i</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id i'>i</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="put_string-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>put_string</strong>(str) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1199
1200
1201
1202
1203
1204
1205
1206
1207
1208
1209
1210
1211
1212</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1199</span>

<span class='kw'>def</span> <span class='id put_string'>put_string</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
  <span class='ivar'>@sock</span><span class='period'>.</span><span class='id print'>print</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='cvar'>@@debug</span>
    <span class='kw'>if</span> <span class='ivar'>@debug_output_bol</span>
      <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id print'>print</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>C: </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='gvar'>$stderr</span><span class='period'>.</span><span class='id print'>print</span><span class='lparen'>(</span><span class='id str'>str</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\n(?!\z)</span><span class='regexp_end'>/n</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nC: </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\r\n\z</span><span class='regexp_end'>/n</span></span><span class='period'>.</span><span class='id match'>match</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
      <span class='ivar'>@debug_output_bol</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>else</span>
      <span class='ivar'>@debug_output_bol</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="receive_responses-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>receive_responses</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1061
1062
1063
1064
1065
1066
1067
1068
1069
1070
1071
1072
1073
1074
1075
1076
1077
1078
1079
1080
1081
1082
1083
1084
1085
1086
1087
1088
1089
1090
1091
1092
1093
1094
1095
1096
1097
1098
1099
1100
1101
1102
1103
1104
1105
1106
1107
1108
1109
1110
1111
1112
1113
1114
1115
1116
1117
1118
1119
1120
1121</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1061</span>

<span class='kw'>def</span> <span class='id receive_responses'>receive_responses</span>
  <span class='id connection_closed'>connection_closed</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>until</span> <span class='id connection_closed'>connection_closed</span>
    <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
      <span class='ivar'>@exception</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
    <span class='kw'>begin</span>
      <span class='id resp'>resp</span> <span class='op'>=</span> <span class='id get_response'>get_response</span>
    <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
      <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
        <span class='ivar'>@sock</span><span class='period'>.</span><span class='id close'>close</span>
        <span class='ivar'>@exception</span> <span class='op'>=</span> <span class='id e'>e</span>
      <span class='kw'>end</span>
      <span class='kw'>break</span>
    <span class='kw'>end</span>
    <span class='kw'>unless</span> <span class='id resp'>resp</span>
      <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
        <span class='ivar'>@exception</span> <span class='op'>=</span> <span class='const'>EOFError</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>end of file reached</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>end</span>
      <span class='kw'>break</span>
    <span class='kw'>end</span>
    <span class='kw'>begin</span>
      <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
        <span class='kw'>case</span> <span class='id resp'>resp</span>
        <span class='kw'>when</span> <span class='const'>TaggedResponse</span>
          <span class='ivar'>@tagged_responses</span><span class='lbracket'>[</span><span class='id resp'>resp</span><span class='period'>.</span><span class='id tag'>tag</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id resp'>resp</span>
          <span class='ivar'>@tagged_response_arrival</span><span class='period'>.</span><span class='id broadcast'>broadcast</span>
          <span class='kw'>if</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id tag'>tag</span> <span class='op'>==</span> <span class='ivar'>@logout_command_tag</span>
            <span class='kw'>return</span>
          <span class='kw'>end</span>
        <span class='kw'>when</span> <span class='const'>UntaggedResponse</span>
          <span class='id record_response'>record_response</span><span class='lparen'>(</span><span class='id resp'>resp</span><span class='period'>.</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id data'>data</span><span class='rparen'>)</span>
          <span class='kw'>if</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id data'>data</span><span class='period'>.</span><span class='id instance_of?'>instance_of?</span><span class='lparen'>(</span><span class='const'>ResponseText</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span>
              <span class='lparen'>(</span><span class='id code'>code</span> <span class='op'>=</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id data'>data</span><span class='period'>.</span><span class='id code'>code</span><span class='rparen'>)</span>
            <span class='id record_response'>record_response</span><span class='lparen'>(</span><span class='id code'>code</span><span class='period'>.</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id code'>code</span><span class='period'>.</span><span class='id data'>data</span><span class='rparen'>)</span>
          <span class='kw'>end</span>
          <span class='kw'>if</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id name'>name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BYE</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@logout_command_tag</span><span class='period'>.</span><span class='id nil?'>nil?</span>
            <span class='ivar'>@sock</span><span class='period'>.</span><span class='id close'>close</span>
            <span class='ivar'>@exception</span> <span class='op'>=</span> <span class='const'>ByeResponseError</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id resp'>resp</span><span class='rparen'>)</span>
            <span class='id connection_closed'>connection_closed</span> <span class='op'>=</span> <span class='kw'>true</span>
          <span class='kw'>end</span>
        <span class='kw'>when</span> <span class='const'>ContinuationRequest</span>
          <span class='ivar'>@continuation_request_arrival</span><span class='period'>.</span><span class='id signal'>signal</span>
        <span class='kw'>end</span>
        <span class='ivar'>@response_handlers</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id handler'>handler</span><span class='op'>|</span>
          <span class='id handler'>handler</span><span class='period'>.</span><span class='id call'>call</span><span class='lparen'>(</span><span class='id resp'>resp</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
      <span class='ivar'>@exception</span> <span class='op'>=</span> <span class='id e'>e</span>
      <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
        <span class='ivar'>@tagged_response_arrival</span><span class='period'>.</span><span class='id broadcast'>broadcast</span>
        <span class='ivar'>@continuation_request_arrival</span><span class='period'>.</span><span class='id broadcast'>broadcast</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@tagged_response_arrival</span><span class='period'>.</span><span class='id broadcast'>broadcast</span>
    <span class='ivar'>@continuation_request_arrival</span><span class='period'>.</span><span class='id broadcast'>broadcast</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="record_response-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>record_response</strong>(name, data) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1159
1160
1161
1162
1163
1164</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1159</span>

<span class='kw'>def</span> <span class='id record_response'>record_response</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id data'>data</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='ivar'>@responses</span><span class='period'>.</span><span class='id has_key?'>has_key?</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span>
    <span class='ivar'>@responses</span><span class='lbracket'>[</span><span class='id name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='ivar'>@responses</span><span class='lbracket'>[</span><span class='id name'>name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id push'>push</span><span class='lparen'>(</span><span class='id data'>data</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="remove_response_handler-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>remove_response_handler</strong>(handler) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Removes the response handler.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


863
864
865</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 863</span>

<span class='kw'>def</span> <span class='id remove_response_handler'>remove_response_handler</span><span class='lparen'>(</span><span class='id handler'>handler</span><span class='rparen'>)</span>
  <span class='ivar'>@response_handlers</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='id handler'>handler</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="rename-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>rename</strong>(mailbox, newname) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a RENAME command to change the name of the <tt>mailbox</tt> to
<tt>newname</tt>.</p>

<p>A Net::IMAP::NoResponseError is raised if a mailbox with the name
<tt>mailbox</tt> cannot be renamed to <tt>newname</tt> for whatever reason;
for instance, because <tt>mailbox</tt> does not exist, or because there is
already a mailbox with the name <tt>newname</tt>.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


478
479
480</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 478</span>

<span class='kw'>def</span> <span class='id rename'>rename</span><span class='lparen'>(</span><span class='id mailbox'>mailbox</span><span class='comma'>,</span> <span class='id newname'>newname</span><span class='rparen'>)</span>
  <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RENAME</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='comma'>,</span> <span class='id newname'>newname</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="search-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>search</strong>(keys, charset = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a SEARCH command to search the mailbox for messages that match the
given searching criteria, and returns message sequence numbers. 
<tt>keys</tt> can either be a string holding the entire search string, or a
single-dimension array of search keywords and arguments.  The following are
some common search criteria; see [IMAP] section 6.4.4 for a full list.</p>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>&lt;message set&gt;</p></td>
<td>
<p>a set of message sequence numbers.  ',' indicates an interval, ':'
indicates a range.  For instance, '2,10:12,15' means "2,10,11,12,15".</p>
</td></tr><tr><td class="rdoc-term"><p>BEFORE &lt;date&gt;</p></td>
<td>
<p>messages with an internal date strictly before &lt;date&gt;.  The date
argument has a format similar to 8-Aug-2002.</p>
</td></tr><tr><td class="rdoc-term"><p>BODY &lt;string&gt;</p></td>
<td>
<p>messages that contain &lt;string&gt; within their body.</p>
</td></tr><tr><td class="rdoc-term"><p>CC &lt;string&gt;</p></td>
<td>
<p>messages containing &lt;string&gt; in their CC field.</p>
</td></tr><tr><td class="rdoc-term"><p>FROM &lt;string&gt;</p></td>
<td>
<p>messages that contain &lt;string&gt; in their FROM field.</p>
</td></tr><tr><td class="rdoc-term"><p>NEW</p></td>
<td>
<p>messages with the Recent, but not the Seen, flag set.</p>
</td></tr><tr><td class="rdoc-term"><p>NOT &lt;search-key&gt;</p></td>
<td>
<p>negate the following search key.</p>
</td></tr><tr><td class="rdoc-term"><p>OR &lt;search-key&gt; &lt;search-key&gt;</p></td>
<td>
<p>"or" two search keys together.</p>
</td></tr><tr><td class="rdoc-term"><p>ON &lt;date&gt;</p></td>
<td>
<p>messages with an internal date exactly equal to &lt;date&gt;, which has a
format similar to 8-Aug-2002.</p>
</td></tr><tr><td class="rdoc-term"><p>SINCE &lt;date&gt;</p></td>
<td>
<p>messages with an internal date on or after &lt;date&gt;.</p>
</td></tr><tr><td class="rdoc-term"><p>SUBJECT &lt;string&gt;</p></td>
<td>
<p>messages with &lt;string&gt; in their subject.</p>
</td></tr><tr><td class="rdoc-term"><p>TO &lt;string&gt;</p></td>
<td>
<p>messages with &lt;string&gt; in their TO field.</p>
</td></tr></table>

<p>For example:</p>

<pre class="code"><span class='id p'>p</span> <span class='id imap'>imap</span><span class='period'>.</span><span class='id search'>search</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SUBJECT</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NOT</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NEW</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='comment'>#=&gt; [1, 6, 7, 8]</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


751
752
753</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 751</span>

<span class='kw'>def</span> <span class='id search'>search</span><span class='lparen'>(</span><span class='id keys'>keys</span><span class='comma'>,</span> <span class='id charset'>charset</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id search_internal'>search_internal</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SEARCH</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id keys'>keys</span><span class='comma'>,</span> <span class='id charset'>charset</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="search_internal-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>search_internal</strong>(cmd, keys, charset) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1310
1311
1312
1313
1314
1315
1316
1317
1318
1319
1320
1321
1322
1323
1324</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1310</span>

<span class='kw'>def</span> <span class='id search_internal'>search_internal</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='comma'>,</span> <span class='id keys'>keys</span><span class='comma'>,</span> <span class='id charset'>charset</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id keys'>keys</span><span class='period'>.</span><span class='id instance_of?'>instance_of?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>
    <span class='id keys'>keys</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='const'>RawData</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id keys'>keys</span><span class='rparen'>)</span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='id normalize_searching_criteria'>normalize_searching_criteria</span><span class='lparen'>(</span><span class='id keys'>keys</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='id charset'>charset</span>
      <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>CHARSET</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id charset'>charset</span><span class='comma'>,</span> <span class='op'>*</span><span class='id keys'>keys</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='comma'>,</span> <span class='op'>*</span><span class='id keys'>keys</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>return</span> <span class='ivar'>@responses</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SEARCH</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="select-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>select</strong>(mailbox) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a SELECT command to select a <tt>mailbox</tt> so that messages in the
<tt>mailbox</tt> can be accessed.</p>

<p>After you have selected a mailbox, you may retrieve the number of items in
that mailbox from @responses["EXISTS"][-1], and the number of recent
messages from @responses["RECENT"][-1]. Note that these values can change
if new messages arrive during a session; see #add_response_handler() for a
way of detecting this event.</p>

<p>A Net::IMAP::NoResponseError is raised if the mailbox does not exist or is
for some reason non-selectable.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


434
435
436
437
438
439</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 434</span>

<span class='kw'>def</span> <span class='id select'>select</span><span class='lparen'>(</span><span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@responses</span><span class='period'>.</span><span class='id clear'>clear</span>
    <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_command-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>send_command</strong>(cmd, *args, &amp;block) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1166
1167
1168
1169
1170
1171
1172
1173
1174
1175
1176
1177
1178
1179
1180
1181
1182
1183
1184
1185
1186
1187
1188
1189
1190
1191
1192</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1166</span>

<span class='kw'>def</span> <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='comma'>,</span> <span class='op'>*</span><span class='id args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id args'>args</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span>
      <span class='id validate_data'>validate_data</span><span class='lparen'>(</span><span class='id i'>i</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id tag'>tag</span> <span class='op'>=</span> <span class='id generate_tag'>generate_tag</span>
    <span class='id put_string'>put_string</span><span class='lparen'>(</span><span class='id tag'>tag</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id cmd'>cmd</span><span class='rparen'>)</span>
    <span class='id args'>args</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span>
      <span class='id put_string'>put_string</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id send_data'>send_data</span><span class='lparen'>(</span><span class='id i'>i</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id put_string'>put_string</span><span class='lparen'>(</span><span class='const'>CRLF</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id cmd'>cmd</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LOGOUT</span><span class='tstring_end'>&quot;</span></span>
      <span class='ivar'>@logout_command_tag</span> <span class='op'>=</span> <span class='id tag'>tag</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id block'>block</span>
      <span class='id add_response_handler'>add_response_handler</span><span class='lparen'>(</span><span class='id block'>block</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>begin</span>
      <span class='kw'>return</span> <span class='id get_tagged_response'>get_tagged_response</span><span class='lparen'>(</span><span class='id tag'>tag</span><span class='comma'>,</span> <span class='id cmd'>cmd</span><span class='rparen'>)</span>
    <span class='kw'>ensure</span>
      <span class='kw'>if</span> <span class='id block'>block</span>
        <span class='id remove_response_handler'>remove_response_handler</span><span class='lparen'>(</span><span class='id block'>block</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_data-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>send_data</strong>(data) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1233
1234
1235
1236
1237
1238
1239
1240
1241
1242
1243
1244
1245
1246
1247
1248
1249
1250</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1233</span>

<span class='kw'>def</span> <span class='id send_data'>send_data</span><span class='lparen'>(</span><span class='id data'>data</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id data'>data</span>
  <span class='kw'>when</span> <span class='kw'>nil</span>
    <span class='id put_string'>put_string</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NIL</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='const'>String</span>
    <span class='id send_string_data'>send_string_data</span><span class='lparen'>(</span><span class='id data'>data</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='const'>Integer</span>
    <span class='id send_number_data'>send_number_data</span><span class='lparen'>(</span><span class='id data'>data</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='const'>Array</span>
    <span class='id send_list_data'>send_list_data</span><span class='lparen'>(</span><span class='id data'>data</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='const'>Time</span>
    <span class='id send_time_data'>send_time_data</span><span class='lparen'>(</span><span class='id data'>data</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='const'>Symbol</span>
    <span class='id send_symbol_data'>send_symbol_data</span><span class='lparen'>(</span><span class='id data'>data</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id data'>data</span><span class='period'>.</span><span class='id send_data'>send_data</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_list_data-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>send_list_data</strong>(list) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1282
1283
1284
1285
1286
1287
1288
1289
1290
1291
1292
1293
1294</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1282</span>

<span class='kw'>def</span> <span class='id send_list_data'>send_list_data</span><span class='lparen'>(</span><span class='id list'>list</span><span class='rparen'>)</span>
  <span class='id put_string'>put_string</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id first'>first</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id list'>list</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id first'>first</span>
      <span class='id first'>first</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>else</span>
      <span class='id put_string'>put_string</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id send_data'>send_data</span><span class='lparen'>(</span><span class='id i'>i</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id put_string'>put_string</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_literal-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>send_literal</strong>(str) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>@exception</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1271
1272
1273
1274
1275
1276</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1271</span>

<span class='kw'>def</span> <span class='id send_literal'>send_literal</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
  <span class='id put_string'>put_string</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>{</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id str'>str</span><span class='period'>.</span><span class='id bytesize'>bytesize</span><span class='period'>.</span><span class='id to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>}</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='const'>CRLF</span><span class='rparen'>)</span>
  <span class='ivar'>@continuation_request_arrival</span><span class='period'>.</span><span class='id wait'>wait</span>
  <span class='id raise'>raise</span> <span class='ivar'>@exception</span> <span class='kw'>if</span> <span class='ivar'>@exception</span>
  <span class='id put_string'>put_string</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_number_data-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>send_number_data</strong>(num) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1278
1279
1280</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1278</span>

<span class='kw'>def</span> <span class='id send_number_data'>send_number_data</span><span class='lparen'>(</span><span class='id num'>num</span><span class='rparen'>)</span>
  <span class='id put_string'>put_string</span><span class='lparen'>(</span><span class='id num'>num</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_quoted_string-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>send_quoted_string</strong>(str) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1267
1268
1269</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1267</span>

<span class='kw'>def</span> <span class='id send_quoted_string'>send_quoted_string</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
  <span class='id put_string'>put_string</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>'</span></span> <span class='op'>+</span> <span class='id str'>str</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[&quot;\\]</span><span class='regexp_end'>/n</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\\\\\&amp;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_string_data-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>send_string_data</strong>(str) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1252
1253
1254
1255
1256
1257
1258
1259
1260
1261
1262
1263
1264
1265</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1252</span>

<span class='kw'>def</span> <span class='id send_string_data'>send_string_data</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id str'>str</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id put_string'>put_string</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&quot;&quot;</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[\x80-\xff\r\n]</span><span class='regexp_end'>/n</span></span>
    <span class='comment'># literal
</span>    <span class='id send_literal'>send_literal</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[(){ \x00-\x1f\x7f%*&quot;\\]</span><span class='regexp_end'>/n</span></span>
    <span class='comment'># quoted string
</span>    <span class='id send_quoted_string'>send_quoted_string</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id put_string'>put_string</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_symbol_data-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>send_symbol_data</strong>(symbol) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1306
1307
1308</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1306</span>

<span class='kw'>def</span> <span class='id send_symbol_data'>send_symbol_data</span><span class='lparen'>(</span><span class='id symbol'>symbol</span><span class='rparen'>)</span>
  <span class='id put_string'>put_string</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id symbol'>symbol</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_time_data-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>send_time_data</strong>(time) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1298
1299
1300
1301
1302
1303
1304</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1298</span>

<span class='kw'>def</span> <span class='id send_time_data'>send_time_data</span><span class='lparen'>(</span><span class='id time'>time</span><span class='rparen'>)</span>
  <span class='id t'>t</span> <span class='op'>=</span> <span class='id time'>time</span><span class='period'>.</span><span class='id dup'>dup</span><span class='period'>.</span><span class='id gmtime'>gmtime</span>
  <span class='id s'>s</span> <span class='op'>=</span> <span class='id format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&quot;%2d-%3s-%4d %02d:%02d:%02d +0000&quot;</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
             <span class='id t'>t</span><span class='period'>.</span><span class='id day'>day</span><span class='comma'>,</span> <span class='const'>DATE_MONTH</span><span class='lbracket'>[</span><span class='id t'>t</span><span class='period'>.</span><span class='id month'>month</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id t'>t</span><span class='period'>.</span><span class='id year'>year</span><span class='comma'>,</span>
             <span class='id t'>t</span><span class='period'>.</span><span class='id hour'>hour</span><span class='comma'>,</span> <span class='id t'>t</span><span class='period'>.</span><span class='id min'>min</span><span class='comma'>,</span> <span class='id t'>t</span><span class='period'>.</span><span class='id sec'>sec</span><span class='rparen'>)</span>
  <span class='id put_string'>put_string</span><span class='lparen'>(</span><span class='id s'>s</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="setacl-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>setacl</strong>(mailbox, user, rights) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends the SETACL command along with <tt>mailbox</tt>, <tt>user</tt> and the
<tt>rights</tt> that user is to have on that mailbox.  If <tt>rights</tt>
is nil, then that user will be stripped of any rights to that mailbox. The
IMAP ACL commands are described in [RFC-2086].</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


606
607
608
609
610
611
612</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 606</span>

<span class='kw'>def</span> <span class='id setacl'>setacl</span><span class='lparen'>(</span><span class='id mailbox'>mailbox</span><span class='comma'>,</span> <span class='id user'>user</span><span class='comma'>,</span> <span class='id rights'>rights</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id rights'>rights</span><span class='period'>.</span><span class='id nil?'>nil?</span>
    <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SETACL</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='comma'>,</span> <span class='id user'>user</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SETACL</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='comma'>,</span> <span class='id user'>user</span><span class='comma'>,</span> <span class='id rights'>rights</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="setquota-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>setquota</strong>(mailbox, quota) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a SETQUOTA command along with the specified <tt>mailbox</tt> and
<tt>quota</tt>.  If <tt>quota</tt> is nil, then quota will be unset for
that mailbox.  Typically one needs to be logged in as server admin for this
to work.  The IMAP quota commands are described in [RFC-2087].</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


593
594
595
596
597
598
599
600</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 593</span>

<span class='kw'>def</span> <span class='id setquota'>setquota</span><span class='lparen'>(</span><span class='id mailbox'>mailbox</span><span class='comma'>,</span> <span class='id quota'>quota</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id quota'>quota</span><span class='period'>.</span><span class='id nil?'>nil?</span>
    <span class='id data'>data</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>()</span><span class='tstring_end'>'</span></span>
  <span class='kw'>else</span>
    <span class='id data'>data</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>(STORAGE </span><span class='tstring_end'>'</span></span> <span class='op'>+</span> <span class='id quota'>quota</span><span class='period'>.</span><span class='id to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>)</span><span class='tstring_end'>'</span></span>
  <span class='kw'>end</span>
  <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SETQUOTA</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='comma'>,</span> <span class='const'>RawData</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id data'>data</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="sort-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>sort</strong>(sort_keys, search_keys, charset) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a SORT command to sort messages in the mailbox. Returns an array of
message sequence numbers. For example:</p>

<pre class="code"><span class='id p'>p</span> <span class='id imap'>imap</span><span class='period'>.</span><span class='id sort'>sort</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FROM</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ALL</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>US-ASCII</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='comment'>#=&gt; [1, 2, 3, 5, 6, 7, 8, 4, 9]
</span><span class='id p'>p</span> <span class='id imap'>imap</span><span class='period'>.</span><span class='id sort'>sort</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DATE</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SUBJECT</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hello</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>US-ASCII</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='comment'>#=&gt; [6, 7, 8, 1]</span></pre>

<p>See [SORT-THREAD-EXT] for more details.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


837
838
839</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 837</span>

<span class='kw'>def</span> <span class='id sort'>sort</span><span class='lparen'>(</span><span class='id sort_keys'>sort_keys</span><span class='comma'>,</span> <span class='id search_keys'>search_keys</span><span class='comma'>,</span> <span class='id charset'>charset</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id sort_internal'>sort_internal</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SORT</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id sort_keys'>sort_keys</span><span class='comma'>,</span> <span class='id search_keys'>search_keys</span><span class='comma'>,</span> <span class='id charset'>charset</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="sort_internal-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>sort_internal</strong>(cmd, sort_keys, search_keys, charset) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1358
1359
1360
1361
1362
1363
1364
1365
1366
1367
1368
1369</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1358</span>

<span class='kw'>def</span> <span class='id sort_internal'>sort_internal</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='comma'>,</span> <span class='id sort_keys'>sort_keys</span><span class='comma'>,</span> <span class='id search_keys'>search_keys</span><span class='comma'>,</span> <span class='id charset'>charset</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id search_keys'>search_keys</span><span class='period'>.</span><span class='id instance_of?'>instance_of?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>
    <span class='id search_keys'>search_keys</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='const'>RawData</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id search_keys'>search_keys</span><span class='rparen'>)</span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='id normalize_searching_criteria'>normalize_searching_criteria</span><span class='lparen'>(</span><span class='id search_keys'>search_keys</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id normalize_searching_criteria'>normalize_searching_criteria</span><span class='lparen'>(</span><span class='id search_keys'>search_keys</span><span class='rparen'>)</span>
  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='comma'>,</span> <span class='id sort_keys'>sort_keys</span><span class='comma'>,</span> <span class='id charset'>charset</span><span class='comma'>,</span> <span class='op'>*</span><span class='id search_keys'>search_keys</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='ivar'>@responses</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SORT</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="start_tls_session-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>start_tls_session</strong>(params = {}) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1410
1411
1412
1413
1414
1415
1416
1417
1418
1419
1420
1421
1422
1423
1424
1425
1426
1427
1428
1429
1430
1431
1432
1433</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1410</span>

<span class='kw'>def</span> <span class='id start_tls_session'>start_tls_session</span><span class='lparen'>(</span><span class='id params'>params</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>OpenSSL</span><span class='rparen'>)</span>
    <span class='id raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SSL extension not installed</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='ivar'>@sock</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>SSL</span><span class='op'>::</span><span class='const'>SSLSocket</span><span class='rparen'>)</span>
    <span class='id raise'>raise</span> <span class='const'>RuntimeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>already using SSL</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>begin</span>
    <span class='id params'>params</span> <span class='op'>=</span> <span class='id params'>params</span><span class='period'>.</span><span class='id to_hash'>to_hash</span>
  <span class='kw'>rescue</span> <span class='const'>NoMethodError</span>
    <span class='id params'>params</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='id context'>context</span> <span class='op'>=</span> <span class='const'>SSLContext</span><span class='period'>.</span><span class='id new'>new</span>
  <span class='id context'>context</span><span class='period'>.</span><span class='id set_params'>set_params</span><span class='lparen'>(</span><span class='id params'>params</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>VerifyCallbackProc</span><span class='rparen'>)</span>
    <span class='id context'>context</span><span class='period'>.</span><span class='id verify_callback'>verify_callback</span> <span class='op'>=</span> <span class='const'>VerifyCallbackProc</span>
  <span class='kw'>end</span>
  <span class='ivar'>@sock</span> <span class='op'>=</span> <span class='const'>SSLSocket</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='ivar'>@sock</span><span class='comma'>,</span> <span class='id context'>context</span><span class='rparen'>)</span>
  <span class='ivar'>@sock</span><span class='period'>.</span><span class='id sync_close'>sync_close</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='ivar'>@sock</span><span class='period'>.</span><span class='id connect'>connect</span>
  <span class='kw'>if</span> <span class='id context'>context</span><span class='period'>.</span><span class='id verify_mode'>verify_mode</span> <span class='op'>!=</span> <span class='const'>VERIFY_NONE</span>
    <span class='ivar'>@sock</span><span class='period'>.</span><span class='id post_connection_check'>post_connection_check</span><span class='lparen'>(</span><span class='ivar'>@host</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="starttls-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>starttls</strong>(options = {}, verify = true) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a STARTTLS command to start TLS session.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


356
357
358
359
360
361
362
363
364
365
366
367
368</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 356</span>

<span class='kw'>def</span> <span class='id starttls'>starttls</span><span class='lparen'>(</span><span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id verify'>verify</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>STARTTLS</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id resp'>resp</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>TaggedResponse</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id resp'>resp</span><span class='period'>.</span><span class='id name'>name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OK</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>begin</span>
        <span class='comment'># for backward compatibility
</span>        <span class='id certs'>certs</span> <span class='op'>=</span> <span class='id options'>options</span><span class='period'>.</span><span class='id to_str'>to_str</span>
        <span class='id options'>options</span> <span class='op'>=</span> <span class='id create_ssl_params'>create_ssl_params</span><span class='lparen'>(</span><span class='id certs'>certs</span><span class='comma'>,</span> <span class='id verify'>verify</span><span class='rparen'>)</span>
      <span class='kw'>rescue</span> <span class='const'>NoMethodError</span>
      <span class='kw'>end</span>
      <span class='id start_tls_session'>start_tls_session</span><span class='lparen'>(</span><span class='id options'>options</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="status-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>status</strong>(mailbox, attr) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a STATUS command, and returns the status of the indicated
<tt>mailbox</tt>. <tt>attr</tt> is a list of one or more attributes that we
are request the status of.  Supported attributes include:</p>

<pre class="code">MESSAGES:: the number of messages in the mailbox.
RECENT:: the number of recent messages in the mailbox.
UNSEEN:: the number of unseen messages in the mailbox.</pre>

<p>The return value is a hash of attributes. For example:</p>

<pre class="code"><span class='id p'>p</span> <span class='id imap'>imap</span><span class='period'>.</span><span class='id status'>status</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>inbox</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MESSAGES</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RECENT</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='comment'>#=&gt; {&quot;RECENT&quot;=&gt;0, &quot;MESSAGES&quot;=&gt;44}</span></pre>

<p>A Net::IMAP::NoResponseError is raised if status values for
<tt>mailbox</tt> cannot be returned, for instance because it does not
exist.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


652
653
654
655
656
657</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 652</span>

<span class='kw'>def</span> <span class='id status'>status</span><span class='lparen'>(</span><span class='id mailbox'>mailbox</span><span class='comma'>,</span> <span class='id attr'>attr</span><span class='rparen'>)</span>
  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>STATUS</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='comma'>,</span> <span class='id attr'>attr</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='ivar'>@responses</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>STATUS</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id attr'>attr</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="store-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>store</strong>(set, attr, flags) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a STORE command to alter data associated with messages in the
mailbox, in particular their flags. The <tt>set</tt> parameter is a number
or an array of numbers or a Range object. Each number is a message sequence
number.  <tt>attr</tt> is the name of a data item to store: 'FLAGS' means
to replace the message's flag list with the provided one; '+FLAGS' means to
add the provided flags; and '-FLAGS' means to remove them.  <tt>flags</tt>
is a list of flags.</p>

<p>The return value is an array of Net::IMAP::FetchData. For example:</p>

<pre class="code"><span class='id p'>p</span> <span class='id imap'>imap</span><span class='period'>.</span><span class='id store'>store</span><span class='lparen'>(</span><span class='int'>6</span><span class='op'>..</span><span class='int'>8</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>+FLAGS</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:Deleted</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='comment'>#=&gt; [#&lt;Net::IMAP::FetchData seqno=6, attr={&quot;FLAGS&quot;=&gt;[:Seen, :Deleted]}&gt;, \\
</span>     <span class='comment'>#&lt;Net::IMAP::FetchData seqno=7, attr={&quot;FLAGS&quot;=&gt;[:Seen, :Deleted]}&gt;, \\
</span>     <span class='comment'>#&lt;Net::IMAP::FetchData seqno=8, attr={&quot;FLAGS&quot;=&gt;[:Seen, :Deleted]}&gt;]</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


806
807
808</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 806</span>

<span class='kw'>def</span> <span class='id store'>store</span><span class='lparen'>(</span><span class='id set'>set</span><span class='comma'>,</span> <span class='id attr'>attr</span><span class='comma'>,</span> <span class='id flags'>flags</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id store_internal'>store_internal</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>STORE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id set'>set</span><span class='comma'>,</span> <span class='id attr'>attr</span><span class='comma'>,</span> <span class='id flags'>flags</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="store_internal-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>store_internal</strong>(cmd, set, attr, flags) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1343
1344
1345
1346
1347
1348
1349
1350
1351
1352</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1343</span>

<span class='kw'>def</span> <span class='id store_internal'>store_internal</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='comma'>,</span> <span class='id set'>set</span><span class='comma'>,</span> <span class='id attr'>attr</span><span class='comma'>,</span> <span class='id flags'>flags</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id attr'>attr</span><span class='period'>.</span><span class='id instance_of?'>instance_of?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>
    <span class='id attr'>attr</span> <span class='op'>=</span> <span class='const'>RawData</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id attr'>attr</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@responses</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FETCH</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='comma'>,</span> <span class='const'>MessageSet</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id set'>set</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id attr'>attr</span><span class='comma'>,</span> <span class='id flags'>flags</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='ivar'>@responses</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FETCH</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="subscribe-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>subscribe</strong>(mailbox) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a SUBSCRIBE command to add the specified <tt>mailbox</tt> name to the
server's set of "active" or "subscribed" mailboxes as returned by #lsub().</p>

<p>A Net::IMAP::NoResponseError is raised if <tt>mailbox</tt> cannot be
subscribed to, for instance because it does not exist.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


488
489
490</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 488</span>

<span class='kw'>def</span> <span class='id subscribe'>subscribe</span><span class='lparen'>(</span><span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
  <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SUBSCRIBE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="thread-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>thread</strong>(algorithm, search_keys, charset) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>As for #search(), but returns message sequence numbers in threaded format,
as a Net::IMAP::ThreadMember tree.  The supported algorithms are:</p>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>ORDEREDSUBJECT</p></td>
<td>
<p>split into single-level threads according to subject, ordered by date.</p>
</td></tr><tr><td class="rdoc-term"><p>REFERENCES</p></td>
<td>
<p>split into threads by parent/child relationships determined by which
message is a reply to which.</p>
</td></tr></table>

<p>Unlike #search(), <tt>charset</tt> is a required argument.  US-ASCII and
UTF-8 are sample values.</p>

<p>See [SORT-THREAD-EXT] for more details.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


880
881
882</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 880</span>

<span class='kw'>def</span> <span class='id thread'>thread</span><span class='lparen'>(</span><span class='id algorithm'>algorithm</span><span class='comma'>,</span> <span class='id search_keys'>search_keys</span><span class='comma'>,</span> <span class='id charset'>charset</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id thread_internal'>thread_internal</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>THREAD</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id algorithm'>algorithm</span><span class='comma'>,</span> <span class='id search_keys'>search_keys</span><span class='comma'>,</span> <span class='id charset'>charset</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="thread_internal-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>thread_internal</strong>(cmd, algorithm, search_keys, charset) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1371
1372
1373
1374
1375
1376
1377
1378
1379
1380</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1371</span>

<span class='kw'>def</span> <span class='id thread_internal'>thread_internal</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='comma'>,</span> <span class='id algorithm'>algorithm</span><span class='comma'>,</span> <span class='id search_keys'>search_keys</span><span class='comma'>,</span> <span class='id charset'>charset</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id search_keys'>search_keys</span><span class='period'>.</span><span class='id instance_of?'>instance_of?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>
    <span class='id search_keys'>search_keys</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='const'>RawData</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id search_keys'>search_keys</span><span class='rparen'>)</span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='id normalize_searching_criteria'>normalize_searching_criteria</span><span class='lparen'>(</span><span class='id search_keys'>search_keys</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id normalize_searching_criteria'>normalize_searching_criteria</span><span class='lparen'>(</span><span class='id search_keys'>search_keys</span><span class='rparen'>)</span>
  <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='id cmd'>cmd</span><span class='comma'>,</span> <span class='id algorithm'>algorithm</span><span class='comma'>,</span> <span class='id charset'>charset</span><span class='comma'>,</span> <span class='op'>*</span><span class='id search_keys'>search_keys</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='ivar'>@responses</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>THREAD</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="uid_copy-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>uid_copy</strong>(set, mailbox) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>As for #copy(), but <tt>set</tt> contains unique identifiers.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


824
825
826</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 824</span>

<span class='kw'>def</span> <span class='id uid_copy'>uid_copy</span><span class='lparen'>(</span><span class='id set'>set</span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
  <span class='id copy_internal'>copy_internal</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UID COPY</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id set'>set</span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="uid_fetch-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>uid_fetch</strong>(set, attr) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>As for #fetch(), but <tt>set</tt> contains unique identifiers.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


788
789
790</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 788</span>

<span class='kw'>def</span> <span class='id uid_fetch'>uid_fetch</span><span class='lparen'>(</span><span class='id set'>set</span><span class='comma'>,</span> <span class='id attr'>attr</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id fetch_internal'>fetch_internal</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UID FETCH</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id set'>set</span><span class='comma'>,</span> <span class='id attr'>attr</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="uid_search-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>uid_search</strong>(keys, charset = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>As for #search(), but returns unique identifiers.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


756
757
758</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 756</span>

<span class='kw'>def</span> <span class='id uid_search'>uid_search</span><span class='lparen'>(</span><span class='id keys'>keys</span><span class='comma'>,</span> <span class='id charset'>charset</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id search_internal'>search_internal</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UID SEARCH</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id keys'>keys</span><span class='comma'>,</span> <span class='id charset'>charset</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="uid_sort-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>uid_sort</strong>(sort_keys, search_keys, charset) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>As for #sort(), but returns an array of unique identifiers.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


842
843
844</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 842</span>

<span class='kw'>def</span> <span class='id uid_sort'>uid_sort</span><span class='lparen'>(</span><span class='id sort_keys'>sort_keys</span><span class='comma'>,</span> <span class='id search_keys'>search_keys</span><span class='comma'>,</span> <span class='id charset'>charset</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id sort_internal'>sort_internal</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UID SORT</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id sort_keys'>sort_keys</span><span class='comma'>,</span> <span class='id search_keys'>search_keys</span><span class='comma'>,</span> <span class='id charset'>charset</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="uid_store-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>uid_store</strong>(set, attr, flags) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>As for #store(), but <tt>set</tt> contains unique identifiers.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


811
812
813</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 811</span>

<span class='kw'>def</span> <span class='id uid_store'>uid_store</span><span class='lparen'>(</span><span class='id set'>set</span><span class='comma'>,</span> <span class='id attr'>attr</span><span class='comma'>,</span> <span class='id flags'>flags</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id store_internal'>store_internal</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UID STORE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id set'>set</span><span class='comma'>,</span> <span class='id attr'>attr</span><span class='comma'>,</span> <span class='id flags'>flags</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="uid_thread-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>uid_thread</strong>(algorithm, search_keys, charset) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>As for #thread(), but returns unique identifiers instead of message
sequence numbers.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


886
887
888</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 886</span>

<span class='kw'>def</span> <span class='id uid_thread'>uid_thread</span><span class='lparen'>(</span><span class='id algorithm'>algorithm</span><span class='comma'>,</span> <span class='id search_keys'>search_keys</span><span class='comma'>,</span> <span class='id charset'>charset</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id thread_internal'>thread_internal</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UID THREAD</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id algorithm'>algorithm</span><span class='comma'>,</span> <span class='id search_keys'>search_keys</span><span class='comma'>,</span> <span class='id charset'>charset</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="unsubscribe-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>unsubscribe</strong>(mailbox) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a UNSUBSCRIBE command to remove the specified <tt>mailbox</tt> name
from the server's set of "active" or "subscribed" mailboxes.</p>

<p>A Net::IMAP::NoResponseError is raised if <tt>mailbox</tt> cannot be
unsubscribed from, for instance because the client is not currently
subscribed to it.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


498
499
500</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 498</span>

<span class='kw'>def</span> <span class='id unsubscribe'>unsubscribe</span><span class='lparen'>(</span><span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
  <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UNSUBSCRIBE</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="validate_data-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>validate_data</strong>(data) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1214
1215
1216
1217
1218
1219
1220
1221
1222
1223
1224
1225
1226
1227
1228
1229
1230
1231</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 1214</span>

<span class='kw'>def</span> <span class='id validate_data'>validate_data</span><span class='lparen'>(</span><span class='id data'>data</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id data'>data</span>
  <span class='kw'>when</span> <span class='kw'>nil</span>
  <span class='kw'>when</span> <span class='const'>String</span>
  <span class='kw'>when</span> <span class='const'>Integer</span>
    <span class='kw'>if</span> <span class='id data'>data</span> <span class='op'>&lt;</span> <span class='int'>0</span> <span class='op'>||</span> <span class='id data'>data</span> <span class='op'>&gt;=</span> <span class='int'>4294967296</span>
      <span class='id raise'>raise</span> <span class='const'>DataFormatError</span><span class='comma'>,</span> <span class='id num'>num</span><span class='period'>.</span><span class='id to_s'>to_s</span>
    <span class='kw'>end</span>
  <span class='kw'>when</span> <span class='const'>Array</span>
    <span class='id data'>data</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span>
      <span class='id validate_data'>validate_data</span><span class='lparen'>(</span><span class='id i'>i</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>when</span> <span class='const'>Time</span>
  <span class='kw'>when</span> <span class='const'>Symbol</span>
  <span class='kw'>else</span>
    <span class='id data'>data</span><span class='period'>.</span><span class='id validate'>validate</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="xlist-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>xlist</strong>(refname, mailbox) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends a XLIST command, and returns a subset of names from the complete set
of all names available to the client. <tt>refname</tt> provides a context
(for instance, a base directory in a directory-based mailbox hierarchy). 
<tt>mailbox</tt> specifies a mailbox or (via wildcards) mailboxes under
that context. Two wildcards may be used in <tt>mailbox</tt>: '*', which
matches all characters <b>including</b> the hierarchy delimiter (for
instance, '/' on a UNIX-hosted directory-based mailbox hierarchy); and '%',
which matches all characters <b>except</b> the hierarchy delimiter.</p>

<p>If <tt>refname</tt> is empty, <tt>mailbox</tt> is used directly to
determine which mailboxes to match.  If <tt>mailbox</tt> is empty, the root
name of <tt>refname</tt> and the hierarchy delimiter are returned.</p>

<p>The XLIST command is like the LIST command except that the flags returned
refer to the function of the folder/mailbox, e.g. :Sent</p>

<p>The return value is an array of <tt>Net::IMAP::MailboxList</tt>. For example:</p>

<pre class="code"><span class='id imap'>imap</span><span class='period'>.</span><span class='id create'>create</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo/bar</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id imap'>imap</span><span class='period'>.</span><span class='id create'>create</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo/baz</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id p'>p</span> <span class='id imap'>imap</span><span class='period'>.</span><span class='id xlist'>xlist</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo/%</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='comment'>#=&gt; [#&lt;Net::IMAP::MailboxList attr=[:Noselect], delim=&quot;/&quot;, name=&quot;foo/&quot;&gt;, \\
</span>     <span class='comment'>#&lt;Net::IMAP::MailboxList attr=[:Noinferiors, :Marked], delim=&quot;/&quot;, name=&quot;foo/bar&quot;&gt;, \\
</span>     <span class='comment'>#&lt;Net::IMAP::MailboxList attr=[:Noinferiors], delim=&quot;/&quot;, name=&quot;foo/baz&quot;&gt;]</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


556
557
558
559
560
561</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/imap.rb', line 556</span>

<span class='kw'>def</span> <span class='id xlist'>xlist</span><span class='lparen'>(</span><span class='id refname'>refname</span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
  <span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id send_command'>send_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>XLIST</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id refname'>refname</span><span class='comma'>,</span> <span class='id mailbox'>mailbox</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='ivar'>@responses</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>XLIST</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sat Sep  3 14:10:34 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.9.3).
</div>

  </body>
</html>