<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Net::SMTP
  
    &mdash; Ruby 1.9 Ruby Standard Library
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (S)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../Net.html" title="Net (module)">Net</a></span></span>
     &raquo; 
    <span class="title">SMTP</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Net::SMTP
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Net::SMTP</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/net/smtp.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<h1>Net::SMTP</h1>

<h2>What is This Library?</h2>

<p>This library provides functionality to send internet mail via SMTP, the
Simple Mail Transfer Protocol. For details of SMTP itself, see [RFC2821]
(<a
href="http://www.ietf.org/rfc/rfc2821.txt">www.ietf.org/rfc/rfc2821.txt</a>).</p>

<h2>What is This Library NOT?</h2>

<p>This library does NOT provide functions to compose internet mails. You must
create them by yourself. If you want better mail support, try RubyMail or
TMail. You can get both libraries from RAA. (<a
href="http://www.ruby-lang.org/en/raa.html">www.ruby-lang.org/en/raa.html</a>)</p>

<p>FYI: the official documentation on internet mail is: [RFC2822] (<a
href="http://www.ietf.org/rfc/rfc2822.txt">www.ietf.org/rfc/rfc2822.txt</a>).</p>

<h2>Examples</h2>

<h3>Sending Messages</h3>

<p>You must open a connection to an SMTP server before sending messages. The
first argument is the address of your SMTP server, and the second argument
is the port number. Using SMTP.start with a block is the simplest way to do
this. This way, the SMTP connection is closed automatically after the block
is executed.</p>

<pre class="code"><span class='id require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>net/smtp</span><span class='tstring_end'>'</span></span>
<span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id start'>start</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>your.smtp.server</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='int'>25</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id smtp'>smtp</span><span class='op'>|</span>
  <span class='comment'># Use the SMTP object smtp only in this block.
</span><span class='kw'>end</span></pre>

<p>Replace 'your.smtp.server' with your SMTP server. Normally your system
manager or internet provider supplies a server for you.</p>

<p>Then you can send messages.</p>

<pre class="code"><span class='id msgstr'>msgstr</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;END_OF_MESSAGE</span>
<span class='tstring_content'>From: Your Name &lt;your@mail.address&gt;
To: Destination Address &lt;someone@example.com&gt;
Subject: test message
Date: Sat, 23 Jun 2001 16:26:43 +0900
Message-Id: &lt;unique.message.id.string@example.com&gt;

This is a test message.
</span><span class='heredoc_end'>END_OF_MESSAGE
</span>
<span class='id require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>net/smtp</span><span class='tstring_end'>'</span></span>
<span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id start'>start</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>your.smtp.server</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='int'>25</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id smtp'>smtp</span><span class='op'>|</span>
  <span class='id smtp'>smtp</span><span class='period'>.</span><span class='id send_message'>send_message</span> <span class='id msgstr'>msgstr</span><span class='comma'>,</span>
                    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>your@mail.address</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
                    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>his_address@example.com</span><span class='tstring_end'>'</span></span>
<span class='kw'>end</span></pre>

<h3>Closing the Session</h3>

<p>You MUST close the SMTP session after sending messages, by calling the
#finish method:</p>

<pre class="code"><span class='comment'># using SMTP#finish
</span><span class='id smtp'>smtp</span> <span class='op'>=</span> <span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id start'>start</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>your.smtp.server</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='int'>25</span><span class='rparen'>)</span>
<span class='id smtp'>smtp</span><span class='period'>.</span><span class='id send_message'>send_message</span> <span class='id msgstr'>msgstr</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>from@address</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>to@address</span><span class='tstring_end'>'</span></span>
<span class='id smtp'>smtp</span><span class='period'>.</span><span class='id finish'>finish</span></pre>

<p>You can also use the block form of SMTP.start/SMTP#start.  This closes the
SMTP session automatically:</p>

<pre class="code"><span class='comment'># using block form of SMTP.start
</span><span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id start'>start</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>your.smtp.server</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='int'>25</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id smtp'>smtp</span><span class='op'>|</span>
  <span class='id smtp'>smtp</span><span class='period'>.</span><span class='id send_message'>send_message</span> <span class='id msgstr'>msgstr</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>from@address</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>to@address</span><span class='tstring_end'>'</span></span>
<span class='kw'>end</span></pre>

<p>I strongly recommend this scheme.  This form is simpler and more robust.</p>

<h3>HELO domain</h3>

<p>In almost all situations, you must provide a third argument to
SMTP.start/SMTP#start. This is the domain name which you are on (the host
to send mail from). It is called the "HELO domain". The SMTP server will
judge whether it should send or reject the SMTP session by inspecting the
HELO domain.</p>

<pre class="code">Net::SMTP.start('your.smtp.server', 25,
                'mail.from.domain') { |smtp| ... }</pre>

<h3>SMTP Authentication</h3>

<p>The Net::SMTP class supports three authentication schemes; PLAIN, LOGIN and
CRAM MD5.  (SMTP Authentication: [RFC2554]) To use SMTP authentication,
pass extra arguments to SMTP.start/SMTP#start.</p>

<pre class="code"><span class='comment'># PLAIN
</span><span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id start'>start</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>your.smtp.server</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='int'>25</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>mail.from.domain</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Your Account</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Your Password</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:plain</span><span class='rparen'>)</span>
<span class='comment'># LOGIN
</span><span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id start'>start</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>your.smtp.server</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='int'>25</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>mail.from.domain</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Your Account</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Your Password</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:login</span><span class='rparen'>)</span>

<span class='comment'># CRAM MD5
</span><span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id start'>start</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>your.smtp.server</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='int'>25</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>mail.from.domain</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Your Account</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Your Password</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:cram_md5</span><span class='rparen'>)</span></pre>


  </div>
</div>
<div class="tags">
  
</div><h2>Defined Under Namespace</h2>
<p class="children">
   
    
   
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="SMTP/Response.html" title="Net::SMTP::Response (class)">Response</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="Revision-constant" class="">Revision =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>%q$</span><span class='tstring_content'>Revision: 31710 </span><span class='tstring_end'>$</span></span><span class='period'>.</span><span class='id split'>split</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span></pre></dd>
      
        <dt id="DEFAULT_AUTH_TYPE-constant" class="">DEFAULT_AUTH_TYPE =
          
        </dt>
        <dd><pre class="code"><span class='symbol'>:plain</span></pre></dd>
      
        <dt id="IMASK-constant" class="">IMASK =
          
        </dt>
        <dd><pre class="code"><span class='int'>0x36</span></pre></dd>
      
        <dt id="OMASK-constant" class="">OMASK =
          
        </dt>
        <dd><pre class="code"><span class='int'>0x5c</span></pre></dd>
      
        <dt id="CRAM_BUFSIZE-constant" class="">CRAM_BUFSIZE =
          
        </dt>
        <dd><pre class="code"><span class='int'>64</span></pre></dd>
      
    </dl>
  


  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#address-instance_method" title="#address (instance method)">- (Object) <strong>address</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The address of the SMTP server to connect to.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#esmtp-instance_method" title="#esmtp (instance method)">- (Object) <strong>esmtp</strong> </a>
    

    
      (also: #esmtp?)
    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Set whether to use ESMTP or not.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#open_timeout-instance_method" title="#open_timeout (instance method)">- (Object) <strong>open_timeout</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Seconds to wait while attempting to open a connection.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#port-instance_method" title="#port (instance method)">- (Object) <strong>port</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The port number of the SMTP server to connect to.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_timeout-instance_method" title="#read_timeout (instance method)">- (Object) <strong>read_timeout</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Seconds to wait while reading one block (by one read(2) call).</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_port-class_method" title="default_port (class method)">+ (Object) <strong>default_port</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The default SMTP port number, 25.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_ssl_context-class_method" title="default_ssl_context (class method)">+ (Object) <strong>default_ssl_context</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_submission_port-class_method" title="default_submission_port (class method)">+ (Object) <strong>default_submission_port</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The default mail submission port number, 587.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_tls_port-class_method" title="default_tls_port (class method)">+ (Object) <strong>default_tls_port</strong> </a>
    

    
      (also: default_ssl_port)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The default SMTPS port number, 465.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start-class_method" title="start (class method)">+ (Object) <strong>start</strong>(address, port = nil, helo = 'localhost', user = nil, secret = nil, authtype = nil, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new Net::SMTP object and connects to the server.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#auth_cram_md5-instance_method" title="#auth_cram_md5 (instance method)">- (Object) <strong>auth_cram_md5</strong>(user, secret) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#auth_login-instance_method" title="#auth_login (instance method)">- (Object) <strong>auth_login</strong>(user, secret) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#auth_method-instance_method" title="#auth_method (instance method)">- (Object) <strong>auth_method</strong>(type) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#auth_plain-instance_method" title="#auth_plain (instance method)">- (Object) <strong>auth_plain</strong>(user, secret) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#authenticate-instance_method" title="#authenticate (instance method)">- (Object) <strong>authenticate</strong>(user, secret, authtype = DEFAULT_AUTH_TYPE) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#base64_encode-instance_method" title="#base64_encode (instance method)">- (Object) <strong>base64_encode</strong>(str) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#capable_auth_types-instance_method" title="#capable_auth_types (instance method)">- (Object) <strong>capable_auth_types</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns supported authentication methods on this server.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#capable_cram_md5_auth%3F-instance_method" title="#capable_cram_md5_auth? (instance method)">- (Boolean) <strong>capable_cram_md5_auth?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>true if server advertises AUTH CRAM-MD5.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#capable_login_auth%3F-instance_method" title="#capable_login_auth? (instance method)">- (Boolean) <strong>capable_login_auth?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>true if server advertises AUTH LOGIN.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#capable_plain_auth%3F-instance_method" title="#capable_plain_auth? (instance method)">- (Boolean) <strong>capable_plain_auth?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>true if server advertises AUTH PLAIN.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#capable_starttls%3F-instance_method" title="#capable_starttls? (instance method)">- (Boolean) <strong>capable_starttls?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>true if server advertises STARTTLS.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_auth_args-instance_method" title="#check_auth_args (instance method)">- (Object) <strong>check_auth_args</strong>(user, secret, authtype = DEFAULT_AUTH_TYPE) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_auth_continue-instance_method" title="#check_auth_continue (instance method)">- (Object) <strong>check_auth_continue</strong>(res) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_auth_method-instance_method" title="#check_auth_method (instance method)">- (Object) <strong>check_auth_method</strong>(type) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_auth_response-instance_method" title="#check_auth_response (instance method)">- (Object) <strong>check_auth_response</strong>(res) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_continue-instance_method" title="#check_continue (instance method)">- (Object) <strong>check_continue</strong>(res) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_response-instance_method" title="#check_response (instance method)">- (Object) <strong>check_response</strong>(res) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cram_md5_response-instance_method" title="#cram_md5_response (instance method)">- (Object) <strong>cram_md5_response</strong>(secret, challenge) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>CRAM-MD5: [RFC2195].</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cram_secret-instance_method" title="#cram_secret (instance method)">- (Object) <strong>cram_secret</strong>(secret, mask) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#critical-instance_method" title="#critical (instance method)">- (Object) <strong>critical</strong>(&amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#data-instance_method" title="#data (instance method)">- (Object) <strong>data</strong>(msgstr = nil, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>This method sends a message.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#debug_output%3D-instance_method" title="#debug_output= (instance method)">- (Object) <strong>debug_output=</strong>(arg) </a>
    

    
      (also: #set_debug_output)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>WARNING: This method causes serious security holes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#disable_starttls-instance_method" title="#disable_starttls (instance method)">- (Object) <strong>disable_starttls</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Disables SMTP/TLS (STARTTLS) for this object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#disable_tls-instance_method" title="#disable_tls (instance method)">- (Object) <strong>disable_tls</strong> </a>
    

    
      (also: #disable_ssl)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Disables SMTP/TLS for this object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#do_finish-instance_method" title="#do_finish (instance method)">- (Object) <strong>do_finish</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#do_helo-instance_method" title="#do_helo (instance method)">- (Object) <strong>do_helo</strong>(helo_domain) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#do_start-instance_method" title="#do_start (instance method)">- (Object) <strong>do_start</strong>(helo_domain, user, secret, authtype) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ehlo-instance_method" title="#ehlo (instance method)">- (Object) <strong>ehlo</strong>(domain) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enable_starttls-instance_method" title="#enable_starttls (instance method)">- (Object) <strong>enable_starttls</strong>(context = SMTP.default_ssl_context) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Enables SMTP/TLS (STARTTLS) for this object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enable_starttls_auto-instance_method" title="#enable_starttls_auto (instance method)">- (Object) <strong>enable_starttls_auto</strong>(context = SMTP.default_ssl_context) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Enables SMTP/TLS (STARTTLS) for this object if server accepts.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enable_tls-instance_method" title="#enable_tls (instance method)">- (Object) <strong>enable_tls</strong>(context = SMTP.default_ssl_context) </a>
    

    
      (also: #enable_ssl)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Enables SMTP/TLS (SMTPS: SMTP over direct TLS connection) for this object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#finish-instance_method" title="#finish (instance method)">- (Object) <strong>finish</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Finishes the SMTP session and closes TCP connection.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_response-instance_method" title="#get_response (instance method)">- (Object) <strong>get_response</strong>(reqline) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getok-instance_method" title="#getok (instance method)">- (Object) <strong>getok</strong>(reqline) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#helo-instance_method" title="#helo (instance method)">- (Object) <strong>helo</strong>(domain) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (SMTP) <strong>initialize</strong>(address, port = nil) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new Net::SMTP object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect-instance_method" title="#inspect (instance method)">- (Object) <strong>inspect</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Provide human-readable stringification of class state.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#logging-instance_method" title="#logging (instance method)">- (Object) <strong>logging</strong>(msg) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mailfrom-instance_method" title="#mailfrom (instance method)">- (Object) <strong>mailfrom</strong>(from_addr) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#new_internet_message_io-instance_method" title="#new_internet_message_io (instance method)">- (Object) <strong>new_internet_message_io</strong>(s) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#open_message_stream-instance_method" title="#open_message_stream (instance method)">- (Object) <strong>open_message_stream</strong>(from_addr, *to_addrs, &amp;block) </a>
    

    
      (also: #ready)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Opens a message writer stream and gives it to the block.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#quit-instance_method" title="#quit (instance method)">- (Object) <strong>quit</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rcptto-instance_method" title="#rcptto (instance method)">- (Object) <strong>rcptto</strong>(to_addr) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rcptto_list-instance_method" title="#rcptto_list (instance method)">- (Object) <strong>rcptto_list</strong>(to_addrs) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#recv_response-instance_method" title="#recv_response (instance method)">- (Object) <strong>recv_response</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_message-instance_method" title="#send_message (instance method)">- (Object) <strong>send_message</strong>(msgstr, from_addr, *to_addrs) </a>
    

    
      (also: #send_mail, #sendmail)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sends <tt>msgstr</tt> as a message.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ssl_socket-instance_method" title="#ssl_socket (instance method)">- (Object) <strong>ssl_socket</strong>(socket, context) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start-instance_method" title="#start (instance method)">- (Object) <strong>start</strong>(helo = 'localhost', user = nil, secret = nil, authtype = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Opens a TCP connection and starts the SMTP session.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#started%3F-instance_method" title="#started? (instance method)">- (Boolean) <strong>started?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p><tt>true</tt> if the SMTP session has been started.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#starttls-instance_method" title="#starttls (instance method)">- (Object) <strong>starttls</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#starttls%3F-instance_method" title="#starttls? (instance method)">- (Boolean) <strong>starttls?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns truth value if this object uses STARTTLS.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#starttls_always%3F-instance_method" title="#starttls_always? (instance method)">- (Boolean) <strong>starttls_always?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>true if this object uses STARTTLS.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#starttls_auto%3F-instance_method" title="#starttls_auto? (instance method)">- (Boolean) <strong>starttls_auto?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>true if this object uses STARTTLS when server advertises STARTTLS.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tcp_socket-instance_method" title="#tcp_socket (instance method)">- (Object) <strong>tcp_socket</strong>(address, port) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tls%3F-instance_method" title="#tls? (instance method)">- (Boolean) <strong>tls?</strong> </a>
    

    
      (also: #ssl?)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>true if this object uses SMTP/TLS (SMTPS).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tlsconnect-instance_method" title="#tlsconnect (instance method)">- (Object) <strong>tlsconnect</strong>(s) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Net::SMTP (class)">SMTP</a></span></tt>) <strong>initialize</strong>(address, port = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Creates a new Net::SMTP object.</p>

<p><tt>address</tt> is the hostname or ip address of your SMTP server. 
<tt>port</tt> is the port to connect to; it defaults to port 25.</p>

<p>This method does not open the TCP connection.  You can use SMTP.start
instead of SMTP.new if you want to do everything at once.  Otherwise,
follow SMTP.new with SMTP#start.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


211
212
213
214
215
216
217
218
219
220
221
222
223
224
225</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 211</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id address'>address</span><span class='comma'>,</span> <span class='id port'>port</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='ivar'>@address</span> <span class='op'>=</span> <span class='id address'>address</span>
  <span class='ivar'>@port</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id port'>port</span> <span class='op'>||</span> <span class='const'>SMTP</span><span class='period'>.</span><span class='id default_port'>default_port</span><span class='rparen'>)</span>
  <span class='ivar'>@esmtp</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='ivar'>@capabilities</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@socket</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@started</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@open_timeout</span> <span class='op'>=</span> <span class='int'>30</span>
  <span class='ivar'>@read_timeout</span> <span class='op'>=</span> <span class='int'>60</span>
  <span class='ivar'>@error_occured</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@debug_output</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@tls</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@starttls</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@ssl_context</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="address-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="address-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>address</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>The address of the SMTP server to connect to.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


360
361
362</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 360</span>

<span class='kw'>def</span> <span class='id address'>address</span>
  <span class='ivar'>@address</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="esmtp=-instance_method"></span>
      <span id="esmtp-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="esmtp-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>esmtp</strong> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='esmtp?-instance_method'>esmtp?</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    
<p>Set whether to use ESMTP or not.  This should be done before calling
#start.  Note that if #start is called in ESMTP mode, and the connection
fails due to a ProtocolError, the SMTP object will automatically switch to
plain SMTP mode and retry (but not vice versa).</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


239
240
241</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 239</span>

<span class='kw'>def</span> <span class='id esmtp'>esmtp</span>
  <span class='ivar'>@esmtp</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="open_timeout=-instance_method"></span>
      <span id="open_timeout-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="open_timeout-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>open_timeout</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Seconds to wait while attempting to open a connection. If the connection
cannot be opened within this time, a TimeoutError is raised.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


368
369
370</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 368</span>

<span class='kw'>def</span> <span class='id open_timeout'>open_timeout</span>
  <span class='ivar'>@open_timeout</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="port-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="port-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>port</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>The port number of the SMTP server to connect to.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


363
364
365</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 363</span>

<span class='kw'>def</span> <span class='id port'>port</span>
  <span class='ivar'>@port</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="read_timeout=-instance_method"></span>
      <span id="read_timeout-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="read_timeout-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>read_timeout</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Seconds to wait while reading one block (by one read(2) call). If the
read(2) call does not complete within this time, a TimeoutError is raised.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


373
374
375</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 373</span>

<span class='kw'>def</span> <span class='id read_timeout'>read_timeout</span>
  <span class='ivar'>@read_timeout</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="default_port-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>default_port</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>The default SMTP port number, 25.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


178
179
180</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 178</span>

<span class='kw'>def</span> <span class='const'>SMTP</span><span class='period'>.</span><span class='id default_port'>default_port</span>
  <span class='int'>25</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="default_ssl_context-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>default_ssl_context</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


196
197
198</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 196</span>

<span class='kw'>def</span> <span class='const'>SMTP</span><span class='period'>.</span><span class='id default_ssl_context'>default_ssl_context</span>
  <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>SSL</span><span class='op'>::</span><span class='const'>SSLContext</span><span class='period'>.</span><span class='id new'>new</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="default_submission_port-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>default_submission_port</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>The default mail submission port number, 587.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


183
184
185</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 183</span>

<span class='kw'>def</span> <span class='const'>SMTP</span><span class='period'>.</span><span class='id default_submission_port'>default_submission_port</span>
  <span class='int'>587</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="default_tls_port-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>default_tls_port</strong> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='default_ssl_port-class_method'>default_ssl_port</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    
<p>The default SMTPS port number, 465.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


188
189
190</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 188</span>

<span class='kw'>def</span> <span class='const'>SMTP</span><span class='period'>.</span><span class='id default_tls_port'>default_tls_port</span>
  <span class='int'>465</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="start-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>start</strong>(address, port = nil, helo = 'localhost', user = nil, secret = nil, authtype = nil, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Creates a new Net::SMTP object and connects to the server.</p>

<p>This method is equivalent to:</p>

<pre class="code"><span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id address'>address</span><span class='comma'>,</span> <span class='id port'>port</span><span class='rparen'>)</span><span class='period'>.</span><span class='id start'>start</span><span class='lparen'>(</span><span class='id helo_domain'>helo_domain</span><span class='comma'>,</span> <span class='id account'>account</span><span class='comma'>,</span> <span class='id password'>password</span><span class='comma'>,</span> <span class='id authtype'>authtype</span><span class='rparen'>)</span></pre>

<h3>Example</h3>

<pre class="code"><span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id start'>start</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>your.smtp.server</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id smtp'>smtp</span><span class='op'>|</span>
  <span class='id smtp'>smtp</span><span class='period'>.</span><span class='id send_message'>send_message</span> <span class='id msgstr'>msgstr</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>from@example.com</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>dest@example.com</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>

<h3>Block Usage</h3>

<p>If called with a block, the newly-opened Net::SMTP object is yielded to the
block, and automatically closed when the block finishes.  If called without
a block, the newly-opened Net::SMTP object is returned to the caller, and
it is the caller's responsibility to close it when finished.</p>

<h3>Parameters</h3>

<p><tt>address</tt> is the hostname or ip address of your smtp server.</p>

<p><tt>port</tt> is the port to connect to; it defaults to port 25.</p>

<p><tt>helo</tt> is the <em>HELO</em> <em>domain</em> provided by the client
to the server (see overview comments); it defaults to 'localhost'.</p>

<p>The remaining arguments are used for SMTP authentication, if required or
desired.  <tt>user</tt> is the account name; <tt>secret</tt> is your
password or other authentication token; and <tt>authtype</tt> is the
authentication type, one of :plain, :login, or :cram_md5.  See the
discussion of SMTP Authentication in the overview notes.</p>

<h3>Errors</h3>

<p>This method may raise:</p>
<ul><li>
<p>Net::SMTPAuthenticationError</p>
</li><li>
<p>Net::SMTPServerBusy</p>
</li><li>
<p>Net::SMTPSyntaxError</p>
</li><li>
<p>Net::SMTPFatalError</p>
</li><li>
<p>Net::SMTPUnknownError</p>
</li><li>
<p>IOError</p>
</li><li>
<p>TimeoutError</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


454
455
456
457
458</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 454</span>

<span class='kw'>def</span> <span class='const'>SMTP</span><span class='period'>.</span><span class='id start'>start</span><span class='lparen'>(</span><span class='id address'>address</span><span class='comma'>,</span> <span class='id port'>port</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id helo'>helo</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>localhost</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
               <span class='id user'>user</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id secret'>secret</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id authtype'>authtype</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>   <span class='comment'># :yield: smtp
</span>  <span class='id new'>new</span><span class='lparen'>(</span><span class='id address'>address</span><span class='comma'>,</span> <span class='id port'>port</span><span class='rparen'>)</span><span class='period'>.</span><span class='id start'>start</span><span class='lparen'>(</span><span class='id helo'>helo</span><span class='comma'>,</span> <span class='id user'>user</span><span class='comma'>,</span> <span class='id secret'>secret</span><span class='comma'>,</span> <span class='id authtype'>authtype</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="auth_cram_md5-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>auth_cram_md5</strong>(user, secret) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


752
753
754
755
756
757
758
759
760
761
762</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 752</span>

<span class='kw'>def</span> <span class='id auth_cram_md5'>auth_cram_md5</span><span class='lparen'>(</span><span class='id user'>user</span><span class='comma'>,</span> <span class='id secret'>secret</span><span class='rparen'>)</span>
  <span class='id check_auth_args'>check_auth_args</span> <span class='id user'>user</span><span class='comma'>,</span> <span class='id secret'>secret</span>
  <span class='id res'>res</span> <span class='op'>=</span> <span class='id critical'>critical</span> <span class='lbrace'>{</span>
    <span class='id res0'>res0</span> <span class='op'>=</span> <span class='id get_response'>get_response</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>AUTH CRAM-MD5</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
    <span class='id check_auth_continue'>check_auth_continue</span> <span class='id res0'>res0</span>
    <span class='id crammed'>crammed</span> <span class='op'>=</span> <span class='id cram_md5_response'>cram_md5_response</span><span class='lparen'>(</span><span class='id secret'>secret</span><span class='comma'>,</span> <span class='id res0'>res0</span><span class='period'>.</span><span class='id cram_md5_challenge'>cram_md5_challenge</span><span class='rparen'>)</span>
    <span class='id get_response'>get_response</span><span class='lparen'>(</span><span class='id base64_encode'>base64_encode</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id user'>user</span><span class='rbrace'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id crammed'>crammed</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='rbrace'>}</span>
  <span class='id check_auth_response'>check_auth_response</span> <span class='id res'>res</span>
  <span class='id res'>res</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="auth_login-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>auth_login</strong>(user, secret) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


741
742
743
744
745
746
747
748
749
750</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 741</span>

<span class='kw'>def</span> <span class='id auth_login'>auth_login</span><span class='lparen'>(</span><span class='id user'>user</span><span class='comma'>,</span> <span class='id secret'>secret</span><span class='rparen'>)</span>
  <span class='id check_auth_args'>check_auth_args</span> <span class='id user'>user</span><span class='comma'>,</span> <span class='id secret'>secret</span>
  <span class='id res'>res</span> <span class='op'>=</span> <span class='id critical'>critical</span> <span class='lbrace'>{</span>
    <span class='id check_auth_continue'>check_auth_continue</span> <span class='id get_response'>get_response</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>AUTH LOGIN</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
    <span class='id check_auth_continue'>check_auth_continue</span> <span class='id get_response'>get_response</span><span class='lparen'>(</span><span class='id base64_encode'>base64_encode</span><span class='lparen'>(</span><span class='id user'>user</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id get_response'>get_response</span><span class='lparen'>(</span><span class='id base64_encode'>base64_encode</span><span class='lparen'>(</span><span class='id secret'>secret</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='rbrace'>}</span>
  <span class='id check_auth_response'>check_auth_response</span> <span class='id res'>res</span>
  <span class='id res'>res</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="auth_method-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>auth_method</strong>(type) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


772
773
774</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 772</span>

<span class='kw'>def</span> <span class='id auth_method'>auth_method</span><span class='lparen'>(</span><span class='id type'>type</span><span class='rparen'>)</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>auth_</span><span class='embexpr_beg'>#{</span><span class='id type'>type</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='period'>.</span><span class='id downcase'>downcase</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id intern'>intern</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="auth_plain-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>auth_plain</strong>(user, secret) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


732
733
734
735
736
737
738
739</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 732</span>

<span class='kw'>def</span> <span class='id auth_plain'>auth_plain</span><span class='lparen'>(</span><span class='id user'>user</span><span class='comma'>,</span> <span class='id secret'>secret</span><span class='rparen'>)</span>
  <span class='id check_auth_args'>check_auth_args</span> <span class='id user'>user</span><span class='comma'>,</span> <span class='id secret'>secret</span>
  <span class='id res'>res</span> <span class='op'>=</span> <span class='id critical'>critical</span> <span class='lbrace'>{</span>
    <span class='id get_response'>get_response</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>AUTH PLAIN </span><span class='tstring_end'>'</span></span> <span class='op'>+</span> <span class='id base64_encode'>base64_encode</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\0</span><span class='embexpr_beg'>#{</span><span class='id user'>user</span><span class='rbrace'>}</span><span class='tstring_content'>\0</span><span class='embexpr_beg'>#{</span><span class='id secret'>secret</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='rbrace'>}</span>
  <span class='id check_auth_response'>check_auth_response</span> <span class='id res'>res</span>
  <span class='id res'>res</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="authenticate-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>authenticate</strong>(user, secret, authtype = DEFAULT_AUTH_TYPE) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


726
727
728
729
730</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 726</span>

<span class='kw'>def</span> <span class='id authenticate'>authenticate</span><span class='lparen'>(</span><span class='id user'>user</span><span class='comma'>,</span> <span class='id secret'>secret</span><span class='comma'>,</span> <span class='id authtype'>authtype</span> <span class='op'>=</span> <span class='const'>DEFAULT_AUTH_TYPE</span><span class='rparen'>)</span>
  <span class='id check_auth_method'>check_auth_method</span> <span class='id authtype'>authtype</span>
  <span class='id check_auth_args'>check_auth_args</span> <span class='id user'>user</span><span class='comma'>,</span> <span class='id secret'>secret</span>
  <span class='id send'>send</span> <span class='id auth_method'>auth_method</span><span class='lparen'>(</span><span class='id authtype'>authtype</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id user'>user</span><span class='comma'>,</span> <span class='id secret'>secret</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="base64_encode-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>base64_encode</strong>(str) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


785
786
787
788</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 785</span>

<span class='kw'>def</span> <span class='id base64_encode'>base64_encode</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
  <span class='comment'># expects &quot;str&quot; may not become too long
</span>  <span class='lbracket'>[</span><span class='id str'>str</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>m</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s+</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="capable_auth_types-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>capable_auth_types</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns supported authentication methods on this server. You cannot get
valid value before opening SMTP session.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


283
284
285
286
287</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 283</span>

<span class='kw'>def</span> <span class='id capable_auth_types'>capable_auth_types</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='ivar'>@capabilities</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='ivar'>@capabilities</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>AUTH</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='ivar'>@capabilities</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>AUTH</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="capable_cram_md5_auth?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>capable_cram_md5_auth?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>true if server advertises AUTH CRAM-MD5. You cannot get valid value before
opening SMTP session.</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


270
271
272</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 270</span>

<span class='kw'>def</span> <span class='id capable_cram_md5_auth?'>capable_cram_md5_auth?</span>
  <span class='id auth_capable?'>auth_capable?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>CRAM-MD5</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="capable_login_auth?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>capable_login_auth?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>true if server advertises AUTH LOGIN. You cannot get valid value before
opening SMTP session.</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


264
265
266</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 264</span>

<span class='kw'>def</span> <span class='id capable_login_auth?'>capable_login_auth?</span>
  <span class='id auth_capable?'>auth_capable?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>LOGIN</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="capable_plain_auth?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>capable_plain_auth?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>true if server advertises AUTH PLAIN. You cannot get valid value before
opening SMTP session.</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


258
259
260</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 258</span>

<span class='kw'>def</span> <span class='id capable_plain_auth?'>capable_plain_auth?</span>
  <span class='id auth_capable?'>auth_capable?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>PLAIN</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="capable_starttls?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>capable_starttls?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>true if server advertises STARTTLS. You cannot get valid value before
opening SMTP session.</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


246
247
248</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 246</span>

<span class='kw'>def</span> <span class='id capable_starttls?'>capable_starttls?</span>
  <span class='id capable?'>capable?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>STARTTLS</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="check_auth_args-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>check_auth_args</strong>(user, secret, authtype = DEFAULT_AUTH_TYPE) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


776
777
778
779
780
781
782
783</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 776</span>

<span class='kw'>def</span> <span class='id check_auth_args'>check_auth_args</span><span class='lparen'>(</span><span class='id user'>user</span><span class='comma'>,</span> <span class='id secret'>secret</span><span class='comma'>,</span> <span class='id authtype'>authtype</span> <span class='op'>=</span> <span class='const'>DEFAULT_AUTH_TYPE</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id user'>user</span>
    <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>SMTP-AUTH requested but missing user name</span><span class='tstring_end'>'</span></span>
  <span class='kw'>end</span>
  <span class='kw'>unless</span> <span class='id secret'>secret</span>
    <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>SMTP-AUTH requested but missing secret phrase</span><span class='tstring_end'>'</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="check_auth_continue-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>check_auth_continue</strong>(res) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


964
965
966
967
968</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 964</span>

<span class='kw'>def</span> <span class='id check_auth_continue'>check_auth_continue</span><span class='lparen'>(</span><span class='id res'>res</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id res'>res</span><span class='period'>.</span><span class='id continue?'>continue?</span>
    <span class='id raise'>raise</span> <span class='id res'>res</span><span class='period'>.</span><span class='id exception_class'>exception_class</span><span class='comma'>,</span> <span class='id res'>res</span><span class='period'>.</span><span class='id message'>message</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="check_auth_method-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>check_auth_method</strong>(type) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


766
767
768
769
770</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 766</span>

<span class='kw'>def</span> <span class='id check_auth_method'>check_auth_method</span><span class='lparen'>(</span><span class='id type'>type</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='id auth_method'>auth_method</span><span class='lparen'>(</span><span class='id type'>type</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>wrong authentication type </span><span class='embexpr_beg'>#{</span><span class='id type'>type</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="check_auth_response-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>check_auth_response</strong>(res) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


958
959
960
961
962</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 958</span>

<span class='kw'>def</span> <span class='id check_auth_response'>check_auth_response</span><span class='lparen'>(</span><span class='id res'>res</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id res'>res</span><span class='period'>.</span><span class='id success?'>success?</span>
    <span class='id raise'>raise</span> <span class='const'>SMTPAuthenticationError</span><span class='comma'>,</span> <span class='id res'>res</span><span class='period'>.</span><span class='id message'>message</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="check_continue-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>check_continue</strong>(res) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


952
953
954
955
956</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 952</span>

<span class='kw'>def</span> <span class='id check_continue'>check_continue</span><span class='lparen'>(</span><span class='id res'>res</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id res'>res</span><span class='period'>.</span><span class='id continue?'>continue?</span>
    <span class='id raise'>raise</span> <span class='const'>SMTPUnknownError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>could not get 3xx (</span><span class='embexpr_beg'>#{</span><span class='id res'>res</span><span class='period'>.</span><span class='id status'>status</span><span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="check_response-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>check_response</strong>(res) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


946
947
948
949
950</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 946</span>

<span class='kw'>def</span> <span class='id check_response'>check_response</span><span class='lparen'>(</span><span class='id res'>res</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id res'>res</span><span class='period'>.</span><span class='id success?'>success?</span>
    <span class='id raise'>raise</span> <span class='id res'>res</span><span class='period'>.</span><span class='id exception_class'>exception_class</span><span class='comma'>,</span> <span class='id res'>res</span><span class='period'>.</span><span class='id message'>message</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="cram_md5_response-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>cram_md5_response</strong>(secret, challenge) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>CRAM-MD5: [RFC2195]</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


794
795
796
797</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 794</span>

<span class='kw'>def</span> <span class='id cram_md5_response'>cram_md5_response</span><span class='lparen'>(</span><span class='id secret'>secret</span><span class='comma'>,</span> <span class='id challenge'>challenge</span><span class='rparen'>)</span>
  <span class='id tmp'>tmp</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>MD5</span><span class='period'>.</span><span class='id digest'>digest</span><span class='lparen'>(</span><span class='id cram_secret'>cram_secret</span><span class='lparen'>(</span><span class='id secret'>secret</span><span class='comma'>,</span> <span class='const'>IMASK</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='id challenge'>challenge</span><span class='rparen'>)</span>
  <span class='const'>Digest</span><span class='op'>::</span><span class='const'>MD5</span><span class='period'>.</span><span class='id hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='id cram_secret'>cram_secret</span><span class='lparen'>(</span><span class='id secret'>secret</span><span class='comma'>,</span> <span class='const'>OMASK</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='id tmp'>tmp</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="cram_secret-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>cram_secret</strong>(secret, mask) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


801
802
803
804
805
806
807
808</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 801</span>

<span class='kw'>def</span> <span class='id cram_secret'>cram_secret</span><span class='lparen'>(</span><span class='id secret'>secret</span><span class='comma'>,</span> <span class='id mask'>mask</span><span class='rparen'>)</span>
  <span class='id secret'>secret</span> <span class='op'>=</span> <span class='const'>Digest</span><span class='op'>::</span><span class='const'>MD5</span><span class='period'>.</span><span class='id digest'>digest</span><span class='lparen'>(</span><span class='id secret'>secret</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id secret'>secret</span><span class='period'>.</span><span class='id size'>size</span> <span class='op'>&gt;</span> <span class='const'>CRAM_BUFSIZE</span>
  <span class='id buf'>buf</span> <span class='op'>=</span> <span class='id secret'>secret</span><span class='period'>.</span><span class='id ljust'>ljust</span><span class='lparen'>(</span><span class='const'>CRAM_BUFSIZE</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\0</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='int'>0</span><span class='period'>.</span><span class='id upto'>upto</span><span class='lparen'>(</span><span class='id buf'>buf</span><span class='period'>.</span><span class='id size'>size</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span>
    <span class='id buf'>buf</span><span class='lbracket'>[</span><span class='id i'>i</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id buf'>buf</span><span class='lbracket'>[</span><span class='id i'>i</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id ord'>ord</span> <span class='op'>^</span> <span class='id mask'>mask</span><span class='rparen'>)</span><span class='period'>.</span><span class='id chr'>chr</span>
  <span class='kw'>end</span>
  <span class='id buf'>buf</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="critical-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>critical</strong>(&amp;block) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


936
937
938
939
940
941
942
943
944</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 936</span>

<span class='kw'>def</span> <span class='id critical'>critical</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>200 dummy reply code</span><span class='tstring_end'>'</span></span> <span class='kw'>if</span> <span class='ivar'>@error_occured</span>
  <span class='kw'>begin</span>
    <span class='kw'>return</span> <span class='kw'>yield</span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>Exception</span>
    <span class='ivar'>@error_occured</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id raise'>raise</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="data-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>data</strong>(msgstr = nil, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>This method sends a message. If <tt>msgstr</tt> is given, sends it as a
message. If block is given, yield a message writer stream. You must write
message before the block is closed.</p>

<pre class="code"><span class='comment'># Example 1 (by string)
</span><span class='id smtp'>smtp</span><span class='period'>.</span><span class='id data'>data</span><span class='lparen'>(</span><span class='heredoc_beg'>&lt;&lt;EndMessage</span><span class='rparen'>)</span>
<span class='tstring_content'>From: john@example.com
To: betty@example.com
Subject: I found a bug

Check vm.c:58879.
</span><span class='heredoc_end'>EndMessage
</span>
<span class='comment'># Example 2 (by block)
</span><span class='id smtp'>smtp</span><span class='period'>.</span><span class='id data'>data</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id f'>f</span><span class='op'>|</span>
  <span class='id f'>f</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>From: john@example.com</span><span class='tstring_end'>&quot;</span></span>
  <span class='id f'>f</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>To: betty@example.com</span><span class='tstring_end'>&quot;</span></span>
  <span class='id f'>f</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Subject: I found a bug</span><span class='tstring_end'>&quot;</span></span>
  <span class='id f'>f</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id f'>f</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Check vm.c:58879.</span><span class='tstring_end'>&quot;</span></span>
<span class='rbrace'>}</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


886
887
888
889
890
891
892
893
894
895
896
897
898
899
900
901
902
903
904</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 886</span>

<span class='kw'>def</span> <span class='id data'>data</span><span class='lparen'>(</span><span class='id msgstr'>msgstr</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>   <span class='comment'>#:yield: stream
</span>  <span class='kw'>if</span> <span class='id msgstr'>msgstr</span> <span class='kw'>and</span> <span class='id block'>block</span>
    <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>message and block are exclusive</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>unless</span> <span class='id msgstr'>msgstr</span> <span class='kw'>or</span> <span class='id block'>block</span>
    <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>message or block is required</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id res'>res</span> <span class='op'>=</span> <span class='id critical'>critical</span> <span class='lbrace'>{</span>
    <span class='id check_continue'>check_continue</span> <span class='id get_response'>get_response</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>DATA</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id msgstr'>msgstr</span>
      <span class='ivar'>@socket</span><span class='period'>.</span><span class='id write_message'>write_message</span> <span class='id msgstr'>msgstr</span>
    <span class='kw'>else</span>
      <span class='ivar'>@socket</span><span class='period'>.</span><span class='id write_message_by_block'>write_message_by_block</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id recv_response'>recv_response</span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='rbrace'>}</span>
  <span class='id check_response'>check_response</span> <span class='id res'>res</span>
  <span class='id res'>res</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="debug_output=-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>debug_output=</strong>(arg) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='set_debug_output-instance_method'>set_debug_output</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    
<p>WARNING: This method causes serious security holes. Use this method for
only debugging.</p>

<p>Set an output stream for debug logging. You must call this before #start.</p>

<pre class="code"># example
smtp = Net::SMTP.new(addr, port)
smtp.set_debug_output $stderr
smtp.start do |smtp|
  ....
end</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


396
397
398</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 396</span>

<span class='kw'>def</span> <span class='id debug_output='>debug_output=</span><span class='lparen'>(</span><span class='id arg'>arg</span><span class='rparen'>)</span>
  <span class='ivar'>@debug_output</span> <span class='op'>=</span> <span class='id arg'>arg</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="disable_starttls-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>disable_starttls</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Disables SMTP/TLS (STARTTLS) for this object.  Must be called before the
connection is established to have any effect.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


354
355
356
357</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 354</span>

<span class='kw'>def</span> <span class='id disable_starttls'>disable_starttls</span>
  <span class='ivar'>@starttls</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@ssl_context</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="disable_tls-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>disable_tls</strong> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='disable_ssl-instance_method'>disable_ssl</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    
<p>Disables SMTP/TLS for this object.  Must be called before the connection is
established to have any effect.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


310
311
312
313</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 310</span>

<span class='kw'>def</span> <span class='id disable_tls'>disable_tls</span>
  <span class='ivar'>@tls</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@ssl_context</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="do_finish-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>do_finish</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


612
613
614
615
616
617
618
619</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 612</span>

<span class='kw'>def</span> <span class='id do_finish'>do_finish</span>
  <span class='id quit'>quit</span> <span class='kw'>if</span> <span class='ivar'>@socket</span> <span class='kw'>and</span> <span class='kw'>not</span> <span class='ivar'>@socket</span><span class='period'>.</span><span class='id closed?'>closed?</span> <span class='kw'>and</span> <span class='kw'>not</span> <span class='ivar'>@error_occured</span>
<span class='kw'>ensure</span>
  <span class='ivar'>@started</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@error_occured</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@socket</span><span class='period'>.</span><span class='id close'>close</span> <span class='kw'>if</span> <span class='ivar'>@socket</span> <span class='kw'>and</span> <span class='kw'>not</span> <span class='ivar'>@socket</span><span class='period'>.</span><span class='id closed?'>closed?</span>
  <span class='ivar'>@socket</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="do_helo-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>do_helo</strong>(helo_domain) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


600
601
602
603
604
605
606
607
608
609
610</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 600</span>

<span class='kw'>def</span> <span class='id do_helo'>do_helo</span><span class='lparen'>(</span><span class='id helo_domain'>helo_domain</span><span class='rparen'>)</span>
  <span class='id res'>res</span> <span class='op'>=</span> <span class='ivar'>@esmtp</span> <span class='op'>?</span> <span class='id ehlo'>ehlo</span><span class='lparen'>(</span><span class='id helo_domain'>helo_domain</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='id helo'>helo</span><span class='lparen'>(</span><span class='id helo_domain'>helo_domain</span><span class='rparen'>)</span>
  <span class='ivar'>@capabilities</span> <span class='op'>=</span> <span class='id res'>res</span><span class='period'>.</span><span class='id capabilities'>capabilities</span>
<span class='kw'>rescue</span> <span class='const'>SMTPError</span>
  <span class='kw'>if</span> <span class='ivar'>@esmtp</span>
    <span class='ivar'>@esmtp</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='ivar'>@error_occured</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>retry</span>
  <span class='kw'>end</span>
  <span class='id raise'>raise</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="do_start-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>do_start</strong>(helo_domain, user, secret, authtype) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 543</span>

<span class='kw'>def</span> <span class='id do_start'>do_start</span><span class='lparen'>(</span><span class='id helo_domain'>helo_domain</span><span class='comma'>,</span> <span class='id user'>user</span><span class='comma'>,</span> <span class='id secret'>secret</span><span class='comma'>,</span> <span class='id authtype'>authtype</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>IOError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>SMTP session already started</span><span class='tstring_end'>'</span></span> <span class='kw'>if</span> <span class='ivar'>@started</span>
  <span class='kw'>if</span> <span class='id user'>user</span> <span class='kw'>or</span> <span class='id secret'>secret</span>
    <span class='id check_auth_method'>check_auth_method</span><span class='lparen'>(</span><span class='id authtype'>authtype</span> <span class='op'>||</span> <span class='const'>DEFAULT_AUTH_TYPE</span><span class='rparen'>)</span>
    <span class='id check_auth_args'>check_auth_args</span> <span class='id user'>user</span><span class='comma'>,</span> <span class='id secret'>secret</span>
  <span class='kw'>end</span>
  <span class='id s'>s</span> <span class='op'>=</span> <span class='id timeout'>timeout</span><span class='lparen'>(</span><span class='ivar'>@open_timeout</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id tcp_socket'>tcp_socket</span><span class='lparen'>(</span><span class='ivar'>@address</span><span class='comma'>,</span> <span class='ivar'>@port</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id logging'>logging</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Connection opened: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@address</span><span class='rbrace'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='ivar'>@port</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@socket</span> <span class='op'>=</span> <span class='id new_internet_message_io'>new_internet_message_io</span><span class='lparen'>(</span><span class='id tls?'>tls?</span> <span class='op'>?</span> <span class='id tlsconnect'>tlsconnect</span><span class='lparen'>(</span><span class='id s'>s</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='id s'>s</span><span class='rparen'>)</span>
  <span class='id check_response'>check_response</span> <span class='id critical'>critical</span> <span class='lbrace'>{</span> <span class='id recv_response'>recv_response</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id do_helo'>do_helo</span> <span class='id helo_domain'>helo_domain</span>
  <span class='kw'>if</span> <span class='id starttls_always?'>starttls_always?</span> <span class='kw'>or</span> <span class='lparen'>(</span><span class='id capable_starttls?'>capable_starttls?</span> <span class='kw'>and</span> <span class='id starttls_auto?'>starttls_auto?</span><span class='rparen'>)</span>
    <span class='kw'>unless</span> <span class='id capable_starttls?'>capable_starttls?</span>
      <span class='id raise'>raise</span> <span class='const'>SMTPUnsupportedCommand</span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>STARTTLS is not supported on this server</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='id starttls'>starttls</span>
    <span class='ivar'>@socket</span> <span class='op'>=</span> <span class='id new_internet_message_io'>new_internet_message_io</span><span class='lparen'>(</span><span class='id tlsconnect'>tlsconnect</span><span class='lparen'>(</span><span class='id s'>s</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='comment'># helo response may be different after STARTTLS
</span>    <span class='id do_helo'>do_helo</span> <span class='id helo_domain'>helo_domain</span>
  <span class='kw'>end</span>
  <span class='id authenticate'>authenticate</span> <span class='id user'>user</span><span class='comma'>,</span> <span class='id secret'>secret</span><span class='comma'>,</span> <span class='lparen'>(</span><span class='id authtype'>authtype</span> <span class='op'>||</span> <span class='const'>DEFAULT_AUTH_TYPE</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id user'>user</span>
  <span class='ivar'>@started</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>ensure</span>
  <span class='kw'>unless</span> <span class='ivar'>@started</span>
    <span class='comment'># authentication failed, cancel connection.
</span>    <span class='id s'>s</span><span class='period'>.</span><span class='id close'>close</span> <span class='kw'>if</span> <span class='id s'>s</span> <span class='kw'>and</span> <span class='kw'>not</span> <span class='id s'>s</span><span class='period'>.</span><span class='id closed?'>closed?</span>
    <span class='ivar'>@socket</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="ehlo-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>ehlo</strong>(domain) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


824
825
826</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 824</span>

<span class='kw'>def</span> <span class='id ehlo'>ehlo</span><span class='lparen'>(</span><span class='id domain'>domain</span><span class='rparen'>)</span>
  <span class='id getok'>getok</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EHLO </span><span class='embexpr_beg'>#{</span><span class='id domain'>domain</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="enable_starttls-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>enable_starttls</strong>(context = SMTP.default_ssl_context) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Enables SMTP/TLS (STARTTLS) for this object. <tt>context</tt> is a
OpenSSL::SSL::SSLContext object.</p>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


336
337
338
339
340
341</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 336</span>

<span class='kw'>def</span> <span class='id enable_starttls'>enable_starttls</span><span class='lparen'>(</span><span class='id context'>context</span> <span class='op'>=</span> <span class='const'>SMTP</span><span class='period'>.</span><span class='id default_ssl_context'>default_ssl_context</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>openssl library not installed</span><span class='tstring_end'>'</span></span> <span class='kw'>unless</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>OpenSSL</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SMTPS and STARTTLS is exclusive</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='ivar'>@tls</span>
  <span class='ivar'>@starttls</span> <span class='op'>=</span> <span class='symbol'>:always</span>
  <span class='ivar'>@ssl_context</span> <span class='op'>=</span> <span class='id context'>context</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="enable_starttls_auto-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>enable_starttls_auto</strong>(context = SMTP.default_ssl_context) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Enables SMTP/TLS (STARTTLS) for this object if server accepts.
<tt>context</tt> is a OpenSSL::SSL::SSLContext object.</p>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


345
346
347
348
349
350</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 345</span>

<span class='kw'>def</span> <span class='id enable_starttls_auto'>enable_starttls_auto</span><span class='lparen'>(</span><span class='id context'>context</span> <span class='op'>=</span> <span class='const'>SMTP</span><span class='period'>.</span><span class='id default_ssl_context'>default_ssl_context</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>openssl library not installed</span><span class='tstring_end'>'</span></span> <span class='kw'>unless</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>OpenSSL</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SMTPS and STARTTLS is exclusive</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='ivar'>@tls</span>
  <span class='ivar'>@starttls</span> <span class='op'>=</span> <span class='symbol'>:auto</span>
  <span class='ivar'>@ssl_context</span> <span class='op'>=</span> <span class='id context'>context</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="enable_tls-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>enable_tls</strong>(context = SMTP.default_ssl_context) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='enable_ssl-instance_method'>enable_ssl</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    
<p>Enables SMTP/TLS (SMTPS: SMTP over direct TLS connection) for this object. 
Must be called before the connection is established to have any effect. 
<tt>context</tt> is a OpenSSL::SSL::SSLContext object.</p>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


299
300
301
302
303
304</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 299</span>

<span class='kw'>def</span> <span class='id enable_tls'>enable_tls</span><span class='lparen'>(</span><span class='id context'>context</span> <span class='op'>=</span> <span class='const'>SMTP</span><span class='period'>.</span><span class='id default_ssl_context'>default_ssl_context</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>openssl library not installed</span><span class='tstring_end'>'</span></span> <span class='kw'>unless</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>OpenSSL</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SMTPS and STARTTLS is exclusive</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='ivar'>@starttls</span>
  <span class='ivar'>@tls</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='ivar'>@ssl_context</span> <span class='op'>=</span> <span class='id context'>context</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="finish-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>finish</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Finishes the SMTP session and closes TCP connection. Raises IOError if not
started.</p>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>IOError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


532
533
534
535</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 532</span>

<span class='kw'>def</span> <span class='id finish'>finish</span>
  <span class='id raise'>raise</span> <span class='const'>IOError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>not yet started</span><span class='tstring_end'>'</span></span> <span class='kw'>unless</span> <span class='id started?'>started?</span>
  <span class='id do_finish'>do_finish</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="get_response-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>get_response</strong>(reqline) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


921
922
923
924</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 921</span>

<span class='kw'>def</span> <span class='id get_response'>get_response</span><span class='lparen'>(</span><span class='id reqline'>reqline</span><span class='rparen'>)</span>
  <span class='ivar'>@socket</span><span class='period'>.</span><span class='id writeline'>writeline</span> <span class='id reqline'>reqline</span>
  <span class='id recv_response'>recv_response</span><span class='lparen'>(</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="getok-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>getok</strong>(reqline) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


912
913
914
915
916
917
918
919</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 912</span>

<span class='kw'>def</span> <span class='id getok'>getok</span><span class='lparen'>(</span><span class='id reqline'>reqline</span><span class='rparen'>)</span>
  <span class='id res'>res</span> <span class='op'>=</span> <span class='id critical'>critical</span> <span class='lbrace'>{</span>
    <span class='ivar'>@socket</span><span class='period'>.</span><span class='id writeline'>writeline</span> <span class='id reqline'>reqline</span>
    <span class='id recv_response'>recv_response</span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='rbrace'>}</span>
  <span class='id check_response'>check_response</span> <span class='id res'>res</span>
  <span class='id res'>res</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="helo-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>helo</strong>(domain) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


820
821
822</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 820</span>

<span class='kw'>def</span> <span class='id helo'>helo</span><span class='lparen'>(</span><span class='id domain'>domain</span><span class='rparen'>)</span>
  <span class='id getok'>getok</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HELO </span><span class='embexpr_beg'>#{</span><span class='id domain'>domain</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="inspect-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>inspect</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Provide human-readable stringification of class state.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


228
229
230</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 228</span>

<span class='kw'>def</span> <span class='id inspect'>inspect</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#&lt;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='rbrace'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='ivar'>@address</span><span class='rbrace'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='ivar'>@port</span><span class='rbrace'>}</span><span class='tstring_content'> started=</span><span class='embexpr_beg'>#{</span><span class='ivar'>@started</span><span class='rbrace'>}</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="logging-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>logging</strong>(msg) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1049
1050
1051</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 1049</span>

<span class='kw'>def</span> <span class='id logging'>logging</span><span class='lparen'>(</span><span class='id msg'>msg</span><span class='rparen'>)</span>
  <span class='ivar'>@debug_output</span> <span class='op'>&lt;&lt;</span> <span class='id msg'>msg</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='ivar'>@debug_output</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="mailfrom-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>mailfrom</strong>(from_addr) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


828
829
830
831
832
833</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 828</span>

<span class='kw'>def</span> <span class='id mailfrom'>mailfrom</span><span class='lparen'>(</span><span class='id from_addr'>from_addr</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='gvar'>$SAFE</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='id raise'>raise</span> <span class='const'>SecurityError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>tainted from_addr</span><span class='tstring_end'>'</span></span> <span class='kw'>if</span> <span class='id from_addr'>from_addr</span><span class='period'>.</span><span class='id tainted?'>tainted?</span>
  <span class='kw'>end</span>
  <span class='id getok'>getok</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MAIL FROM:&lt;</span><span class='embexpr_beg'>#{</span><span class='id from_addr'>from_addr</span><span class='rbrace'>}</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="new_internet_message_io-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>new_internet_message_io</strong>(s) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


593
594
595
596
597
598</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 593</span>

<span class='kw'>def</span> <span class='id new_internet_message_io'>new_internet_message_io</span><span class='lparen'>(</span><span class='id s'>s</span><span class='rparen'>)</span>
  <span class='id io'>io</span> <span class='op'>=</span> <span class='const'>InternetMessageIO</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id s'>s</span><span class='rparen'>)</span>
  <span class='id io'>io</span><span class='period'>.</span><span class='id read_timeout'>read_timeout</span> <span class='op'>=</span> <span class='ivar'>@read_timeout</span>
  <span class='id io'>io</span><span class='period'>.</span><span class='id debug_output'>debug_output</span> <span class='op'>=</span> <span class='ivar'>@debug_output</span>
  <span class='id io'>io</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="open_message_stream-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>open_message_stream</strong>(from_addr, *to_addrs, &amp;block) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='ready-instance_method'>ready</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    
<p>Opens a message writer stream and gives it to the block. The stream is
valid only in the block, and has these methods:</p>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>puts(str = ")</p></td>
<td>
<p>outputs STR and CR LF.</p>
</td></tr><tr><td class="rdoc-term"><p>print(str)</p></td>
<td>
<p>outputs STR.</p>
</td></tr><tr><td class="rdoc-term"><p>printf(fmt, *args)</p></td>
<td>
<p>outputs sprintf(fmt,*args).</p>
</td></tr><tr><td class="rdoc-term"><p>write(str)</p></td>
<td>
<p>outputs STR and returns the length of written bytes.</p>
</td></tr><tr><td class="rdoc-term"><p>&lt;&lt;(str)</p></td>
<td>
<p>outputs STR and returns self.</p>
</td></tr></table>

<p>If a single CR ("r") or LF ("n") is found in the message, it is converted
to the CR LF pair.  You cannot send a binary message with this method.</p>

<h3>Parameters</h3>

<p><tt>from_addr</tt> is a String representing the source mail address.</p>

<p><tt>to_addr</tt> is a String or Strings or Array of Strings, representing
the destination mail address or addresses.</p>

<h3>Example</h3>

<pre class="code"><span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id start'>start</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>smtp.example.com</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='int'>25</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id smtp'>smtp</span><span class='op'>|</span>
  <span class='id smtp'>smtp</span><span class='period'>.</span><span class='id open_message_stream'>open_message_stream</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>from@example.com</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>dest@example.com</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id f'>f</span><span class='op'>|</span>
    <span class='id f'>f</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>From: from@example.com</span><span class='tstring_end'>'</span></span>
    <span class='id f'>f</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>To: dest@example.com</span><span class='tstring_end'>'</span></span>
    <span class='id f'>f</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Subject: test message</span><span class='tstring_end'>'</span></span>
    <span class='id f'>f</span><span class='period'>.</span><span class='id puts'>puts</span>
    <span class='id f'>f</span><span class='period'>.</span><span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>This is a test message.</span><span class='tstring_end'>'</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>

<h3>Errors</h3>

<p>This method may raise:</p>
<ul><li>
<p>Net::SMTPServerBusy</p>
</li><li>
<p>Net::SMTPSyntaxError</p>
</li><li>
<p>Net::SMTPFatalError</p>
</li><li>
<p>Net::SMTPUnknownError</p>
</li><li>
<p>IOError</p>
</li><li>
<p>TimeoutError</p>
</li></ul>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>IOError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


710
711
712
713
714</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 710</span>

<span class='kw'>def</span> <span class='id open_message_stream'>open_message_stream</span><span class='lparen'>(</span><span class='id from_addr'>from_addr</span><span class='comma'>,</span> <span class='op'>*</span><span class='id to_addrs'>to_addrs</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>   <span class='comment'># :yield: stream
</span>  <span class='id raise'>raise</span> <span class='const'>IOError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>closed session</span><span class='tstring_end'>'</span></span> <span class='kw'>unless</span> <span class='ivar'>@socket</span>
  <span class='id mailfrom'>mailfrom</span> <span class='id from_addr'>from_addr</span>
  <span class='id rcptto_list'>rcptto_list</span><span class='lparen'>(</span><span class='id to_addrs'>to_addrs</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='id data'>data</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="quit-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>quit</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


906
907
908</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 906</span>

<span class='kw'>def</span> <span class='id quit'>quit</span>
  <span class='id getok'>getok</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>QUIT</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="rcptto-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>rcptto</strong>(to_addr) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


856
857
858
859
860
861</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 856</span>

<span class='kw'>def</span> <span class='id rcptto'>rcptto</span><span class='lparen'>(</span><span class='id to_addr'>to_addr</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='gvar'>$SAFE</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='id raise'>raise</span> <span class='const'>SecurityError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>tainted to_addr</span><span class='tstring_end'>'</span></span> <span class='kw'>if</span> <span class='id to_addr'>to_addr</span><span class='period'>.</span><span class='id tainted?'>tainted?</span>
  <span class='kw'>end</span>
  <span class='id getok'>getok</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>RCPT TO:&lt;</span><span class='embexpr_beg'>#{</span><span class='id to_addr'>to_addr</span><span class='rbrace'>}</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="rcptto_list-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>rcptto_list</strong>(to_addrs) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


835
836
837
838
839
840
841
842
843
844
845
846
847
848
849
850
851
852
853
854</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 835</span>

<span class='kw'>def</span> <span class='id rcptto_list'>rcptto_list</span><span class='lparen'>(</span><span class='id to_addrs'>to_addrs</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>mail destination not given</span><span class='tstring_end'>'</span></span> <span class='kw'>if</span> <span class='id to_addrs'>to_addrs</span><span class='period'>.</span><span class='id empty?'>empty?</span>
  <span class='id ok_users'>ok_users</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id unknown_users'>unknown_users</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id to_addrs'>to_addrs</span><span class='period'>.</span><span class='id flatten'>flatten</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id addr'>addr</span><span class='op'>|</span>
    <span class='kw'>begin</span>
      <span class='id rcptto'>rcptto</span> <span class='id addr'>addr</span>
    <span class='kw'>rescue</span> <span class='const'>SMTPAuthenticationError</span>
      <span class='id unknown_users'>unknown_users</span> <span class='op'>&lt;&lt;</span> <span class='id addr'>addr</span><span class='period'>.</span><span class='id dump'>dump</span>
    <span class='kw'>else</span>
      <span class='id ok_users'>ok_users</span> <span class='op'>&lt;&lt;</span> <span class='id addr'>addr</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>mail destination not given</span><span class='tstring_end'>'</span></span> <span class='kw'>if</span> <span class='id ok_users'>ok_users</span><span class='period'>.</span><span class='id empty?'>empty?</span>
  <span class='id ret'>ret</span> <span class='op'>=</span> <span class='kw'>yield</span>
  <span class='kw'>unless</span> <span class='id unknown_users'>unknown_users</span><span class='period'>.</span><span class='id empty?'>empty?</span>
    <span class='id raise'>raise</span> <span class='const'>SMTPAuthenticationError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>failed to deliver for </span><span class='embexpr_beg'>#{</span><span class='id unknown_users'>unknown_users</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>, </span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id ret'>ret</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="recv_response-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>recv_response</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


926
927
928
929
930
931
932
933
934</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 926</span>

<span class='kw'>def</span> <span class='id recv_response'>recv_response</span>
  <span class='id buf'>buf</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>
  <span class='kw'>while</span> <span class='kw'>true</span>
    <span class='id line'>line</span> <span class='op'>=</span> <span class='ivar'>@socket</span><span class='period'>.</span><span class='id readline'>readline</span>
    <span class='id buf'>buf</span> <span class='op'>&lt;&lt;</span> <span class='id line'>line</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>break</span> <span class='kw'>unless</span> <span class='id line'>line</span><span class='lbracket'>[</span><span class='int'>3</span><span class='comma'>,</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>-</span><span class='tstring_end'>'</span></span>   <span class='comment'># &quot;210-PIPELINING&quot;
</span>  <span class='kw'>end</span>
  <span class='const'>Response</span><span class='period'>.</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='id buf'>buf</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_message-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>send_message</strong>(msgstr, from_addr, *to_addrs) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='send_mail-instance_method'>send_mail</span>, <span id='sendmail-instance_method'>sendmail</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    
<p>Sends <tt>msgstr</tt> as a message.  Single CR ("r") and LF ("n") found in
the <tt>msgstr</tt>, are converted into the CR LF pair.  You cannot send a
binary message with this method. <tt>msgstr</tt> should include both the
message headers and body.</p>

<p><tt>from_addr</tt> is a String representing the source mail address.</p>

<p><tt>to_addr</tt> is a String or Strings or Array of Strings, representing
the destination mail address or addresses.</p>

<h3>Example</h3>

<pre class="code"><span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id start'>start</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>smtp.example.com</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id smtp'>smtp</span><span class='op'>|</span>
  <span class='id smtp'>smtp</span><span class='period'>.</span><span class='id send_message'>send_message</span> <span class='id msgstr'>msgstr</span><span class='comma'>,</span>
                    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>from@example.com</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
                    <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>dest@example.com</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>dest2@example.com</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>

<h3>Errors</h3>

<p>This method may raise:</p>
<ul><li>
<p>Net::SMTPServerBusy</p>
</li><li>
<p>Net::SMTPSyntaxError</p>
</li><li>
<p>Net::SMTPFatalError</p>
</li><li>
<p>Net::SMTPUnknownError</p>
</li><li>
<p>IOError</p>
</li><li>
<p>TimeoutError</p>
</li></ul>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>IOError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


657
658
659
660
661</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 657</span>

<span class='kw'>def</span> <span class='id send_message'>send_message</span><span class='lparen'>(</span><span class='id msgstr'>msgstr</span><span class='comma'>,</span> <span class='id from_addr'>from_addr</span><span class='comma'>,</span> <span class='op'>*</span><span class='id to_addrs'>to_addrs</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>IOError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>closed session</span><span class='tstring_end'>'</span></span> <span class='kw'>unless</span> <span class='ivar'>@socket</span>
  <span class='id mailfrom'>mailfrom</span> <span class='id from_addr'>from_addr</span>
  <span class='id rcptto_list'>rcptto_list</span><span class='lparen'>(</span><span class='id to_addrs'>to_addrs</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='id data'>data</span> <span class='id msgstr'>msgstr</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="ssl_socket-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>ssl_socket</strong>(socket, context) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


574
575
576</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 574</span>

<span class='kw'>def</span> <span class='id ssl_socket'>ssl_socket</span><span class='lparen'>(</span><span class='id socket'>socket</span><span class='comma'>,</span> <span class='id context'>context</span><span class='rparen'>)</span>
  <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>SSL</span><span class='op'>::</span><span class='const'>SSLSocket</span><span class='period'>.</span><span class='id new'>new</span> <span class='id socket'>socket</span><span class='comma'>,</span> <span class='id context'>context</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="start-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>start</strong>(helo = 'localhost', user = nil, secret = nil, authtype = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Opens a TCP connection and starts the SMTP session.</p>

<h3>Parameters</h3>

<p><tt>helo</tt> is the <em>HELO</em> <em>domain</em> that you'll dispatch
mails from; see the discussion in the overview notes.</p>

<p>If both of <tt>user</tt> and <tt>secret</tt> are given, SMTP authentication
will be attempted using the AUTH command.  <tt>authtype</tt> specifies the
type of authentication to attempt; it must be one of :login, :plain, and
:cram_md5.  See the notes on SMTP Authentication in the overview.</p>

<h3>Block Usage</h3>

<p>When this methods is called with a block, the newly-started SMTP object is
yielded to the block, and automatically closed after the block call
finishes.  Otherwise, it is the caller's responsibility to close the
session when finished.</p>

<h3>Example</h3>

<p>This is very similar to the class method SMTP.start.</p>

<pre class="code"><span class='id require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>net/smtp</span><span class='tstring_end'>'</span></span>
<span class='id smtp'>smtp</span> <span class='op'>=</span> <span class='const'>Net</span><span class='op'>::</span><span class='const'>SMTP</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>smtp.mail.server</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='int'>25</span><span class='rparen'>)</span>
<span class='id smtp'>smtp</span><span class='period'>.</span><span class='id start'>start</span><span class='lparen'>(</span><span class='id helo_domain'>helo_domain</span><span class='comma'>,</span> <span class='id account'>account</span><span class='comma'>,</span> <span class='id password'>password</span><span class='comma'>,</span> <span class='id authtype'>authtype</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id smtp'>smtp</span><span class='op'>|</span>
  <span class='id smtp'>smtp</span><span class='period'>.</span><span class='id send_message'>send_message</span> <span class='id msgstr'>msgstr</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>from@example.com</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>dest@example.com</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>

<p>The primary use of this method (as opposed to SMTP.start) is probably to
set debugging (#set_debug_output) or ESMTP (#esmtp=), which must be done
before the session is started.</p>

<h3>Errors</h3>

<p>If session has already been started, an IOError will be raised.</p>

<p>This method may raise:</p>
<ul><li>
<p>Net::SMTPAuthenticationError</p>
</li><li>
<p>Net::SMTPServerBusy</p>
</li><li>
<p>Net::SMTPSyntaxError</p>
</li><li>
<p>Net::SMTPFatalError</p>
</li><li>
<p>Net::SMTPUnknownError</p>
</li><li>
<p>IOError</p>
</li><li>
<p>TimeoutError</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


515
516
517
518
519
520
521
522
523
524
525
526
527
528</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 515</span>

<span class='kw'>def</span> <span class='id start'>start</span><span class='lparen'>(</span><span class='id helo'>helo</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>localhost</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
          <span class='id user'>user</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id secret'>secret</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id authtype'>authtype</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>   <span class='comment'># :yield: smtp
</span>  <span class='kw'>if</span> <span class='id block_given?'>block_given?</span>
    <span class='kw'>begin</span>
      <span class='id do_start'>do_start</span> <span class='id helo'>helo</span><span class='comma'>,</span> <span class='id user'>user</span><span class='comma'>,</span> <span class='id secret'>secret</span><span class='comma'>,</span> <span class='id authtype'>authtype</span>
      <span class='kw'>return</span> <span class='kw'>yield</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
    <span class='kw'>ensure</span>
      <span class='id do_finish'>do_finish</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id do_start'>do_start</span> <span class='id helo'>helo</span><span class='comma'>,</span> <span class='id user'>user</span><span class='comma'>,</span> <span class='id secret'>secret</span><span class='comma'>,</span> <span class='id authtype'>authtype</span>
    <span class='kw'>return</span> <span class='kw'>self</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="started?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>started?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p><tt>true</tt> if the SMTP session has been started.</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


461
462
463</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 461</span>

<span class='kw'>def</span> <span class='id started?'>started?</span>
  <span class='ivar'>@started</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="starttls-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>starttls</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


816
817
818</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 816</span>

<span class='kw'>def</span> <span class='id starttls'>starttls</span>
  <span class='id getok'>getok</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>STARTTLS</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="starttls?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>starttls?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns truth value if this object uses STARTTLS. If this object always
uses STARTTLS, returns :always. If this object uses STARTTLS when the
server support TLS, returns :auto.</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


320
321
322</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 320</span>

<span class='kw'>def</span> <span class='id starttls?'>starttls?</span>
  <span class='ivar'>@starttls</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="starttls_always?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>starttls_always?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>true if this object uses STARTTLS.</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


325
326
327</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 325</span>

<span class='kw'>def</span> <span class='id starttls_always?'>starttls_always?</span>
  <span class='ivar'>@starttls</span> <span class='op'>==</span> <span class='symbol'>:always</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="starttls_auto?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>starttls_auto?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>true if this object uses STARTTLS when server advertises STARTTLS.</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


330
331
332</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 330</span>

<span class='kw'>def</span> <span class='id starttls_auto?'>starttls_auto?</span>
  <span class='ivar'>@starttls</span> <span class='op'>==</span> <span class='symbol'>:auto</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="tcp_socket-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>tcp_socket</strong>(address, port) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


539
540
541</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 539</span>

<span class='kw'>def</span> <span class='id tcp_socket'>tcp_socket</span><span class='lparen'>(</span><span class='id address'>address</span><span class='comma'>,</span> <span class='id port'>port</span><span class='rparen'>)</span>
  <span class='const'>TCPSocket</span><span class='period'>.</span><span class='id open'>open</span> <span class='id address'>address</span><span class='comma'>,</span> <span class='id port'>port</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="tls?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>tls?</strong> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='ssl?-instance_method'>ssl?</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    
<p>true if this object uses SMTP/TLS (SMTPS).</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


290
291
292</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 290</span>

<span class='kw'>def</span> <span class='id tls?'>tls?</span>
  <span class='ivar'>@tls</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="tlsconnect-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>tlsconnect</strong>(s) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


578
579
580
581
582
583
584
585
586
587
588
589
590
591</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/net/smtp.rb', line 578</span>

<span class='kw'>def</span> <span class='id tlsconnect'>tlsconnect</span><span class='lparen'>(</span><span class='id s'>s</span><span class='rparen'>)</span>
  <span class='id verified'>verified</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='id s'>s</span> <span class='op'>=</span> <span class='id ssl_socket'>ssl_socket</span><span class='lparen'>(</span><span class='id s'>s</span><span class='comma'>,</span> <span class='ivar'>@ssl_context</span><span class='rparen'>)</span>
  <span class='id logging'>logging</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TLS connection started</span><span class='tstring_end'>&quot;</span></span>
  <span class='id s'>s</span><span class='period'>.</span><span class='id sync_close'>sync_close</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id s'>s</span><span class='period'>.</span><span class='id connect'>connect</span>
  <span class='kw'>if</span> <span class='ivar'>@ssl_context</span><span class='period'>.</span><span class='id verify_mode'>verify_mode</span> <span class='op'>!=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>SSL</span><span class='op'>::</span><span class='const'>VERIFY_NONE</span>
    <span class='id s'>s</span><span class='period'>.</span><span class='id post_connection_check'>post_connection_check</span><span class='lparen'>(</span><span class='ivar'>@address</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id verified'>verified</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id s'>s</span>
<span class='kw'>ensure</span>
  <span class='id s'>s</span><span class='period'>.</span><span class='id close'>close</span> <span class='kw'>unless</span> <span class='id verified'>verified</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sat Sep  3 14:10:33 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.9.3).
</div>

  </body>
</html>