<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: RDoc::Markup::PreProcess
  
    &mdash; Ruby 1.9 Ruby Standard Library
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (P)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../RDoc.html" title="RDoc (module)">RDoc</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Markup.html" title="RDoc::Markup (class)">Markup</a></span></span>
     &raquo; 
    <span class="title">PreProcess</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: RDoc::Markup::PreProcess
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">RDoc::Markup::PreProcess</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/rdoc/markup/pre_process.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Handle common directives that can occur in a block of text:</p>

<pre class="code">\:include: filename</pre>

<p>Directives can be escaped by preceding them with a backslash.</p>

<p>RDoc plugin authors can register additional directives to be handled by
using RDoc::Markup::PreProcess::register</p>


  </div>
</div>
<div class="tags">
  
</div>




  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#register-class_method" title="register (class method)">+ (Object) <strong>register</strong>(directive, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Registers <tt>directive</tt> as one handled by RDoc.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#registered-class_method" title="registered (class method)">+ (Object) <strong>registered</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Registered directives.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_include_file-instance_method" title="#find_include_file (instance method)">- (Object) <strong>find_include_file</strong>(name) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Look for the given file in the directory containing the current file, and
then in each of the directories specified in the RDOC_INCLUDE path.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#handle-instance_method" title="#handle (instance method)">- (Object) <strong>handle</strong>(text, code_object = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Look for directives in a chunk of <tt>text</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#include_file-instance_method" title="#include_file (instance method)">- (Object) <strong>include_file</strong>(name, indent, encoding) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Handles the <tt>:include: <em>filename</em></tt> directive.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (PreProcess) <strong>initialize</strong>(input_file_name, include_path) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new pre-processor for <tt>input_file_name</tt> that will look for
included files in <tt>include_path</tt>.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="RDoc::Markup::PreProcess (class)">PreProcess</a></span></tt>) <strong>initialize</strong>(input_file_name, include_path) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Creates a new pre-processor for <tt>input_file_name</tt> that will look for
included files in <tt>include_path</tt></p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


38
39
40
41</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdoc/markup/pre_process.rb', line 38</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id input_file_name'>input_file_name</span><span class='comma'>,</span> <span class='id include_path'>include_path</span><span class='rparen'>)</span>
  <span class='ivar'>@input_file_name</span> <span class='op'>=</span> <span class='id input_file_name'>input_file_name</span>
  <span class='ivar'>@include_path</span> <span class='op'>=</span> <span class='id include_path'>include_path</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="register-class_method">
  
    + (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>register</strong>(directive, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Registers <tt>directive</tt> as one handled by RDoc.  If a block is given
the directive will be replaced by the result of the block, otherwise the
directive will be removed from the processed text.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


23
24
25</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdoc/markup/pre_process.rb', line 23</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id register'>register</span> <span class='id directive'>directive</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span>
  <span class='ivar'>@registered</span><span class='lbracket'>[</span><span class='id directive'>directive</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id block'>block</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="registered-class_method">
  
    + (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>registered</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Registered directives</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


30
31
32</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdoc/markup/pre_process.rb', line 30</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id registered'>registered</span>
  <span class='ivar'>@registered</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="find_include_file-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>find_include_file</strong>(name) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Look for the given file in the directory containing the current file, and
then in each of the directories specified in the RDOC_INCLUDE path</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


147
148
149
150
151
152
153
154
155</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdoc/markup/pre_process.rb', line 147</span>

<span class='kw'>def</span> <span class='id find_include_file'>find_include_file</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span>
  <span class='id to_search'>to_search</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='const'>File</span><span class='period'>.</span><span class='id dirname'>dirname</span><span class='lparen'>(</span><span class='ivar'>@input_file_name</span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id concat'>concat</span> <span class='ivar'>@include_path</span>
  <span class='id to_search'>to_search</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id dir'>dir</span><span class='op'>|</span>
    <span class='id full_name'>full_name</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='id dir'>dir</span><span class='comma'>,</span> <span class='id name'>name</span><span class='rparen'>)</span>
    <span class='id stat'>stat</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id stat'>stat</span><span class='lparen'>(</span><span class='id full_name'>full_name</span><span class='rparen'>)</span> <span class='kw'>rescue</span> <span class='kw'>next</span>
    <span class='kw'>return</span> <span class='id full_name'>full_name</span> <span class='kw'>if</span> <span class='id stat'>stat</span><span class='period'>.</span><span class='id readable?'>readable?</span>
  <span class='kw'>end</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="handle-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>handle</strong>(text, code_object = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Look for directives in a chunk of <tt>text</tt>.</p>

<p>Options that we don't handle are yielded.  If the block returns false the
directive is restored to the text.  If the block returns nil or no block
was given the directive is handled according to the registered directives.
If a String was returned the directive is replaced with the string.</p>

<p>If no matching directive was registered the directive is restored to the
text.</p>

<p>If <tt>code_object</tt> is given and the param is set as metadata on the
<tt>code_object</tt>.  See RDoc::CodeObject#metadata</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdoc/markup/pre_process.rb', line 57</span>

<span class='kw'>def</span> <span class='id handle'>handle</span> <span class='id text'>text</span><span class='comma'>,</span> <span class='id code_object'>code_object</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='comment'># regexp helper (square brackets for optional)
</span>  <span class='comment'># $1      $2  $3        $4      $5
</span>  <span class='comment'># [prefix][\]:directive:[spaces][param]newline
</span>  <span class='id text'>text</span><span class='period'>.</span><span class='id gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^([ \t]*#?[ \t]*)(\\?):(\w+):([ \t]*)(.+)?\n</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='comment'># skip something like ':toto::'
</span>    <span class='kw'>next</span> <span class='backref'>$&amp;</span> <span class='kw'>if</span> <span class='backref'>$4</span><span class='period'>.</span><span class='id empty?'>empty?</span> <span class='kw'>and</span> <span class='backref'>$5</span> <span class='kw'>and</span> <span class='backref'>$5</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>:</span><span class='tstring_end'>'</span></span>

    <span class='comment'># skip if escaped
</span>    <span class='kw'>next</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embvar'>#</span><span class='backref'>$1</span><span class='tstring_content'>:</span><span class='embvar'>#</span><span class='backref'>$3</span><span class='tstring_content'>:</span><span class='embvar'>#</span><span class='backref'>$4</span><span class='embvar'>#</span><span class='backref'>$5</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='backref'>$2</span><span class='period'>.</span><span class='id empty?'>empty?</span>

    <span class='id prefix'>prefix</span>    <span class='op'>=</span> <span class='backref'>$1</span>
    <span class='id directive'>directive</span> <span class='op'>=</span> <span class='backref'>$3</span><span class='period'>.</span><span class='id downcase'>downcase</span>
    <span class='id param'>param</span>     <span class='op'>=</span> <span class='backref'>$5</span>

    <span class='kw'>case</span> <span class='id directive'>directive</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>include</span><span class='tstring_end'>'</span></span> <span class='kw'>then</span>
      <span class='id filename'>filename</span> <span class='op'>=</span> <span class='id param'>param</span><span class='period'>.</span><span class='id split'>split</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
      <span class='id encoding'>encoding</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>Encoding</span><span class='rparen'>)</span> <span class='kw'>then</span> <span class='id text'>text</span><span class='period'>.</span><span class='id encoding'>encoding</span> <span class='kw'>else</span> <span class='kw'>nil</span> <span class='kw'>end</span>
      <span class='id include_file'>include_file</span> <span class='id filename'>filename</span><span class='comma'>,</span> <span class='id prefix'>prefix</span><span class='comma'>,</span> <span class='id encoding'>encoding</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>category</span><span class='tstring_end'>'</span></span> <span class='kw'>then</span>
      <span class='kw'>if</span> <span class='const'>RDoc</span><span class='op'>::</span><span class='const'>Context</span> <span class='op'>===</span> <span class='id code_object'>code_object</span> <span class='kw'>then</span>
        <span class='id section'>section</span> <span class='op'>=</span> <span class='id code_object'>code_object</span><span class='period'>.</span><span class='id add_section'>add_section</span> <span class='id param'>param</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>
        <span class='id code_object'>code_object</span><span class='period'>.</span><span class='id temporary_section'>temporary_section</span> <span class='op'>=</span> <span class='id section'>section</span>
      <span class='kw'>end</span>

      <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span> <span class='comment'># ignore category if we're not on an RDoc::Context
</span>    <span class='kw'>else</span>
      <span class='id result'>result</span> <span class='op'>=</span> <span class='kw'>yield</span> <span class='id directive'>directive</span><span class='comma'>,</span> <span class='id param'>param</span> <span class='kw'>if</span> <span class='id block_given?'>block_given?</span>

      <span class='kw'>case</span> <span class='id result'>result</span>
      <span class='kw'>when</span> <span class='kw'>nil</span> <span class='kw'>then</span>
        <span class='id code_object'>code_object</span><span class='period'>.</span><span class='id metadata'>metadata</span><span class='lbracket'>[</span><span class='id directive'>directive</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id param'>param</span> <span class='kw'>if</span> <span class='id code_object'>code_object</span>
        <span class='kw'>if</span> <span class='const'>RDoc</span><span class='op'>::</span><span class='const'>Markup</span><span class='op'>::</span><span class='const'>PreProcess</span><span class='period'>.</span><span class='id registered'>registered</span><span class='period'>.</span><span class='id include?'>include?</span> <span class='id directive'>directive</span> <span class='kw'>then</span>
          <span class='id handler'>handler</span> <span class='op'>=</span> <span class='const'>RDoc</span><span class='op'>::</span><span class='const'>Markup</span><span class='op'>::</span><span class='const'>PreProcess</span><span class='period'>.</span><span class='id registered'>registered</span><span class='lbracket'>[</span><span class='id directive'>directive</span><span class='rbracket'>]</span>
          <span class='id result'>result</span> <span class='op'>=</span> <span class='id handler'>handler</span><span class='period'>.</span><span class='id call'>call</span> <span class='id directive'>directive</span><span class='comma'>,</span> <span class='id param'>param</span> <span class='kw'>if</span> <span class='id handler'>handler</span>
        <span class='kw'>else</span>
          <span class='id result'>result</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id prefix'>prefix</span><span class='rbrace'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id directive'>directive</span><span class='rbrace'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id param'>param</span><span class='rbrace'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
      <span class='kw'>when</span> <span class='kw'>false</span> <span class='kw'>then</span>
        <span class='id result'>result</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id prefix'>prefix</span><span class='rbrace'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id directive'>directive</span><span class='rbrace'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id param'>param</span><span class='rbrace'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>

      <span class='id result'>result</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id text'>text</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="include_file-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>include_file</strong>(name, indent, encoding) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Handles the <tt>:include: <em>filename</em></tt> directive.</p>

<p>If the first line of the included file starts with '#', and contains an
encoding information in the form 'coding:' or 'coding=', it is removed.</p>

<p>If all lines in the included file start with a '#', this leading '#' is
removed before inclusion. The included content is indented like the
<tt>:include:</tt> directive. -- so all content will be verbatim because of
the likely space after '#'? TODO shift left the whole file content in that
case TODO comment stop/start #-- and #++ in included file must be processed
here</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdoc/markup/pre_process.rb', line 122</span>

<span class='kw'>def</span> <span class='id include_file'>include_file</span> <span class='id name'>name</span><span class='comma'>,</span> <span class='id indent'>indent</span><span class='comma'>,</span> <span class='id encoding'>encoding</span>
  <span class='id full_name'>full_name</span> <span class='op'>=</span> <span class='id find_include_file'>find_include_file</span> <span class='id name'>name</span>

  <span class='kw'>unless</span> <span class='id full_name'>full_name</span> <span class='kw'>then</span>
    <span class='id warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Couldn't find file to include '</span><span class='embexpr_beg'>#{</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_content'>' from </span><span class='embexpr_beg'>#{</span><span class='ivar'>@input_file_name</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>
  <span class='kw'>end</span>

  <span class='id content'>content</span> <span class='op'>=</span> <span class='const'>RDoc</span><span class='op'>::</span><span class='const'>Encoding</span><span class='period'>.</span><span class='id read_file'>read_file</span> <span class='id full_name'>full_name</span><span class='comma'>,</span> <span class='id encoding'>encoding</span><span class='comma'>,</span> <span class='kw'>true</span>

  <span class='comment'># strip magic comment
</span>  <span class='id content'>content</span> <span class='op'>=</span> <span class='id content'>content</span><span class='period'>.</span><span class='id sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A# .*coding[=:].*$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id lstrip'>lstrip</span>

  <span class='comment'># strip leading '#'s, but only if all lines start with them
</span>  <span class='kw'>if</span> <span class='id content'>content</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^[^#]</span><span class='regexp_end'>/</span></span> <span class='kw'>then</span>
    <span class='id content'>content</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='id indent'>indent</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id content'>content</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^#?</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='id indent'>indent</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sat Sep  3 14:11:38 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.9.3).
</div>

  </body>
</html>