<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: IO
  
    &mdash; Ruby 1.9 Ruby Standard Library
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (I)</a> &raquo; 
    
    
    <span class="title">IO</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: IO
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">IO</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/scanf.rb</dd>
  
</dl>
<div class="clear"></div>

<div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="File.html" title="File (class)">File</a></span></p>
</div>





  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#block_scanf-instance_method" title="#block_scanf (instance method)">- (Object) <strong>block_scanf</strong>(str) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#scanf-instance_method" title="#scanf (instance method)">- (Object) <strong>scanf</strong>(str, &amp;b) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Scans the current string until the match is exhausted, yielding each match
as it is encountered in the string.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#soak_up_spaces-instance_method" title="#soak_up_spaces (instance method)">- (Object) <strong>soak_up_spaces</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="block_scanf-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>block_scanf</strong>(str) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


677
678
679
680
681
682
683
684
685
686
687
688
689</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/scanf.rb', line 677</span>

<span class='kw'>def</span> <span class='id block_scanf'>block_scanf</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
  <span class='id final'>final</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='comment'># Sub-ideal, since another FS gets created in scanf.
</span><span class='comment'># But used here to determine the number of specifiers.
</span>  <span class='id fstr'>fstr</span> <span class='op'>=</span> <span class='const'>Scanf</span><span class='op'>::</span><span class='const'>FormatString</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
  <span class='id last_spec'>last_spec</span> <span class='op'>=</span> <span class='id fstr'>fstr</span><span class='period'>.</span><span class='id last_spec'>last_spec</span>
  <span class='kw'>begin</span>
    <span class='id current'>current</span> <span class='op'>=</span> <span class='id scanf'>scanf</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
    <span class='kw'>break</span> <span class='kw'>if</span> <span class='id current'>current</span><span class='period'>.</span><span class='id empty?'>empty?</span>
    <span class='id final'>final</span><span class='period'>.</span><span class='id push'>push</span><span class='lparen'>(</span><span class='kw'>yield</span><span class='lparen'>(</span><span class='id current'>current</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span> <span class='kw'>until</span> <span class='id eof'>eof</span> <span class='op'>||</span> <span class='id fstr'>fstr</span><span class='period'>.</span><span class='id last_spec_tried'>last_spec_tried</span> <span class='op'>==</span> <span class='id last_spec'>last_spec</span>
  <span class='kw'>return</span> <span class='id final'>final</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="scanf-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>scanf</strong>(str, &amp;b) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Scans the current string until the match is exhausted, yielding each match
as it is encountered in the string. A block is not necessary though, as the
results will simply be aggregated into the final array.</p>

<pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>123 456</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id block_scanf'>block_scanf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%d</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='comment'># =&gt; [123, 456]</span></pre>

<p>If a block is given, the value from that is returned from the yield is
added to an output array.</p>

<pre class="code">&quot;123 456&quot;.block_scanf(&quot;%d) do |digit,| # the ',' unpacks the Array
  digit + 100
end
# =&gt; [223, 556]</pre>

<p>See Scanf for details on creating a format string.</p>

<p>You will need to require 'scanf' to use use IO#scanf.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652
653
654
655
656
657
658
659
660
661
662
663
664</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/scanf.rb', line 614</span>

<span class='kw'>def</span> <span class='id scanf'>scanf</span><span class='lparen'>(</span><span class='id str'>str</span><span class='comma'>,</span><span class='op'>&amp;</span><span class='id b'>b</span><span class='rparen'>)</span> <span class='comment'>#:yield: current_match
</span>  <span class='kw'>return</span> <span class='id block_scanf'>block_scanf</span><span class='lparen'>(</span><span class='id str'>str</span><span class='comma'>,</span><span class='op'>&amp;</span><span class='id b'>b</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id b'>b</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id str'>str</span><span class='period'>.</span><span class='id size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>

  <span class='id start_position'>start_position</span> <span class='op'>=</span> <span class='id pos'>pos</span> <span class='kw'>rescue</span> <span class='int'>0</span>
  <span class='id matched_so_far'>matched_so_far</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id source_buffer'>source_buffer</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id result_buffer'>result_buffer</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id final_result'>final_result</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id fstr'>fstr</span> <span class='op'>=</span> <span class='const'>Scanf</span><span class='op'>::</span><span class='const'>FormatString</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>

  <span class='id loop'>loop</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='id eof'>eof</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id tty?'>tty?</span> <span class='op'>&amp;&amp;</span><span class='op'>!</span> <span class='id fstr'>fstr</span><span class='period'>.</span><span class='id match'>match</span><span class='lparen'>(</span><span class='id source_buffer'>source_buffer</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='id final_result'>final_result</span><span class='period'>.</span><span class='id concat'>concat</span><span class='lparen'>(</span><span class='id result_buffer'>result_buffer</span><span class='rparen'>)</span>
      <span class='kw'>break</span>
    <span class='kw'>end</span>

    <span class='id source_buffer'>source_buffer</span> <span class='op'>&lt;&lt;</span> <span class='id gets'>gets</span>

    <span class='id current_match'>current_match</span> <span class='op'>=</span> <span class='id fstr'>fstr</span><span class='period'>.</span><span class='id match'>match</span><span class='lparen'>(</span><span class='id source_buffer'>source_buffer</span><span class='rparen'>)</span>

    <span class='id spec'>spec</span> <span class='op'>=</span> <span class='id fstr'>fstr</span><span class='period'>.</span><span class='id last_spec_tried'>last_spec_tried</span>

    <span class='kw'>if</span> <span class='id spec'>spec</span><span class='period'>.</span><span class='id matched'>matched</span>
      <span class='kw'>if</span> <span class='id spec'>spec</span><span class='period'>.</span><span class='id mid_match?'>mid_match?</span>
        <span class='id result_buffer'>result_buffer</span><span class='period'>.</span><span class='id replace'>replace</span><span class='lparen'>(</span><span class='id current_match'>current_match</span><span class='rparen'>)</span>
        <span class='kw'>next</span>
      <span class='kw'>end</span>

    <span class='kw'>elsif</span> <span class='lparen'>(</span><span class='id fstr'>fstr</span><span class='period'>.</span><span class='id matched_count'>matched_count</span> <span class='op'>==</span> <span class='id fstr'>fstr</span><span class='period'>.</span><span class='id spec_count'>spec_count</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A\s*\z</span><span class='regexp_end'>/</span></span><span class='period'>.</span><span class='id match'>match</span><span class='lparen'>(</span><span class='id fstr'>fstr</span><span class='period'>.</span><span class='id string_left'>string_left</span><span class='rparen'>)</span>
        <span class='kw'>break</span> <span class='kw'>if</span> <span class='id spec'>spec</span><span class='period'>.</span><span class='id count_space?'>count_space?</span>
        <span class='id result_buffer'>result_buffer</span><span class='period'>.</span><span class='id replace'>replace</span><span class='lparen'>(</span><span class='id current_match'>current_match</span><span class='rparen'>)</span>
        <span class='kw'>next</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id final_result'>final_result</span><span class='period'>.</span><span class='id concat'>concat</span><span class='lparen'>(</span><span class='id current_match'>current_match</span><span class='rparen'>)</span>

    <span class='id matched_so_far'>matched_so_far</span> <span class='op'>+=</span> <span class='id source_buffer'>source_buffer</span><span class='period'>.</span><span class='id size'>size</span>
    <span class='id source_buffer'>source_buffer</span><span class='period'>.</span><span class='id replace'>replace</span><span class='lparen'>(</span><span class='id fstr'>fstr</span><span class='period'>.</span><span class='id string_left'>string_left</span><span class='rparen'>)</span>
    <span class='id matched_so_far'>matched_so_far</span> <span class='op'>-=</span> <span class='id source_buffer'>source_buffer</span><span class='period'>.</span><span class='id size'>size</span>
    <span class='kw'>break</span> <span class='kw'>if</span> <span class='id fstr'>fstr</span><span class='period'>.</span><span class='id last_spec'>last_spec</span>
    <span class='id fstr'>fstr</span><span class='period'>.</span><span class='id prune'>prune</span>
  <span class='kw'>end</span>
  <span class='id seek'>seek</span><span class='lparen'>(</span><span class='id start_position'>start_position</span> <span class='op'>+</span> <span class='id matched_so_far'>matched_so_far</span><span class='comma'>,</span> <span class='const'>IO</span><span class='op'>::</span><span class='const'>SEEK_SET</span><span class='rparen'>)</span> <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ESPIPE</span>
  <span class='id soak_up_spaces'>soak_up_spaces</span> <span class='kw'>if</span> <span class='id fstr'>fstr</span><span class='period'>.</span><span class='id last_spec'>last_spec</span> <span class='op'>&amp;&amp;</span> <span class='id fstr'>fstr</span><span class='period'>.</span><span class='id space'>space</span>

  <span class='kw'>return</span> <span class='id final_result'>final_result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="soak_up_spaces-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>soak_up_spaces</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


668
669
670
671
672
673
674
675</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/scanf.rb', line 668</span>

<span class='kw'>def</span> <span class='id soak_up_spaces'>soak_up_spaces</span>
  <span class='id c'>c</span> <span class='op'>=</span> <span class='id getc'>getc</span>
  <span class='id ungetc'>ungetc</span><span class='lparen'>(</span><span class='id c'>c</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id c'>c</span>
  <span class='kw'>until</span> <span class='id eof'>eof</span> <span class='op'>||</span><span class='op'>!</span> <span class='id c'>c</span> <span class='op'>||</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\S</span><span class='regexp_end'>/</span></span><span class='period'>.</span><span class='id match'>match</span><span class='lparen'>(</span><span class='id c'>c</span><span class='period'>.</span><span class='id chr'>chr</span><span class='rparen'>)</span>
    <span class='id c'>c</span> <span class='op'>=</span> <span class='id getc'>getc</span>
  <span class='kw'>end</span>
  <span class='id ungetc'>ungetc</span><span class='lparen'>(</span><span class='id c'>c</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='lparen'>(</span><span class='id c'>c</span> <span class='op'>&amp;&amp;</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\S</span><span class='regexp_end'>/</span></span><span class='period'>.</span><span class='id match'>match</span><span class='lparen'>(</span><span class='id c'>c</span><span class='period'>.</span><span class='id chr'>chr</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sat Sep  3 14:10:01 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.9.3).
</div>

  </body>
</html>