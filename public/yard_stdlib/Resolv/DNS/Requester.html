<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Resolv::DNS::Requester
  
    &mdash; Ruby 1.9 Ruby Standard Library
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (R)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../Resolv.html" title="Resolv (class)">Resolv</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../DNS.html" title="Resolv::DNS (class)">DNS</a></span></span>
     &raquo; 
    <span class="title">Requester</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Resolv::DNS::Requester
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Resolv::DNS::Requester</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/resolv.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="Requester/ConnectedUDP.html" title="Resolv::DNS::Requester::ConnectedUDP (class)">ConnectedUDP</a></span>, <span class='object_link'><a href="Requester/TCP.html" title="Resolv::DNS::Requester::TCP (class)">TCP</a></span>, <span class='object_link'><a href="Requester/UnconnectedUDP.html" title="Resolv::DNS::Requester::UnconnectedUDP (class)">UnconnectedUDP</a></span></p>
</div>
<h2>Defined Under Namespace</h2>
<p class="children">
   
    
   
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Requester/ConnectedUDP.html" title="Resolv::DNS::Requester::ConnectedUDP (class)">ConnectedUDP</a></span>, <span class='object_link'><a href="Requester/RequestError.html" title="Resolv::DNS::Requester::RequestError (class)">RequestError</a></span>, <span class='object_link'><a href="Requester/Sender.html" title="Resolv::DNS::Requester::Sender (class)">Sender</a></span>, <span class='object_link'><a href="Requester/TCP.html" title="Resolv::DNS::Requester::TCP (class)">TCP</a></span>, <span class='object_link'><a href="Requester/UnconnectedUDP.html" title="Resolv::DNS::Requester::UnconnectedUDP (class)">UnconnectedUDP</a></span>
    
  
</p>





  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#close-instance_method" title="#close (instance method)">- (Object) <strong>close</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Requester) <strong>initialize</strong> </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of Requester.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#request-instance_method" title="#request (instance method)">- (Object) <strong>request</strong>(sender, tout) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Resolv::DNS::Requester (class)">Requester</a></span></tt>) <strong>initialize</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>A new instance of Requester</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


639
640
641
642</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/resolv.rb', line 639</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span>
  <span class='ivar'>@senders</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@socks</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="close-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>close</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


679
680
681
682
683
684
685</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/resolv.rb', line 679</span>

<span class='kw'>def</span> <span class='id close'>close</span>
  <span class='id socks'>socks</span> <span class='op'>=</span> <span class='ivar'>@socks</span>
  <span class='ivar'>@socks</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>if</span> <span class='id socks'>socks</span>
    <span class='id socks'>socks</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id sock'>sock</span><span class='op'>|</span> <span class='id sock'>sock</span><span class='period'>.</span><span class='id close'>close</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="request-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>request</strong>(sender, tout) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


644
645
646
647
648
649
650
651
652
653
654
655
656
657
658
659
660
661
662
663
664
665
666
667
668
669
670
671
672
673
674
675
676
677</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/resolv.rb', line 644</span>

<span class='kw'>def</span> <span class='id request'>request</span><span class='lparen'>(</span><span class='id sender'>sender</span><span class='comma'>,</span> <span class='id tout'>tout</span><span class='rparen'>)</span>
  <span class='id timelimit'>timelimit</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id now'>now</span> <span class='op'>+</span> <span class='id tout'>tout</span>
  <span class='id sender'>sender</span><span class='period'>.</span><span class='id send'>send</span>
  <span class='kw'>while</span> <span class='kw'>true</span>
    <span class='id now'>now</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id now'>now</span>
    <span class='id timeout'>timeout</span> <span class='op'>=</span> <span class='id timelimit'>timelimit</span> <span class='op'>-</span> <span class='id now'>now</span>
    <span class='kw'>if</span> <span class='id timeout'>timeout</span> <span class='op'>&lt;=</span> <span class='int'>0</span>
      <span class='id raise'>raise</span> <span class='const'>ResolvTimeout</span>
    <span class='kw'>end</span>
    <span class='id select_result'>select_result</span> <span class='op'>=</span> <span class='const'>IO</span><span class='period'>.</span><span class='id select'>select</span><span class='lparen'>(</span><span class='ivar'>@socks</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id timeout'>timeout</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id select_result'>select_result</span>
      <span class='id raise'>raise</span> <span class='const'>ResolvTimeout</span>
    <span class='kw'>end</span>
    <span class='kw'>begin</span>
      <span class='id reply'>reply</span><span class='comma'>,</span> <span class='id from'>from</span> <span class='op'>=</span> <span class='id recv_reply'>recv_reply</span><span class='lparen'>(</span><span class='id select_result'>select_result</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ECONNREFUSED</span><span class='comma'>,</span> <span class='comment'># GNU/Linux, FreeBSD
</span>           <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ECONNRESET</span> <span class='comment'># Windows
</span>      <span class='comment'># No name server running on the server?
</span>      <span class='comment'># Don't wait anymore.
</span>      <span class='id raise'>raise</span> <span class='const'>ResolvTimeout</span>
    <span class='kw'>end</span>
    <span class='kw'>begin</span>
      <span class='id msg'>msg</span> <span class='op'>=</span> <span class='const'>Message</span><span class='period'>.</span><span class='id decode'>decode</span><span class='lparen'>(</span><span class='id reply'>reply</span><span class='rparen'>)</span>
    <span class='kw'>rescue</span> <span class='const'>DecodeError</span>
      <span class='kw'>next</span> <span class='comment'># broken DNS message ignored
</span>    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id s'>s</span> <span class='op'>=</span> <span class='ivar'>@senders</span><span class='lbracket'>[</span><span class='lbracket'>[</span><span class='id from'>from</span><span class='comma'>,</span><span class='id msg'>msg</span><span class='period'>.</span><span class='id id'>id</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
      <span class='kw'>break</span>
    <span class='kw'>else</span>
      <span class='comment'># unexpected DNS message ignored
</span>    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id msg'>msg</span><span class='comma'>,</span> <span class='id s'>s</span><span class='period'>.</span><span class='id data'>data</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sat Sep  3 14:10:05 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.9.3).
</div>

  </body>
</html>