<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: GetoptLong
  
    &mdash; Ruby 1.9 Ruby Standard Library
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (G)</a> &raquo; 
    
    
    <span class="title">GetoptLong</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: GetoptLong
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">GetoptLong</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/getoptlong.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>The GetoptLong class allows you to parse command line options similarly to
the GNU getopt_long() C library call. Note, however, that GetoptLong is a
pure Ruby implementation.</p>

<p>GetoptLong allows for POSIX-style options like <tt>--file</tt> as well as
single letter options like <tt>-f</tt></p>

<p>The empty option <tt>--</tt> (two minus symbols) is used to end option
processing. This can be particularly important if options have optional
arguments.</p>

<p>Here is a simple example of usage:</p>

<pre class="code"><span class='id require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>getoptlong</span><span class='tstring_end'>'</span></span>

<span class='id opts'>opts</span> <span class='op'>=</span> <span class='const'>GetoptLong</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span>
  <span class='lbracket'>[</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>--help</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>-h</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='const'>GetoptLong</span><span class='op'>::</span><span class='const'>NO_ARGUMENT</span> <span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='lbracket'>[</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>--repeat</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>-n</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='const'>GetoptLong</span><span class='op'>::</span><span class='const'>REQUIRED_ARGUMENT</span> <span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='lbracket'>[</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>--name</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='const'>GetoptLong</span><span class='op'>::</span><span class='const'>OPTIONAL_ARGUMENT</span> <span class='rbracket'>]</span>
<span class='rparen'>)</span>

<span class='id dir'>dir</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='id name'>name</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='id repetitions'>repetitions</span> <span class='op'>=</span> <span class='int'>1</span>
<span class='id opts'>opts</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id opt'>opt</span><span class='comma'>,</span> <span class='id arg'>arg</span><span class='op'>|</span>
  <span class='kw'>case</span> <span class='id opt'>opt</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>--help</span><span class='tstring_end'>'</span></span>
      <span class='id puts'>puts</span> <span class='heredoc_beg'>&lt;&lt;-EOF</span>
<span class='tstring_content'>hello [OPTION] ... DIR

-h, --help:
   show help

--repeat x, -n x:
   repeat x times

--name [name]:
   greet user by name, if name not supplied default is John

DIR: The directory in which to issue the greeting.
</span><span class='heredoc_end'>      EOF
</span>    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>--repeat</span><span class='tstring_end'>'</span></span>
      <span class='id repetitions'>repetitions</span> <span class='op'>=</span> <span class='id arg'>arg</span><span class='period'>.</span><span class='id to_i'>to_i</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>--name</span><span class='tstring_end'>'</span></span>
      <span class='kw'>if</span> <span class='id arg'>arg</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>
        <span class='id name'>name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>John</span><span class='tstring_end'>'</span></span>
      <span class='kw'>else</span>
        <span class='id name'>name</span> <span class='op'>=</span> <span class='id arg'>arg</span>
      <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='kw'>if</span> <span class='const'>ARGV</span><span class='period'>.</span><span class='id length'>length</span> <span class='op'>!=</span> <span class='int'>1</span>
  <span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Missing dir argument (try --help)</span><span class='tstring_end'>&quot;</span></span>
  <span class='id exit'>exit</span> <span class='int'>0</span>
<span class='kw'>end</span>

<span class='id dir'>dir</span> <span class='op'>=</span> <span class='const'>ARGV</span><span class='period'>.</span><span class='id shift'>shift</span>

<span class='const'>Dir</span><span class='period'>.</span><span class='id chdir'>chdir</span><span class='lparen'>(</span><span class='id dir'>dir</span><span class='rparen'>)</span>
<span class='kw'>for</span> <span class='id i'>i</span> <span class='kw'>in</span> <span class='lparen'>(</span><span class='int'>1</span><span class='op'>..</span><span class='id repetitions'>repetitions</span><span class='rparen'>)</span>
  <span class='id print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>if</span> <span class='id name'>name</span>
    <span class='id print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>, </span><span class='embexpr_beg'>#{</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id puts'>puts</span>
<span class='kw'>end</span></pre>

<p>Example command line:</p>

<pre class="code">hello -n 6 --name -- /tmp</pre>


  </div>
</div>
<div class="tags">
  
</div><h2>Defined Under Namespace</h2>
<p class="children">
   
    
   
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="GetoptLong/AmbiguousOption.html" title="GetoptLong::AmbiguousOption (class)">AmbiguousOption</a></span>, <span class='object_link'><a href="GetoptLong/Error.html" title="GetoptLong::Error (class)">Error</a></span>, <span class='object_link'><a href="GetoptLong/InvalidOption.html" title="GetoptLong::InvalidOption (class)">InvalidOption</a></span>, <span class='object_link'><a href="GetoptLong/MissingArgument.html" title="GetoptLong::MissingArgument (class)">MissingArgument</a></span>, <span class='object_link'><a href="GetoptLong/NeedlessArgument.html" title="GetoptLong::NeedlessArgument (class)">NeedlessArgument</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="ORDERINGS-constant" class="">ORDERINGS =
          <div class="docstring">
  <div class="discussion">
    
<p>Orderings.</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='const'>REQUIRE_ORDER</span> <span class='op'>=</span> <span class='int'>0</span><span class='comma'>,</span> <span class='const'>PERMUTE</span> <span class='op'>=</span> <span class='int'>1</span><span class='comma'>,</span> <span class='const'>RETURN_IN_ORDER</span> <span class='op'>=</span> <span class='int'>2</span><span class='rbracket'>]</span></pre></dd>
      
        <dt id="ARGUMENT_FLAGS-constant" class="">ARGUMENT_FLAGS =
          <div class="docstring">
  <div class="discussion">
    
<p>Argument flags.</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='const'>NO_ARGUMENT</span> <span class='op'>=</span> <span class='int'>0</span><span class='comma'>,</span> <span class='const'>REQUIRED_ARGUMENT</span> <span class='op'>=</span> <span class='int'>1</span><span class='comma'>,</span>
<span class='const'>OPTIONAL_ARGUMENT</span> <span class='op'>=</span> <span class='int'>2</span><span class='rbracket'>]</span></pre></dd>
      
    </dl>
  


  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#error-instance_method" title="#error (instance method)">- (Object) <strong>error</strong> </a>
    

    
      (also: #error?)
    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Examine whether an option processing is failed.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#ordering-instance_method" title="#ordering (instance method)">- (Object) <strong>ordering</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return ordering.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#quiet-instance_method" title="#quiet (instance method)">- (Object) <strong>quiet</strong> </a>
    

    
      (also: #quiet?)
    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return the flag of `quiet' mode.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each-instance_method" title="#each (instance method)">- (Object) <strong>each</strong> </a>
    

    
      (also: #each_option)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Iterator version of `get'.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#error_message-instance_method" title="#error_message (instance method)">- (Object) <strong>error_message</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return the appropriate error message in POSIX-defined format.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get-instance_method" title="#get (instance method)">- (Object) <strong>get</strong> </a>
    

    
      (also: #get_option)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get next option name and its argument, as an Array of two elements.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (GetoptLong) <strong>initialize</strong>(*arguments) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Set up option processing.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_options-instance_method" title="#set_options (instance method)">- (Object) <strong>set_options</strong>(*arguments) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Set options.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#terminate-instance_method" title="#terminate (instance method)">- (Object) <strong>terminate</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Explicitly terminate option processing.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#terminated%3F-instance_method" title="#terminated? (instance method)">- (Boolean) <strong>terminated?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if option processing has terminated, false otherwise.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="GetoptLong (class)">GetoptLong</a></span></tt>) <strong>initialize</strong>(*arguments) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Set up option processing.</p>

<p>The options to support are passed to new() as an array of arrays. Each
sub-array contains any number of String option names which carry the same
meaning, and one of the following flags:</p>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>GetoptLong::NO_ARGUMENT </p></td>
<td>
<p>Option does not take an argument.</p>
</td></tr><tr><td class="rdoc-term"><p>GetoptLong::REQUIRED_ARGUMENT </p></td>
<td>
<p>Option always takes an argument.</p>
</td></tr><tr><td class="rdoc-term"><p>GetoptLong::OPTIONAL_ARGUMENT </p></td>
<td>
<p>Option may or may not take an argument.</p>
</td></tr></table>

<p>The first option name is considered to be the preferred (canonical) name.
Other than that, the elements of each sub-array can be in any order.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/getoptlong.rb', line 128</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='op'>*</span><span class='id arguments'>arguments</span><span class='rparen'>)</span>
  <span class='comment'>#
</span>  <span class='comment'># Current ordering.
</span>  <span class='comment'>#
</span>  <span class='kw'>if</span> <span class='const'>ENV</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>POSIXLY_CORRECT</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
    <span class='ivar'>@ordering</span> <span class='op'>=</span> <span class='const'>REQUIRE_ORDER</span>
  <span class='kw'>else</span>
    <span class='ivar'>@ordering</span> <span class='op'>=</span> <span class='const'>PERMUTE</span>
  <span class='kw'>end</span>

  <span class='comment'>#
</span>  <span class='comment'># Hash table of option names.
</span>  <span class='comment'># Keys of the table are option names, and their values are canonical
</span>  <span class='comment'># names of the options.
</span>  <span class='comment'>#
</span>  <span class='ivar'>@canonical_names</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id new'>new</span>

  <span class='comment'>#
</span>  <span class='comment'># Hash table of argument flags.
</span>  <span class='comment'># Keys of the table are option names, and their values are argument
</span>  <span class='comment'># flags of the options.
</span>  <span class='comment'>#
</span>  <span class='ivar'>@argument_flags</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id new'>new</span>

  <span class='comment'>#
</span>  <span class='comment'># Whether error messages are output to $stderr.
</span>  <span class='comment'>#
</span>  <span class='ivar'>@quiet</span> <span class='op'>=</span> <span class='const'>FALSE</span>

  <span class='comment'>#
</span>  <span class='comment'># Status code.
</span>  <span class='comment'>#
</span>  <span class='ivar'>@status</span> <span class='op'>=</span> <span class='const'>STATUS_YET</span>

  <span class='comment'>#
</span>  <span class='comment'># Error code.
</span>  <span class='comment'>#
</span>  <span class='ivar'>@error</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='comment'>#
</span>  <span class='comment'># Error message.
</span>  <span class='comment'>#
</span>  <span class='ivar'>@error_message</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='comment'>#
</span>  <span class='comment'># Rest of catenated short options.
</span>  <span class='comment'>#
</span>  <span class='ivar'>@rest_singles</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>

  <span class='comment'>#
</span>  <span class='comment'># List of non-option-arguments.
</span>  <span class='comment'># Append them to ARGV when option processing is terminated.
</span>  <span class='comment'>#
</span>  <span class='ivar'>@non_option_arguments</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id new'>new</span>

  <span class='kw'>if</span> <span class='int'>0</span> <span class='op'>&lt;</span> <span class='id arguments'>arguments</span><span class='period'>.</span><span class='id length'>length</span>
    <span class='id set_options'>set_options</span><span class='lparen'>(</span><span class='op'>*</span><span class='id arguments'>arguments</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="error-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="error-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>error</strong>  <span class="extras">(readonly)</span>
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='error?-instance_method'>error?</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    
<p>Examine whether an option processing is failed.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


401
402
403</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/getoptlong.rb', line 401</span>

<span class='kw'>def</span> <span class='id error'>error</span>
  <span class='ivar'>@error</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="ordering=-instance_method"></span>
      <span id="ordering-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="ordering-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>ordering</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Return ordering.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


263
264
265</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/getoptlong.rb', line 263</span>

<span class='kw'>def</span> <span class='id ordering'>ordering</span>
  <span class='ivar'>@ordering</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="quiet=-instance_method"></span>
      <span id="quiet-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="quiet-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>quiet</strong> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='quiet?-instance_method'>quiet?</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    
<p>Return the flag of `quiet' mode.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


347
348
349</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/getoptlong.rb', line 347</span>

<span class='kw'>def</span> <span class='id quiet'>quiet</span>
  <span class='ivar'>@quiet</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="each-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>each</strong> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='each_option-instance_method'>each_option</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    
<p>Iterator version of `get'.</p>

<p>The block is called repeatedly with two arguments: The first is the option
name. The second is the argument which followed it (if any). Example:
('--opt', 'value')</p>

<p>The option name is always converted to the first (preferred) name given in
the original options to GetoptLong.new.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


600
601
602
603
604
605
606</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/getoptlong.rb', line 600</span>

<span class='kw'>def</span> <span class='id each'>each</span>
  <span class='id loop'>loop</span> <span class='kw'>do</span>
    <span class='id option_name'>option_name</span><span class='comma'>,</span> <span class='id option_argument'>option_argument</span> <span class='op'>=</span> <span class='id get_option'>get_option</span>
    <span class='kw'>break</span> <span class='kw'>if</span> <span class='id option_name'>option_name</span> <span class='op'>==</span> <span class='kw'>nil</span>
    <span class='kw'>yield</span> <span class='id option_name'>option_name</span><span class='comma'>,</span> <span class='id option_argument'>option_argument</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="error_message-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>error_message</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Return the appropriate error message in POSIX-defined format. If no error
has occurred, returns nil.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


411
412
413</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/getoptlong.rb', line 411</span>

<span class='kw'>def</span> <span class='id error_message'>error_message</span>
  <span class='kw'>return</span> <span class='ivar'>@error_message</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="get-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>get</strong> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='get_option-instance_method'>get_option</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    
<p>Get next option name and its argument, as an Array of two elements.</p>

<p>The option name is always converted to the first (preferred) name given in
the original options to GetoptLong.new.</p>

<p>Example: ['--option', 'value']</p>

<p>Returns nil if the processing is complete (as determined by
STATUS_TERMINATED).</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/getoptlong.rb', line 426</span>

<span class='kw'>def</span> <span class='id get'>get</span>
  <span class='id option_name'>option_name</span><span class='comma'>,</span> <span class='id option_argument'>option_argument</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>

  <span class='comment'>#
</span>  <span class='comment'># Check status.
</span>  <span class='comment'>#
</span>  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='ivar'>@error</span> <span class='op'>!=</span> <span class='kw'>nil</span>
  <span class='kw'>case</span> <span class='ivar'>@status</span>
  <span class='kw'>when</span> <span class='const'>STATUS_YET</span>
    <span class='ivar'>@status</span> <span class='op'>=</span> <span class='const'>STATUS_STARTED</span>
  <span class='kw'>when</span> <span class='const'>STATUS_TERMINATED</span>
    <span class='kw'>return</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>

  <span class='comment'>#
</span>  <span class='comment'># Get next option argument.
</span>  <span class='comment'>#
</span>  <span class='kw'>if</span> <span class='int'>0</span> <span class='op'>&lt;</span> <span class='ivar'>@rest_singles</span><span class='period'>.</span><span class='id length'>length</span>
    <span class='id argument'>argument</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>-</span><span class='tstring_end'>'</span></span> <span class='op'>+</span> <span class='ivar'>@rest_singles</span>
  <span class='kw'>elsif</span> <span class='lparen'>(</span><span class='const'>ARGV</span><span class='period'>.</span><span class='id length'>length</span> <span class='op'>==</span> <span class='int'>0</span><span class='rparen'>)</span>
    <span class='id terminate'>terminate</span>
    <span class='kw'>return</span> <span class='kw'>nil</span>
  <span class='kw'>elsif</span> <span class='ivar'>@ordering</span> <span class='op'>==</span> <span class='const'>PERMUTE</span>
    <span class='kw'>while</span> <span class='int'>0</span> <span class='op'>&lt;</span> <span class='const'>ARGV</span><span class='period'>.</span><span class='id length'>length</span> <span class='op'>&amp;&amp;</span> <span class='const'>ARGV</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>!~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^-.</span><span class='regexp_end'>/</span></span>
      <span class='ivar'>@non_option_arguments</span><span class='period'>.</span><span class='id push'>push</span><span class='lparen'>(</span><span class='const'>ARGV</span><span class='period'>.</span><span class='id shift'>shift</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='const'>ARGV</span><span class='period'>.</span><span class='id length'>length</span> <span class='op'>==</span> <span class='int'>0</span>
      <span class='id terminate'>terminate</span>
      <span class='kw'>return</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
    <span class='id argument'>argument</span> <span class='op'>=</span> <span class='const'>ARGV</span><span class='period'>.</span><span class='id shift'>shift</span>
  <span class='kw'>elsif</span> <span class='ivar'>@ordering</span> <span class='op'>==</span> <span class='const'>REQUIRE_ORDER</span>
    <span class='kw'>if</span> <span class='lparen'>(</span><span class='const'>ARGV</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>!~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^-.</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
      <span class='id terminate'>terminate</span>
      <span class='kw'>return</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
    <span class='id argument'>argument</span> <span class='op'>=</span> <span class='const'>ARGV</span><span class='period'>.</span><span class='id shift'>shift</span>
  <span class='kw'>else</span>
    <span class='id argument'>argument</span> <span class='op'>=</span> <span class='const'>ARGV</span><span class='period'>.</span><span class='id shift'>shift</span>
  <span class='kw'>end</span>

  <span class='comment'>#
</span>  <span class='comment'># Check the special argument `--'.
</span>  <span class='comment'># `--' indicates the end of the option list.
</span>  <span class='comment'>#
</span>  <span class='kw'>if</span> <span class='id argument'>argument</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>--</span><span class='tstring_end'>'</span></span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@rest_singles</span><span class='period'>.</span><span class='id length'>length</span> <span class='op'>==</span> <span class='int'>0</span>
    <span class='id terminate'>terminate</span>
    <span class='kw'>return</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>

  <span class='comment'>#
</span>  <span class='comment'># Check for long and short options.
</span>  <span class='comment'>#
</span>  <span class='kw'>if</span> <span class='id argument'>argument</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^(--[^=]+)</span><span class='regexp_end'>/</span></span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@rest_singles</span><span class='period'>.</span><span class='id length'>length</span> <span class='op'>==</span> <span class='int'>0</span>
    <span class='comment'>#
</span>    <span class='comment'># This is a long style option, which start with `--'.
</span>    <span class='comment'>#
</span>    <span class='id pattern'>pattern</span> <span class='op'>=</span> <span class='backref'>$1</span>
    <span class='kw'>if</span> <span class='ivar'>@canonical_names</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='id pattern'>pattern</span><span class='rparen'>)</span>
      <span class='id option_name'>option_name</span> <span class='op'>=</span> <span class='id pattern'>pattern</span>
    <span class='kw'>else</span>
      <span class='comment'>#
</span>      <span class='comment'># The option `option_name' is not registered in `@canonical_names'.
</span>      <span class='comment'># It may be an abbreviated.
</span>      <span class='comment'>#
</span>      <span class='id matches'>matches</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
      <span class='ivar'>@canonical_names</span><span class='period'>.</span><span class='id each_key'>each_key</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id key'>key</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id key'>key</span><span class='period'>.</span><span class='id index'>index</span><span class='lparen'>(</span><span class='id pattern'>pattern</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>0</span>
          <span class='id option_name'>option_name</span> <span class='op'>=</span> <span class='id key'>key</span>
          <span class='id matches'>matches</span> <span class='op'>&lt;&lt;</span> <span class='id key'>key</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
      <span class='kw'>if</span> <span class='int'>2</span> <span class='op'>&lt;=</span> <span class='id matches'>matches</span><span class='period'>.</span><span class='id length'>length</span>
        <span class='id set_error'>set_error</span><span class='lparen'>(</span><span class='const'>AmbiguousOption</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>option `</span><span class='embexpr_beg'>#{</span><span class='id argument'>argument</span><span class='rbrace'>}</span><span class='tstring_content'>' is ambiguous between </span><span class='embexpr_beg'>#{</span><span class='id matches'>matches</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>, </span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>elsif</span> <span class='id matches'>matches</span><span class='period'>.</span><span class='id length'>length</span> <span class='op'>==</span> <span class='int'>0</span>
        <span class='id set_error'>set_error</span><span class='lparen'>(</span><span class='const'>InvalidOption</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unrecognized option `</span><span class='embexpr_beg'>#{</span><span class='id argument'>argument</span><span class='rbrace'>}</span><span class='tstring_content'>'</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='comment'>#
</span>    <span class='comment'># Check an argument to the option.
</span>    <span class='comment'>#
</span>    <span class='kw'>if</span> <span class='ivar'>@argument_flags</span><span class='lbracket'>[</span><span class='id option_name'>option_name</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='const'>REQUIRED_ARGUMENT</span>
      <span class='kw'>if</span> <span class='id argument'>argument</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>=(.*)$</span><span class='regexp_end'>/</span></span>
        <span class='id option_argument'>option_argument</span> <span class='op'>=</span> <span class='backref'>$1</span>
      <span class='kw'>elsif</span> <span class='int'>0</span> <span class='op'>&lt;</span> <span class='const'>ARGV</span><span class='period'>.</span><span class='id length'>length</span>
        <span class='id option_argument'>option_argument</span> <span class='op'>=</span> <span class='const'>ARGV</span><span class='period'>.</span><span class='id shift'>shift</span>
      <span class='kw'>else</span>
        <span class='id set_error'>set_error</span><span class='lparen'>(</span><span class='const'>MissingArgument</span><span class='comma'>,</span>
                  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>option `</span><span class='embexpr_beg'>#{</span><span class='id argument'>argument</span><span class='rbrace'>}</span><span class='tstring_content'>' requires an argument</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>elsif</span> <span class='ivar'>@argument_flags</span><span class='lbracket'>[</span><span class='id option_name'>option_name</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='const'>OPTIONAL_ARGUMENT</span>
      <span class='kw'>if</span> <span class='id argument'>argument</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>=(.*)$</span><span class='regexp_end'>/</span></span>
        <span class='id option_argument'>option_argument</span> <span class='op'>=</span> <span class='backref'>$1</span>
      <span class='kw'>elsif</span> <span class='int'>0</span> <span class='op'>&lt;</span> <span class='const'>ARGV</span><span class='period'>.</span><span class='id length'>length</span> <span class='op'>&amp;&amp;</span> <span class='const'>ARGV</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>!~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^-.</span><span class='regexp_end'>/</span></span>
        <span class='id option_argument'>option_argument</span> <span class='op'>=</span> <span class='const'>ARGV</span><span class='period'>.</span><span class='id shift'>shift</span>
      <span class='kw'>else</span>
        <span class='id option_argument'>option_argument</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>
      <span class='kw'>end</span>
    <span class='kw'>elsif</span> <span class='id argument'>argument</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>=(.*)$</span><span class='regexp_end'>/</span></span>
      <span class='id set_error'>set_error</span><span class='lparen'>(</span><span class='const'>NeedlessArgument</span><span class='comma'>,</span>
                <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>option `</span><span class='embexpr_beg'>#{</span><span class='id option_name'>option_name</span><span class='rbrace'>}</span><span class='tstring_content'>' doesn't allow an argument</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>

  <span class='kw'>elsif</span> <span class='id argument'>argument</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^(-(.))(.*)</span><span class='regexp_end'>/</span></span>
    <span class='comment'>#
</span>    <span class='comment'># This is a short style option, which start with `-' (not `--').
</span>    <span class='comment'># Short options may be catenated (e.g. `-l -g' is equivalent to
</span>    <span class='comment'># `-lg').
</span>    <span class='comment'>#
</span>    <span class='id option_name'>option_name</span><span class='comma'>,</span> <span class='id ch'>ch</span><span class='comma'>,</span> <span class='ivar'>@rest_singles</span> <span class='op'>=</span> <span class='backref'>$1</span><span class='comma'>,</span> <span class='backref'>$2</span><span class='comma'>,</span> <span class='backref'>$3</span>

    <span class='kw'>if</span> <span class='ivar'>@canonical_names</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='id option_name'>option_name</span><span class='rparen'>)</span>
      <span class='comment'>#
</span>      <span class='comment'># The option `option_name' is found in `@canonical_names'.
</span>      <span class='comment'># Check its argument.
</span>      <span class='comment'>#
</span>      <span class='kw'>if</span> <span class='ivar'>@argument_flags</span><span class='lbracket'>[</span><span class='id option_name'>option_name</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='const'>REQUIRED_ARGUMENT</span>
        <span class='kw'>if</span> <span class='int'>0</span> <span class='op'>&lt;</span> <span class='ivar'>@rest_singles</span><span class='period'>.</span><span class='id length'>length</span>
          <span class='id option_argument'>option_argument</span> <span class='op'>=</span> <span class='ivar'>@rest_singles</span>
          <span class='ivar'>@rest_singles</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>
        <span class='kw'>elsif</span> <span class='int'>0</span> <span class='op'>&lt;</span> <span class='const'>ARGV</span><span class='period'>.</span><span class='id length'>length</span>
          <span class='id option_argument'>option_argument</span> <span class='op'>=</span> <span class='const'>ARGV</span><span class='period'>.</span><span class='id shift'>shift</span>
        <span class='kw'>else</span>
          <span class='comment'># 1003.2 specifies the format of this message.
</span>          <span class='id set_error'>set_error</span><span class='lparen'>(</span><span class='const'>MissingArgument</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>option requires an argument -- </span><span class='embexpr_beg'>#{</span><span class='id ch'>ch</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>elsif</span> <span class='ivar'>@argument_flags</span><span class='lbracket'>[</span><span class='id option_name'>option_name</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='const'>OPTIONAL_ARGUMENT</span>
        <span class='kw'>if</span> <span class='int'>0</span> <span class='op'>&lt;</span> <span class='ivar'>@rest_singles</span><span class='period'>.</span><span class='id length'>length</span>
          <span class='id option_argument'>option_argument</span> <span class='op'>=</span> <span class='ivar'>@rest_singles</span>
          <span class='ivar'>@rest_singles</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>
        <span class='kw'>elsif</span> <span class='int'>0</span> <span class='op'>&lt;</span> <span class='const'>ARGV</span><span class='period'>.</span><span class='id length'>length</span> <span class='op'>&amp;&amp;</span> <span class='const'>ARGV</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>!~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^-.</span><span class='regexp_end'>/</span></span>
          <span class='id option_argument'>option_argument</span> <span class='op'>=</span> <span class='const'>ARGV</span><span class='period'>.</span><span class='id shift'>shift</span>
        <span class='kw'>else</span>
          <span class='id option_argument'>option_argument</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='comment'>#
</span>      <span class='comment'># This is an invalid option.
</span>      <span class='comment'># 1003.2 specifies the format of this message.
</span>      <span class='comment'>#
</span>      <span class='kw'>if</span> <span class='const'>ENV</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>POSIXLY_CORRECT</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
        <span class='id set_error'>set_error</span><span class='lparen'>(</span><span class='const'>InvalidOption</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid option -- </span><span class='embexpr_beg'>#{</span><span class='id ch'>ch</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id set_error'>set_error</span><span class='lparen'>(</span><span class='const'>InvalidOption</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid option -- </span><span class='embexpr_beg'>#{</span><span class='id ch'>ch</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='comment'>#
</span>    <span class='comment'># This is a non-option argument.
</span>    <span class='comment'># Only RETURN_IN_ORDER falled into here.
</span>    <span class='comment'>#
</span>    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='id argument'>argument</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='ivar'>@canonical_names</span><span class='lbracket'>[</span><span class='id option_name'>option_name</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id option_argument'>option_argument</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="set_options-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>set_options</strong>(*arguments) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Set options. Takes the same argument as GetoptLong.new.</p>

<p>Raises a RuntimeError if option processing has already started.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/getoptlong.rb', line 270</span>

<span class='kw'>def</span> <span class='id set_options'>set_options</span><span class='lparen'>(</span><span class='op'>*</span><span class='id arguments'>arguments</span><span class='rparen'>)</span>
  <span class='comment'>#
</span>  <span class='comment'># The method is failed if option processing has already started.
</span>  <span class='comment'>#
</span>  <span class='kw'>if</span> <span class='ivar'>@status</span> <span class='op'>!=</span> <span class='const'>STATUS_YET</span>
    <span class='id raise'>raise</span> <span class='const'>RuntimeError</span><span class='comma'>,</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invoke set_options, but option processing has already started</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'>#
</span>  <span class='comment'># Clear tables of option names and argument flags.
</span>  <span class='comment'>#
</span>  <span class='ivar'>@canonical_names</span><span class='period'>.</span><span class='id clear'>clear</span>
  <span class='ivar'>@argument_flags</span><span class='period'>.</span><span class='id clear'>clear</span>

  <span class='id arguments'>arguments</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id arg'>arg</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id arg'>arg</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
     <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>the option list contains non-Array argument</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='comment'>#
</span>    <span class='comment'># Find an argument flag and it set to `argument_flag'.
</span>    <span class='comment'>#
</span>    <span class='id argument_flag'>argument_flag</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id arg'>arg</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='const'>ARGUMENT_FLAGS</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='id i'>i</span><span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='id argument_flag'>argument_flag</span> <span class='op'>!=</span> <span class='kw'>nil</span>
          <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>too many argument-flags</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='id argument_flag'>argument_flag</span> <span class='op'>=</span> <span class='id i'>i</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>no argument-flag</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id argument_flag'>argument_flag</span> <span class='op'>==</span> <span class='kw'>nil</span>

    <span class='id canonical_name'>canonical_name</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id arg'>arg</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span>
      <span class='comment'>#
</span>      <span class='comment'># Check an option name.
</span>      <span class='comment'>#
</span>      <span class='kw'>next</span> <span class='kw'>if</span> <span class='id i'>i</span> <span class='op'>==</span> <span class='id argument_flag'>argument_flag</span>
      <span class='kw'>begin</span>
        <span class='kw'>if</span> <span class='op'>!</span><span class='id i'>i</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id i'>i</span> <span class='op'>!~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^-([^-]|-.+)$</span><span class='regexp_end'>/</span></span>
          <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>an invalid option `</span><span class='embexpr_beg'>#{</span><span class='id i'>i</span><span class='rbrace'>}</span><span class='tstring_content'>'</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='lparen'>(</span><span class='ivar'>@canonical_names</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='id i'>i</span><span class='rparen'>)</span><span class='rparen'>)</span>
          <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>option redefined `</span><span class='embexpr_beg'>#{</span><span class='id i'>i</span><span class='rbrace'>}</span><span class='tstring_content'>'</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
      <span class='kw'>rescue</span>
        <span class='ivar'>@canonical_names</span><span class='period'>.</span><span class='id clear'>clear</span>
        <span class='ivar'>@argument_flags</span><span class='period'>.</span><span class='id clear'>clear</span>
        <span class='id raise'>raise</span>
      <span class='kw'>end</span>

      <span class='comment'>#
</span>      <span class='comment'># Register the option (`i') to the `@canonical_names' and
</span>      <span class='comment'># `@canonical_names' Hashes.
</span>      <span class='comment'>#
</span>      <span class='kw'>if</span> <span class='id canonical_name'>canonical_name</span> <span class='op'>==</span> <span class='kw'>nil</span>
        <span class='id canonical_name'>canonical_name</span> <span class='op'>=</span> <span class='id i'>i</span>
      <span class='kw'>end</span>
      <span class='ivar'>@canonical_names</span><span class='lbracket'>[</span><span class='id i'>i</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id canonical_name'>canonical_name</span>
      <span class='ivar'>@argument_flags</span><span class='lbracket'>[</span><span class='id i'>i</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id argument_flag'>argument_flag</span>
    <span class='kw'>end</span>
    <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>no option name</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id canonical_name'>canonical_name</span> <span class='op'>==</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="terminate-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>terminate</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Explicitly terminate option processing.</p>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RuntimeError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/getoptlong.rb', line 357</span>

<span class='kw'>def</span> <span class='id terminate'>terminate</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='ivar'>@status</span> <span class='op'>==</span> <span class='const'>STATUS_TERMINATED</span>
  <span class='id raise'>raise</span> <span class='const'>RuntimeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>an error has occured</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='ivar'>@error</span> <span class='op'>!=</span> <span class='kw'>nil</span>

  <span class='ivar'>@status</span> <span class='op'>=</span> <span class='const'>STATUS_TERMINATED</span>
  <span class='ivar'>@non_option_arguments</span><span class='period'>.</span><span class='id reverse_each'>reverse_each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id argument'>argument</span><span class='op'>|</span>
    <span class='const'>ARGV</span><span class='period'>.</span><span class='id unshift'>unshift</span><span class='lparen'>(</span><span class='id argument'>argument</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='ivar'>@canonical_names</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@argument_flags</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@rest_singles</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@non_option_arguments</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='kw'>return</span> <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="terminated?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>terminated?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns true if option processing has terminated, false otherwise.</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


377
378
379</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/getoptlong.rb', line 377</span>

<span class='kw'>def</span> <span class='id terminated?'>terminated?</span>
  <span class='kw'>return</span> <span class='ivar'>@status</span> <span class='op'>==</span> <span class='const'>STATUS_TERMINATED</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sat Sep  3 14:10:55 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.9.3).
</div>

  </body>
</html>