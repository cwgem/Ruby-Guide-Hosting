<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: CGI
  
    &mdash; Ruby 1.9 Ruby Standard Library
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (C)</a> &raquo; 
    
    
    <span class="title">CGI</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: CGI
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">CGI</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/cgi.rb<span class="defines">,<br />
  lib/cgi/html.rb,<br /> lib/cgi/util.rb,<br /> lib/cgi/core.rb,<br /> lib/cgi/cookie.rb,<br /> lib/cgi/session.rb,<br /> lib/cgi/session/pstore.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>-- Methods for generating HTML, parsing CGI-related parameters, and
generating HTTP responses. ++</p>


  </div>
</div>
<div class="tags">
  
</div><h2>Defined Under Namespace</h2>
<p class="children">
   
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="CGI/Html3.html" title="CGI::Html3 (module)">Html3</a></span>, <span class='object_link'><a href="CGI/Html4.html" title="CGI::Html4 (module)">Html4</a></span>, <span class='object_link'><a href="CGI/Html4Fr.html" title="CGI::Html4Fr (module)">Html4Fr</a></span>, <span class='object_link'><a href="CGI/Html4Tr.html" title="CGI::Html4Tr (module)">Html4Tr</a></span>, <span class='object_link'><a href="CGI/HtmlExtension.html" title="CGI::HtmlExtension (module)">HtmlExtension</a></span>, <span class='object_link'><a href="CGI/QueryExtension.html" title="CGI::QueryExtension (module)">QueryExtension</a></span>, <span class='object_link'><a href="CGI/TagMaker.html" title="CGI::TagMaker (module)">TagMaker</a></span>
    
   
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="CGI/Cookie.html" title="CGI::Cookie (class)">Cookie</a></span>, <span class='object_link'><a href="CGI/InvalidEncoding.html" title="CGI::InvalidEncoding (class)">InvalidEncoding</a></span>, <span class='object_link'><a href="CGI/Session.html" title="CGI::Session (class)">Session</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="TABLE_FOR_ESCAPE_HTML__-constant" class="">TABLE_FOR_ESCAPE_HTML__ =
          <div class="docstring">
  <div class="discussion">
    
<p>The set of special characters and their escaped values</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&amp;amp;</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&amp;quot;</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&amp;lt;</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&amp;gt;</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
<span class='rbrace'>}</span></pre></dd>
      
        <dt id="RFC822_DAYS-constant" class="">RFC822_DAYS =
          <div class="docstring">
  <div class="discussion">
    
<p>Abbreviated day-of-week names specified by RFC 822</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code">[0].kind_of?(Array)
  unless elements.empty?
    string.gsub(/&amp;lt;\/?(?:#{elements.join(&quot;|&quot;)})(?!\w)(?:.|\n)*?&amp;gt;/i) do
      CGI::unescapeHTML($&amp;)
    end
  else
    string
  end
end

# Synonym for CGI::escapeElement(str)
def CGI::escape_element(str)
  escapeElement(str)
end

# Synonym for CGI::unescapeElement(str)
def CGI::unescape_element(str)
  unescapeElement(str)
end

# Abbreviated day-of-week names specified by RFC 822
RFC822_DAYS = %w[ Sun Mon Tue Wed Thu Fri Sat ]</pre></dd>
      
        <dt id="RFC822_MONTHS-constant" class="">RFC822_MONTHS =
          <div class="docstring">
  <div class="discussion">
    
<p>Abbreviated month names specified by RFC 822</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code">[0] if elements[0].kind_of?(Array)
  unless elements.empty?
    string.gsub(/&amp;lt;\/?(?:#{elements.join(&quot;|&quot;)})(?!\w)(?:.|\n)*?&amp;gt;/i) do
      CGI::unescapeHTML($&amp;)
    end
  else
    string
  end
end

# Synonym for CGI::escapeElement(str)
def CGI::escape_element(str)
  escapeElement(str)
end

# Synonym for CGI::unescapeElement(str)
def CGI::unescape_element(str)
  unescapeElement(str)
end

# Abbreviated day-of-week names specified by RFC 822
RFC822_DAYS = %w[ Sun Mon Tue Wed Thu Fri Sat ]

# Abbreviated month names specified by RFC 822
RFC822_MONTHS = %w[ Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec ]</pre></dd>
      
        <dt id="CR-constant" class="">CR =
          <div class="docstring">
  <div class="discussion">
    
<p>String for carriage return</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\015</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="LF-constant" class="">LF =
          <div class="docstring">
  <div class="discussion">
    
<p>String for linefeed</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\012</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="EOL-constant" class="">EOL =
          <div class="docstring">
  <div class="discussion">
    
<p>Standard internet newline sequence</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='const'>CR</span> <span class='op'>+</span> <span class='const'>LF</span></pre></dd>
      
        <dt id="REVISION-constant" class="">REVISION =
          <div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>$Id: core.rb 32469 2011-07-09 05:32:19Z xibbar $</span><span class='tstring_end'>'</span></span></pre></dd>
      
        <dt id="NEEDS_BINMODE-constant" class="">NEEDS_BINMODE =
          <div class="docstring">
  <div class="discussion">
    
<p>Whether processing will be required in binary vs text</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='const'>File</span><span class='op'>::</span><span class='const'>BINARY</span> <span class='op'>!=</span> <span class='int'>0</span></pre></dd>
      
        <dt id="PATH_SEPARATOR-constant" class="">PATH_SEPARATOR =
          <div class="docstring">
  <div class="discussion">
    
<p>Path separators in different environments.</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>UNIX</span><span class='tstring_end'>'</span></span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>WINDOWS</span><span class='tstring_end'>'</span></span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>\\</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>MACINTOSH</span><span class='tstring_end'>'</span></span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>:</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span></pre></dd>
      
        <dt id="HTTP_STATUS-constant" class="">HTTP_STATUS =
          <div class="docstring">
  <div class="discussion">
    
<p>HTTP status codes.</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OK</span><span class='tstring_end'>&quot;</span></span>                  <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>200 OK</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>PARTIAL_CONTENT</span><span class='tstring_end'>&quot;</span></span>     <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>206 Partial Content</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MULTIPLE_CHOICES</span><span class='tstring_end'>&quot;</span></span>    <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>300 Multiple Choices</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MOVED</span><span class='tstring_end'>&quot;</span></span>               <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>301 Moved Permanently</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>REDIRECT</span><span class='tstring_end'>&quot;</span></span>            <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>302 Found</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NOT_MODIFIED</span><span class='tstring_end'>&quot;</span></span>        <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>304 Not Modified</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BAD_REQUEST</span><span class='tstring_end'>&quot;</span></span>         <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>400 Bad Request</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>AUTH_REQUIRED</span><span class='tstring_end'>&quot;</span></span>       <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>401 Authorization Required</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FORBIDDEN</span><span class='tstring_end'>&quot;</span></span>           <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>403 Forbidden</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NOT_FOUND</span><span class='tstring_end'>&quot;</span></span>           <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>404 Not Found</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>METHOD_NOT_ALLOWED</span><span class='tstring_end'>&quot;</span></span>  <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>405 Method Not Allowed</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NOT_ACCEPTABLE</span><span class='tstring_end'>&quot;</span></span>      <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>406 Not Acceptable</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LENGTH_REQUIRED</span><span class='tstring_end'>&quot;</span></span>     <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>411 Length Required</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>PRECONDITION_FAILED</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>412 Precondition Failed</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SERVER_ERROR</span><span class='tstring_end'>&quot;</span></span>        <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>500 Internal Server Error</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NOT_IMPLEMENTED</span><span class='tstring_end'>&quot;</span></span>     <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>501 Method Not Implemented</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BAD_GATEWAY</span><span class='tstring_end'>&quot;</span></span>         <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>502 Bad Gateway</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>VARIANT_ALSO_VARIES</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>506 Variant Also Negotiates</span><span class='tstring_end'>&quot;</span></span>
<span class='rbrace'>}</span></pre></dd>
      
        <dt id="MAX_MULTIPART_LENGTH-constant" class="">MAX_MULTIPART_LENGTH =
          <div class="docstring">
  <div class="discussion">
    
<p>Maximum content length of multipart data</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='int'>128</span> <span class='op'>*</span> <span class='int'>1024</span> <span class='op'>*</span> <span class='int'>1024</span></pre></dd>
      
        <dt id="MAX_MULTIPART_COUNT-constant" class="">MAX_MULTIPART_COUNT =
          <div class="docstring">
  <div class="discussion">
    
<p>Maximum number of request parameters when multipart</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='int'>128</span></pre></dd>
      
        <dt id="accept_charset-classvariable" class="">@@accept_charset =
          <div class="docstring">
  <div class="discussion">
    
<p>@@accept_charset is default accept character set. This default value
default is "UTF-8" If you want to change the default accept character set
when create a new CGI instance, set this:</p>

<pre class="code"><span class='const'>CGI</span><span class='period'>.</span><span class='id accept_charset'>accept_charset</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EUC-JP</span><span class='tstring_end'>&quot;</span></span></pre>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
    </dl>
  


  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#accept_charset-instance_method" title="#accept_charset (instance method)">- (Object) <strong>accept_charset</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return the accept character set for this CGI instance.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#accept_charset-class_method" title="accept_charset (class method)">+ (Object) <strong>accept_charset</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return the accept character set for all new CGI instances.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#accept_charset%3D-class_method" title="accept_charset= (class method)">+ (Object) <strong>accept_charset=</strong>(accept_charset) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Set the accept character set for all new CGI instances.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#escape-class_method" title="escape (class method)">+ (Object) <strong>escape</strong>(string) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>URL-encode a string.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#escape_element-class_method" title="escape_element (class method)">+ (Object) <strong>escape_element</strong>(str) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Synonym for CGI::escapeElement(str).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#escape_html-class_method" title="escape_html (class method)">+ (Object) <strong>escape_html</strong>(str) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Synonym for CGI::escapeHTML(str).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#escapeElement-class_method" title="escapeElement (class method)">+ (Object) <strong>escapeElement</strong>(string, *elements) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Escape only the tags of certain HTML elements in <tt>string</tt>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#escapeHTML-class_method" title="escapeHTML (class method)">+ (Object) <strong>escapeHTML</strong>(string) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Escape special characters in HTML, namely &amp;&quot;&lt;&gt;.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parse-class_method" title="parse (class method)">+ (Object) <strong>parse</strong>(query) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Parse an HTTP query string into a hash of key=&gt;value pairs.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pretty-class_method" title="pretty (class method)">+ (Object) <strong>pretty</strong>(string, shift = &quot;  &quot;) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Prettify (indent) an HTML string.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rfc1123_date-class_method" title="rfc1123_date (class method)">+ (Object) <strong>rfc1123_date</strong>(time) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Format a <tt>Time</tt> object as a String using the format specified by RFC
1123.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unescape-class_method" title="unescape (class method)">+ (Object) <strong>unescape</strong>(string, encoding = @@accept_charset) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>URL-decode a string with encoding(optional).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unescape_element-class_method" title="unescape_element (class method)">+ (Object) <strong>unescape_element</strong>(str) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Synonym for CGI::unescapeElement(str).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unescape_html-class_method" title="unescape_html (class method)">+ (Object) <strong>unescape_html</strong>(str) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Synonym for CGI::unescapeHTML(str).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unescapeElement-class_method" title="unescapeElement (class method)">+ (Object) <strong>unescapeElement</strong>(string, *elements) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Undo escaping such as that done by CGI::escapeElement().</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unescapeHTML-class_method" title="unescapeHTML (class method)">+ (Object) <strong>unescapeHTML</strong>(string) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Unescape a string that has been HTML-escaped.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#header-instance_method" title="#header (instance method)">- (Object) <strong>header</strong>(options = 'text/html') </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create an HTTP header block as a string.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (CGI) <strong>initialize</strong>(options = {}, &amp;block) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create a new CGI instance.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#nph%3F-instance_method" title="#nph? (instance method)">- (Boolean) <strong>nph?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#out-instance_method" title="#out (instance method)">- (Object) <strong>out</strong>(options = &quot;text/html&quot;) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Print an HTTP header and body to $DEFAULT_OUTPUT ($&gt;).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print-instance_method" title="#print (instance method)">- (Object) <strong>print</strong>(*options) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Print an argument or list of arguments to the default output stream.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="CGI (class)">CGI</a></span></tt>) <strong>initialize</strong>(options = {}, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Create a new CGI instance.</p>

<p>:call-seq:</p>

<pre class="code"><span class='const'>CGI</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id tag_maker'>tag_maker</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id block'>block</span> <span class='rbrace'>}</span>
<span class='const'>CGI</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id options_hash'>options_hash</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id block'>block</span> <span class='rbrace'>}</span></pre>
<table class="rdoc-list"><tr><td class="rdoc-term"><p><tt>tag_maker</tt></p></td>
<td>
<p>This is the same as using the <tt>options_hash</tt> form with the value
<tt>{ :tag_maker =&gt; tag_maker }</tt> Note that it is recommended to use
the <tt>options_hash</tt> form, since it also allows you specify the
charset you will accept.</p>
</td></tr><tr><td class="rdoc-term"><p><tt>options_hash</tt></p></td>
<td>
<p>A Hash that recognizes two options:</p>
<table class="rdoc-list"><tr><td class="rdoc-term"><p><tt>:accept_charset</tt></p></td>
<td>
<p>specifies encoding of received query string.  If omitted,
<tt>@@accept_charset</tt> is used.  If the encoding is not valid, a
CGI::InvalidEncoding will be raised.</p>

<p>Example. Suppose <tt>@@accept_charset</tt> is "UTF-8"</p>

<p>when not specified:</p>

<pre class="code"><span class='id cgi'>cgi</span><span class='op'>=</span><span class='const'>CGI</span><span class='period'>.</span><span class='id new'>new</span>      <span class='comment'># @accept_charset # =&gt; &quot;UTF-8&quot;</span></pre>

<p>when specified as "EUC-JP":</p>

<pre class="code"><span class='id cgi'>cgi</span><span class='op'>=</span><span class='const'>CGI</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='symbol'>:accept_charset</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EUC-JP</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'># =&gt; &quot;EUC-JP&quot;</span></pre>
</td></tr><tr><td class="rdoc-term"><p><tt>:tag_maker</tt></p></td>
<td>
<p>String that specifies which version of the HTML generation methods to use. 
If not specified, no HTML generation methods will be loaded.</p>

<p>The following values are supported:</p>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>"html3"</p></td>
<td>
<p>HTML 3.x</p>
</td></tr><tr><td class="rdoc-term"><p>"html4"</p></td>
<td>
<p>HTML 4.0</p>
</td></tr><tr><td class="rdoc-term"><p>"html4Tr"</p></td>
<td>
<p>HTML 4.0 Transitional</p>
</td></tr><tr><td class="rdoc-term"><p>"html4Fr"</p></td>
<td>
<p>HTML 4.0 with Framesets</p>
</td></tr></table>
</td></tr></table>
</td></tr><tr><td class="rdoc-term"><p><tt>block</tt></p></td>
<td>
<p>If provided, the block is called when an invalid encoding is encountered.
For example:</p>

<pre class="code"><span class='id encoding_errors'>encoding_errors</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='id cgi'>cgi</span><span class='op'>=</span><span class='const'>CGI</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='symbol'>:accept_charset</span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EUC-JP</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id name'>name</span><span class='comma'>,</span><span class='id value'>value</span><span class='op'>|</span>
  <span class='id encoding_errors'>encoding_errors</span><span class='lbracket'>[</span><span class='id name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id value'>value</span>
<span class='kw'>end</span></pre>
</td></tr></table>

<p>Finally, if the CGI object is not created in a standard CGI call
environment (that is, it can't locate REQUEST_METHOD in its environment),
then it will run in "offline" mode.  In this mode, it reads its parameters
from the command line or (failing that) from standard input.  Otherwise,
cookies and other parameters are parsed automatically from the standard CGI
locations, which varies according to the REQUEST_METHOD.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


789
790
791
792
793
794
795
796
797
798
799
800
801
802
803
804
805
806
807
808
809
810
811
812
813
814
815
816
817
818
819
820
821
822
823
824
825
826
827
828
829
830
831
832
833
834</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/core.rb', line 789</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span> <span class='comment'># :yields: name, value
</span>  <span class='ivar'>@accept_charset_error_block</span><span class='op'>=</span><span class='id block'>block</span> <span class='kw'>if</span> <span class='id block_given?'>block_given?</span>
  <span class='ivar'>@options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='symbol'>:accept_charset</span><span class='op'>=&gt;</span><span class='cvar'>@@accept_charset</span><span class='rbrace'>}</span>
  <span class='kw'>case</span> <span class='id options'>options</span>
  <span class='kw'>when</span> <span class='const'>Hash</span>
    <span class='ivar'>@options</span><span class='period'>.</span><span class='id merge!'>merge!</span><span class='lparen'>(</span><span class='id options'>options</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='const'>String</span>
    <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:tag_maker</span><span class='rbracket'>]</span><span class='op'>=</span><span class='id options'>options</span>
  <span class='kw'>end</span>
  <span class='ivar'>@accept_charset</span><span class='op'>=</span><span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:accept_charset</span><span class='rbracket'>]</span>
  <span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>MOD_RUBY</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='const'>ENV</span><span class='period'>.</span><span class='id key?'>key?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GATEWAY_INTERFACE</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='const'>Apache</span><span class='period'>.</span><span class='id request'>request</span><span class='period'>.</span><span class='id setup_cgi_env'>setup_cgi_env</span>
  <span class='kw'>end</span>

  <span class='id extend'>extend</span> <span class='const'>QueryExtension</span>
  <span class='ivar'>@multipart</span> <span class='op'>=</span> <span class='kw'>false</span>

  <span class='id initialize_query'>initialize_query</span><span class='lparen'>(</span><span class='rparen'>)</span>  <span class='comment'># set @params, @cookies
</span>  <span class='ivar'>@output_cookies</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@output_hidden</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='kw'>case</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:tag_maker</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html3</span><span class='tstring_end'>&quot;</span></span>
    <span class='id require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>cgi/html</span><span class='tstring_end'>'</span></span>
    <span class='id extend'>extend</span> <span class='const'>Html3</span>
    <span class='id element_init'>element_init</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id extend'>extend</span> <span class='const'>HtmlExtension</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html4</span><span class='tstring_end'>&quot;</span></span>
    <span class='id require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>cgi/html</span><span class='tstring_end'>'</span></span>
    <span class='id extend'>extend</span> <span class='const'>Html4</span>
    <span class='id element_init'>element_init</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id extend'>extend</span> <span class='const'>HtmlExtension</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html4Tr</span><span class='tstring_end'>&quot;</span></span>
    <span class='id require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>cgi/html</span><span class='tstring_end'>'</span></span>
    <span class='id extend'>extend</span> <span class='const'>Html4Tr</span>
    <span class='id element_init'>element_init</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id extend'>extend</span> <span class='const'>HtmlExtension</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html4Fr</span><span class='tstring_end'>&quot;</span></span>
    <span class='id require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>cgi/html</span><span class='tstring_end'>'</span></span>
    <span class='id extend'>extend</span> <span class='const'>Html4Tr</span>
    <span class='id element_init'>element_init</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id extend'>extend</span> <span class='const'>Html4Fr</span>
    <span class='id element_init'>element_init</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id extend'>extend</span> <span class='const'>HtmlExtension</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="accept_charset-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="accept_charset-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>accept_charset</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Return the accept character set for this CGI instance.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


731
732
733</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/core.rb', line 731</span>

<span class='kw'>def</span> <span class='id accept_charset'>accept_charset</span>
  <span class='ivar'>@accept_charset</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="accept_charset-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>accept_charset</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Return the accept character set for all new CGI instances.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


721
722
723</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/core.rb', line 721</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id accept_charset'>accept_charset</span>
  <span class='cvar'>@@accept_charset</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="accept_charset=-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>accept_charset=</strong>(accept_charset) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Set the accept character set for all new CGI instances.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


726
727
728</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/core.rb', line 726</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id accept_charset='>accept_charset=</span><span class='lparen'>(</span><span class='id accept_charset'>accept_charset</span><span class='rparen'>)</span>
  <span class='cvar'>@@accept_charset</span><span class='op'>=</span><span class='id accept_charset'>accept_charset</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="escape-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>escape</strong>(string) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>URL-encode a string.</p>

<pre class="code"><span class='id url_encoded_string'>url_encoded_string</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id escape'>escape</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>'Stop!' said Fred</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
   <span class='comment'># =&gt; &quot;%27Stop%21%27+said+Fred&quot;</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


6
7
8
9
10</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/util.rb', line 6</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id escape'>escape</span><span class='lparen'>(</span><span class='id string'>string</span><span class='rparen'>)</span>
  <span class='id string'>string</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>([^ a-zA-Z0-9_.-]+)</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>%</span><span class='tstring_end'>'</span></span> <span class='op'>+</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>H2</span><span class='tstring_end'>'</span></span> <span class='op'>*</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id bytesize'>bytesize</span><span class='rparen'>)</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>%</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id upcase'>upcase</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id tr'>tr</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>+</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="escape_element-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>escape_element</strong>(str) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Synonym for CGI::escapeElement(str)</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


141
142
143</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/util.rb', line 141</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id escape_element'>escape_element</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
  <span class='id escapeElement'>escapeElement</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="escape_html-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>escape_html</strong>(str) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Synonym for CGI::escapeHTML(str)</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


87
88
89</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/util.rb', line 87</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id escape_html'>escape_html</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
  <span class='id escapeHTML'>escapeHTML</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="escapeElement-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>escapeElement</strong>(string, *elements) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Escape only the tags of certain HTML elements in <tt>string</tt>.</p>

<p>Takes an element or elements or array of elements.  Each element is
specified by the name of the element, without angle brackets. This matches
both the start and the end tag of that element. The attribute list of the
open tag will also be escaped (for instance, the double-quotes surrounding
attribute values).</p>

<pre class="code"><span class='id print'>print</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id escapeElement'>escapeElement</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;BR&gt;&lt;A HREF=&quot;url&quot;&gt;&lt;/A&gt;</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>IMG</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='comment'># &quot;&lt;BR&gt;&amp;lt;A HREF=&amp;quot;url&amp;quot;&amp;gt;&amp;lt;/A&amp;gt&quot;
</span>
<span class='id print'>print</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id escapeElement'>escapeElement</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;BR&gt;&lt;A HREF=&quot;url&quot;&gt;&lt;/A&gt;</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>IMG</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='comment'># &quot;&lt;BR&gt;&amp;lt;A HREF=&amp;quot;url&amp;quot;&amp;gt;&amp;lt;/A&amp;gt&quot;</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


109
110
111
112
113
114
115
116
117
118</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/util.rb', line 109</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id escapeElement'>escapeElement</span><span class='lparen'>(</span><span class='id string'>string</span><span class='comma'>,</span> <span class='op'>*</span><span class='id elements'>elements</span><span class='rparen'>)</span>
  <span class='id elements'>elements</span> <span class='op'>=</span> <span class='id elements'>elements</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id elements'>elements</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id elements'>elements</span><span class='period'>.</span><span class='id empty?'>empty?</span>
    <span class='id string'>string</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;\/?(?:</span><span class='embexpr_beg'>#{</span><span class='id elements'>elements</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>|</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'>)(?!\w)(?:.|\n)*?&gt;</span><span class='regexp_end'>/i</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='const'>CGI</span><span class='op'>::</span><span class='id escapeHTML'>escapeHTML</span><span class='lparen'>(</span><span class='backref'>$&amp;</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id string'>string</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="escapeHTML-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>escapeHTML</strong>(string) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Escape special characters in HTML, namely &amp;&quot;&lt;&gt;</p>

<pre class="code"><span class='const'>CGI</span><span class='op'>::</span><span class='id escapeHTML'>escapeHTML</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Usage: foo &quot;bar&quot; &lt;baz&gt;</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
   <span class='comment'># =&gt; &quot;Usage: foo &amp;quot;bar&amp;quot; &amp;lt;baz&amp;gt;&quot;</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


33
34
35</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/util.rb', line 33</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id escapeHTML'>escapeHTML</span><span class='lparen'>(</span><span class='id string'>string</span><span class='rparen'>)</span>
  <span class='id string'>string</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[&amp;\&quot;&lt;&gt;]</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='const'>TABLE_FOR_ESCAPE_HTML__</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="parse-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>parse</strong>(query) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Parse an HTTP query string into a hash of key=&gt;value pairs.</p>

<pre class="code"><span class='id params'>params</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>query_string</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='comment'># {&quot;name1&quot; =&gt; [&quot;value1&quot;, &quot;value2&quot;, ...],
</span>  <span class='comment'>#  &quot;name2&quot; =&gt; [&quot;value1&quot;, &quot;value2&quot;, ...], ... }</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


366
367
368
369
370
371
372
373
374
375
376
377
378</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/core.rb', line 366</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='id query'>query</span><span class='rparen'>)</span>
  <span class='id params'>params</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id query'>query</span><span class='period'>.</span><span class='id split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[&amp;;]</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id pairs'>pairs</span><span class='op'>|</span>
    <span class='id key'>key</span><span class='comma'>,</span> <span class='id value'>value</span> <span class='op'>=</span> <span class='id pairs'>pairs</span><span class='period'>.</span><span class='id split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>=</span><span class='tstring_end'>'</span></span><span class='comma'>,</span><span class='int'>2</span><span class='rparen'>)</span><span class='period'>.</span><span class='id collect'>collect</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id v'>v</span><span class='op'>|</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id unescape'>unescape</span><span class='lparen'>(</span><span class='id v'>v</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='kw'>if</span> <span class='id key'>key</span> <span class='op'>&amp;&amp;</span> <span class='id value'>value</span>
      <span class='id params'>params</span><span class='period'>.</span><span class='id has_key?'>has_key?</span><span class='lparen'>(</span><span class='id key'>key</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id params'>params</span><span class='lbracket'>[</span><span class='id key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id push'>push</span><span class='lparen'>(</span><span class='id value'>value</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='id params'>params</span><span class='lbracket'>[</span><span class='id key'>key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id value'>value</span><span class='rbracket'>]</span>
    <span class='kw'>elsif</span> <span class='id key'>key</span>
      <span class='id params'>params</span><span class='lbracket'>[</span><span class='id key'>key</span><span class='rbracket'>]</span><span class='op'>=</span><span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id params'>params</span><span class='period'>.</span><span class='id default'>default</span><span class='op'>=</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id freeze'>freeze</span>
  <span class='id params'>params</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="pretty-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>pretty</strong>(string, shift = &quot;  &quot;) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Prettify (indent) an HTML string.</p>

<p><tt>string</tt> is the HTML string to indent.  <tt>shift</tt> is the
indentation unit to use; it defaults to two spaces.</p>

<pre class="code"><span class='id print'>print</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id pretty'>pretty</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;HTML&gt;&lt;BODY&gt;&lt;/BODY&gt;&lt;/HTML&gt;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='comment'># &lt;HTML&gt;
</span>  <span class='comment'>#   &lt;BODY&gt;
</span>  <span class='comment'>#   &lt;/BODY&gt;
</span>  <span class='comment'># &lt;/HTML&gt;
</span>
<span class='id print'>print</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id pretty'>pretty</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;HTML&gt;&lt;BODY&gt;&lt;/BODY&gt;&lt;/HTML&gt;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\t</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='comment'># &lt;HTML&gt;
</span>  <span class='comment'>#         &lt;BODY&gt;
</span>  <span class='comment'>#         &lt;/BODY&gt;
</span>  <span class='comment'># &lt;/HTML&gt;</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


184
185
186
187
188
189
190
191
192
193</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/util.rb', line 184</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id pretty'>pretty</span><span class='lparen'>(</span><span class='id string'>string</span><span class='comma'>,</span> <span class='id shift'>shift</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id lines'>lines</span> <span class='op'>=</span> <span class='id string'>string</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?!\A)&lt;.*?&gt;</span><span class='regexp_end'>/m</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n\\0</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;.*?&gt;(?!\n)</span><span class='regexp_end'>/m</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\0\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id end_pos'>end_pos</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='kw'>while</span> <span class='id end_pos'>end_pos</span> <span class='op'>=</span> <span class='id lines'>lines</span><span class='period'>.</span><span class='id index'>index</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^&lt;\/(\w+)</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='id end_pos'>end_pos</span><span class='rparen'>)</span>
    <span class='id element'>element</span> <span class='op'>=</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id dup'>dup</span>
    <span class='id start_pos'>start_pos</span> <span class='op'>=</span> <span class='id lines'>lines</span><span class='period'>.</span><span class='id rindex'>rindex</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\s*&lt;</span><span class='embexpr_beg'>#{</span><span class='id element'>element</span><span class='rbrace'>}</span><span class='regexp_end'>/i</span></span><span class='comma'>,</span> <span class='id end_pos'>end_pos</span><span class='rparen'>)</span>
    <span class='id lines'>lines</span><span class='lbracket'>[</span><span class='id start_pos'>start_pos</span> <span class='op'>...</span> <span class='id end_pos'>end_pos</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>__</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id lines'>lines</span><span class='lbracket'>[</span><span class='id start_pos'>start_pos</span> <span class='op'>...</span> <span class='id end_pos'>end_pos</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\n(?!\z)</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id shift'>shift</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>__</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id lines'>lines</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^((?:</span><span class='embexpr_beg'>#{</span><span class='const'>Regexp</span><span class='op'>::</span><span class='id quote'>quote</span><span class='lparen'>(</span><span class='id shift'>shift</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'>)*)__(?=&lt;\/?\w)</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>\1</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="rfc1123_date-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>rfc1123_date</strong>(time) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Format a <tt>Time</tt> object as a String using the format specified by RFC
1123.</p>

<pre class="code"><span class='const'>CGI</span><span class='op'>::</span><span class='id rfc1123_date'>rfc1123_date</span><span class='lparen'>(</span><span class='const'>Time</span><span class='period'>.</span><span class='id now'>now</span><span class='rparen'>)</span>
  <span class='comment'># Sat, 01 Jan 2000 00:00:00 GMT</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


160
161
162
163
164
165</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/util.rb', line 160</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id rfc1123_date'>rfc1123_date</span><span class='lparen'>(</span><span class='id time'>time</span><span class='rparen'>)</span>
  <span class='id t'>t</span> <span class='op'>=</span> <span class='id time'>time</span><span class='period'>.</span><span class='id clone'>clone</span><span class='period'>.</span><span class='id gmtime'>gmtime</span>
  <span class='kw'>return</span> <span class='id format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%s, %.2d %s %.4d %.2d:%.2d:%.2d GMT</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
              <span class='const'>RFC822_DAYS</span><span class='lbracket'>[</span><span class='id t'>t</span><span class='period'>.</span><span class='id wday'>wday</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id t'>t</span><span class='period'>.</span><span class='id day'>day</span><span class='comma'>,</span> <span class='const'>RFC822_MONTHS</span><span class='lbracket'>[</span><span class='id t'>t</span><span class='period'>.</span><span class='id month'>month</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id t'>t</span><span class='period'>.</span><span class='id year'>year</span><span class='comma'>,</span>
              <span class='id t'>t</span><span class='period'>.</span><span class='id hour'>hour</span><span class='comma'>,</span> <span class='id t'>t</span><span class='period'>.</span><span class='id min'>min</span><span class='comma'>,</span> <span class='id t'>t</span><span class='period'>.</span><span class='id sec'>sec</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="unescape-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>unescape</strong>(string, encoding = @@accept_charset) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>URL-decode a string with encoding(optional).</p>

<pre class="code"><span class='id string'>string</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id unescape'>unescape</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%27Stop%21%27+said+Fred</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
   <span class='comment'># =&gt; &quot;'Stop!' said Fred&quot;</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


15
16
17
18
19
20</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/util.rb', line 15</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id unescape'>unescape</span><span class='lparen'>(</span><span class='id string'>string</span><span class='comma'>,</span><span class='id encoding'>encoding</span><span class='op'>=</span><span class='cvar'>@@accept_charset</span><span class='rparen'>)</span>
  <span class='id str'>str</span><span class='op'>=</span><span class='id string'>string</span><span class='period'>.</span><span class='id tr'>tr</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>+</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id force_encoding'>force_encoding</span><span class='lparen'>(</span><span class='const'>Encoding</span><span class='op'>::</span><span class='const'>ASCII_8BIT</span><span class='rparen'>)</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>((?:%[0-9a-fA-F]{2})+)</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='lbracket'>[</span><span class='backref'>$1</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>%</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>H*</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id force_encoding'>force_encoding</span><span class='lparen'>(</span><span class='id encoding'>encoding</span><span class='rparen'>)</span>
  <span class='id str'>str</span><span class='period'>.</span><span class='id valid_encoding?'>valid_encoding?</span> <span class='op'>?</span> <span class='id str'>str</span> <span class='op'>:</span> <span class='id str'>str</span><span class='period'>.</span><span class='id force_encoding'>force_encoding</span><span class='lparen'>(</span><span class='id string'>string</span><span class='period'>.</span><span class='id encoding'>encoding</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="unescape_element-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>unescape_element</strong>(str) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Synonym for CGI::unescapeElement(str)</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


146
147
148</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/util.rb', line 146</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id unescape_element'>unescape_element</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
  <span class='id unescapeElement'>unescapeElement</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="unescape_html-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>unescape_html</strong>(str) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Synonym for CGI::unescapeHTML(str)</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


92
93
94</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/util.rb', line 92</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id unescape_html'>unescape_html</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
  <span class='id unescapeHTML'>unescapeHTML</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="unescapeElement-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>unescapeElement</strong>(string, *elements) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Undo escaping such as that done by CGI::escapeElement()</p>

<pre class="code"><span class='id print'>print</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id unescapeElement'>unescapeElement</span><span class='lparen'>(</span>
        <span class='const'>CGI</span><span class='op'>::</span><span class='id escapeHTML'>escapeHTML</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;BR&gt;&lt;A HREF=&quot;url&quot;&gt;&lt;/A&gt;</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>IMG</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='comment'># &quot;&amp;lt;BR&amp;gt;&lt;A HREF=&quot;url&quot;&gt;&lt;/A&gt;&quot;
</span>
<span class='id print'>print</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id unescapeElement'>unescapeElement</span><span class='lparen'>(</span>
        <span class='const'>CGI</span><span class='op'>::</span><span class='id escapeHTML'>escapeHTML</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;BR&gt;&lt;A HREF=&quot;url&quot;&gt;&lt;/A&gt;</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>IMG</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='comment'># &quot;&amp;lt;BR&amp;gt;&lt;A HREF=&quot;url&quot;&gt;&lt;/A&gt;&quot;</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


129
130
131
132
133
134
135
136
137
138</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/util.rb', line 129</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id unescapeElement'>unescapeElement</span><span class='lparen'>(</span><span class='id string'>string</span><span class='comma'>,</span> <span class='op'>*</span><span class='id elements'>elements</span><span class='rparen'>)</span>
  <span class='id elements'>elements</span> <span class='op'>=</span> <span class='id elements'>elements</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id elements'>elements</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id elements'>elements</span><span class='period'>.</span><span class='id empty?'>empty?</span>
    <span class='id string'>string</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&amp;lt;\/?(?:</span><span class='embexpr_beg'>#{</span><span class='id elements'>elements</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>|</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'>)(?!\w)(?:.|\n)*?&amp;gt;</span><span class='regexp_end'>/i</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='const'>CGI</span><span class='op'>::</span><span class='id unescapeHTML'>unescapeHTML</span><span class='lparen'>(</span><span class='backref'>$&amp;</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id string'>string</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="unescapeHTML-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>unescapeHTML</strong>(string) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Unescape a string that has been HTML-escaped</p>

<pre class="code"><span class='const'>CGI</span><span class='op'>::</span><span class='id unescapeHTML'>unescapeHTML</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Usage: foo &amp;quot;bar&amp;quot; &amp;lt;baz&amp;gt;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
   <span class='comment'># =&gt; &quot;Usage: foo \&quot;bar\&quot; &lt;baz&gt;&quot;</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/util.rb', line 40</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id unescapeHTML'>unescapeHTML</span><span class='lparen'>(</span><span class='id string'>string</span><span class='rparen'>)</span>
  <span class='id enc'>enc</span> <span class='op'>=</span> <span class='id string'>string</span><span class='period'>.</span><span class='id encoding'>encoding</span>
  <span class='kw'>if</span> <span class='lbracket'>[</span><span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_16BE</span><span class='comma'>,</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_16LE</span><span class='comma'>,</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_32BE</span><span class='comma'>,</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_32LE</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='id enc'>enc</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id string'>string</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='const'>Regexp</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&amp;(amp|quot|gt|lt|#[0-9]+|#x[0-9A-Fa-f]+);</span><span class='tstring_end'>'</span></span><span class='period'>.</span><span class='id encode'>encode</span><span class='lparen'>(</span><span class='id enc'>enc</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='kw'>case</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id encode'>encode</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>US-ASCII</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>amp</span><span class='tstring_end'>'</span></span>                 <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>'</span></span><span class='period'>.</span><span class='id encode'>encode</span><span class='lparen'>(</span><span class='id enc'>enc</span><span class='rparen'>)</span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>quot</span><span class='tstring_end'>'</span></span>                <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>'</span></span><span class='period'>.</span><span class='id encode'>encode</span><span class='lparen'>(</span><span class='id enc'>enc</span><span class='rparen'>)</span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>gt</span><span class='tstring_end'>'</span></span>                  <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>'</span></span><span class='period'>.</span><span class='id encode'>encode</span><span class='lparen'>(</span><span class='id enc'>enc</span><span class='rparen'>)</span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>lt</span><span class='tstring_end'>'</span></span>                  <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;</span><span class='tstring_end'>'</span></span><span class='period'>.</span><span class='id encode'>encode</span><span class='lparen'>(</span><span class='id enc'>enc</span><span class='rparen'>)</span>
      <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A#0*(\d+)\z</span><span class='regexp_end'>/</span></span>        <span class='kw'>then</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id to_i'>to_i</span><span class='period'>.</span><span class='id chr'>chr</span><span class='lparen'>(</span><span class='id enc'>enc</span><span class='rparen'>)</span>
      <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A#x([0-9a-f]+)\z</span><span class='regexp_end'>/i</span></span>  <span class='kw'>then</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id hex'>hex</span><span class='period'>.</span><span class='id chr'>chr</span><span class='lparen'>(</span><span class='id enc'>enc</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id asciicompat'>asciicompat</span> <span class='op'>=</span> <span class='const'>Encoding</span><span class='period'>.</span><span class='id compatible?'>compatible?</span><span class='lparen'>(</span><span class='id string'>string</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id string'>string</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&amp;(amp|quot|gt|lt|\#[0-9]+|\#x[0-9A-Fa-f]+);</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id match'>match</span> <span class='op'>=</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id dup'>dup</span>
    <span class='kw'>case</span> <span class='id match'>match</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>amp</span><span class='tstring_end'>'</span></span>                 <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>'</span></span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>quot</span><span class='tstring_end'>'</span></span>                <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>'</span></span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>gt</span><span class='tstring_end'>'</span></span>                  <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>'</span></span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>lt</span><span class='tstring_end'>'</span></span>                  <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;</span><span class='tstring_end'>'</span></span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A#0*(\d+)\z</span><span class='regexp_end'>/</span></span>
      <span class='id n'>n</span> <span class='op'>=</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id to_i'>to_i</span>
      <span class='kw'>if</span> <span class='id enc'>enc</span> <span class='op'>==</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_8</span> <span class='kw'>or</span>
        <span class='id enc'>enc</span> <span class='op'>==</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>ISO_8859_1</span> <span class='op'>&amp;&amp;</span> <span class='id n'>n</span> <span class='op'>&lt;</span> <span class='int'>256</span> <span class='kw'>or</span>
        <span class='id asciicompat'>asciicompat</span> <span class='op'>&amp;&amp;</span> <span class='id n'>n</span> <span class='op'>&lt;</span> <span class='int'>128</span>
        <span class='id n'>n</span><span class='period'>.</span><span class='id chr'>chr</span><span class='lparen'>(</span><span class='id enc'>enc</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;#</span><span class='embexpr_beg'>#{</span><span class='backref'>$1</span><span class='rbrace'>}</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A#x([0-9a-f]+)\z</span><span class='regexp_end'>/i</span></span>
      <span class='id n'>n</span> <span class='op'>=</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id hex'>hex</span>
      <span class='kw'>if</span> <span class='id enc'>enc</span> <span class='op'>==</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_8</span> <span class='kw'>or</span>
        <span class='id enc'>enc</span> <span class='op'>==</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>ISO_8859_1</span> <span class='op'>&amp;&amp;</span> <span class='id n'>n</span> <span class='op'>&lt;</span> <span class='int'>256</span> <span class='kw'>or</span>
        <span class='id asciicompat'>asciicompat</span> <span class='op'>&amp;&amp;</span> <span class='id n'>n</span> <span class='op'>&lt;</span> <span class='int'>128</span>
        <span class='id n'>n</span><span class='period'>.</span><span class='id chr'>chr</span><span class='lparen'>(</span><span class='id enc'>enc</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;#x</span><span class='embexpr_beg'>#{</span><span class='backref'>$1</span><span class='rbrace'>}</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;</span><span class='embexpr_beg'>#{</span><span class='id match'>match</span><span class='rbrace'>}</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="header-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>header</strong>(options = 'text/html') 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Create an HTTP header block as a string.</p>

<p>:call-seq:</p>

<pre class="code"><span class='id headers'>headers</span><span class='lparen'>(</span><span class='id content_type_string'>content_type_string</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>text/html</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id headers'>headers</span><span class='lparen'>(</span><span class='id headers_hash'>headers_hash</span><span class='rparen'>)</span></pre>

<p>Includes the empty line that ends the header block.</p>
<table class="rdoc-list"><tr><td class="rdoc-term"><p><tt>content_type_string</tt></p></td>
<td>
<p>If this form is used, this string is the <tt>Content-Type</tt></p>
</td></tr><tr><td class="rdoc-term"><p><tt>headers_hash</tt></p></td>
<td>
<p>A Hash of header values. The following header keys are recognized:</p>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>type</p></td>
<td>
<p>The Content-Type header.  Defaults to "text/html"</p>
</td></tr><tr><td class="rdoc-term"><p>charset</p></td>
<td>
<p>The charset of the body, appended to the Content-Type header.</p>
</td></tr><tr><td class="rdoc-term"><p>nph</p></td>
<td>
<p>A boolean value.  If true, prepend protocol string and status code, and
date; and sets default values for "server" and "connection" if not
explicitly set.</p>
</td></tr><tr><td class="rdoc-term"><p>status</p></td>
<td>
<p>The HTTP status code as a String, returned as the Status header.  The
values are:</p>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>OK</p></td>
<td>
<p>200 OK</p>
</td></tr><tr><td class="rdoc-term"><p>PARTIAL_CONTENT</p></td>
<td>
<p>206 Partial Content</p>
</td></tr><tr><td class="rdoc-term"><p>MULTIPLE_CHOICES</p></td>
<td>
<p>300 Multiple Choices</p>
</td></tr><tr><td class="rdoc-term"><p>MOVED</p></td>
<td>
<p>301 Moved Permanently</p>
</td></tr><tr><td class="rdoc-term"><p>REDIRECT</p></td>
<td>
<p>302 Found</p>
</td></tr><tr><td class="rdoc-term"><p>NOT_MODIFIED</p></td>
<td>
<p>304 Not Modified</p>
</td></tr><tr><td class="rdoc-term"><p>BAD_REQUEST</p></td>
<td>
<p>400 Bad Request</p>
</td></tr><tr><td class="rdoc-term"><p>AUTH_REQUIRED</p></td>
<td>
<p>401 Authorization Required</p>
</td></tr><tr><td class="rdoc-term"><p>FORBIDDEN</p></td>
<td>
<p>403 Forbidden</p>
</td></tr><tr><td class="rdoc-term"><p>NOT_FOUND</p></td>
<td>
<p>404 Not Found</p>
</td></tr><tr><td class="rdoc-term"><p>METHOD_NOT_ALLOWED</p></td>
<td>
<p>405 Method Not Allowed</p>
</td></tr><tr><td class="rdoc-term"><p>NOT_ACCEPTABLE</p></td>
<td>
<p>406 Not Acceptable</p>
</td></tr><tr><td class="rdoc-term"><p>LENGTH_REQUIRED</p></td>
<td>
<p>411 Length Required</p>
</td></tr><tr><td class="rdoc-term"><p>PRECONDITION_FAILED</p></td>
<td>
<p>412 Precondition Failed</p>
</td></tr><tr><td class="rdoc-term"><p>SERVER_ERROR</p></td>
<td>
<p>500 Internal Server Error</p>
</td></tr><tr><td class="rdoc-term"><p>NOT_IMPLEMENTED</p></td>
<td>
<p>501 Method Not Implemented</p>
</td></tr><tr><td class="rdoc-term"><p>BAD_GATEWAY</p></td>
<td>
<p>502 Bad Gateway</p>
</td></tr><tr><td class="rdoc-term"><p>VARIANT_ALSO_VARIES</p></td>
<td>
<p>506 Variant Also Negotiates</p>
</td></tr></table>
</td></tr><tr><td class="rdoc-term"><p>server</p></td>
<td>
<p>The server software, returned as the Server header.</p>
</td></tr><tr><td class="rdoc-term"><p>connection</p></td>
<td>
<p>The connection type, returned as the Connection header (for instance,
"close".</p>
</td></tr><tr><td class="rdoc-term"><p>length</p></td>
<td>
<p>The length of the content that will be sent, returned as the Content-Length
header.</p>
</td></tr><tr><td class="rdoc-term"><p>language</p></td>
<td>
<p>The language of the content, returned as the Content-Language header.</p>
</td></tr><tr><td class="rdoc-term"><p>expires</p></td>
<td>
<p>The time on which the current content expires, as a <tt>Time</tt> object,
returned as the Expires header.</p>
</td></tr><tr><td class="rdoc-term"><p>cookie</p></td>
<td>
<p>A cookie or cookies, returned as one or more Set-Cookie headers.  The value
can be the literal string of the cookie; a CGI::Cookie object; an Array of
literal cookie strings or Cookie objects; or a hash all of whose values are
literal cookie strings or Cookie objects.</p>

<p>These cookies are in addition to the cookies held in the @output_cookies
field.</p>
</td></tr></table>

<p>Other headers can also be set; they are appended as key: value.</p>
</td></tr></table>

<p>Examples:</p>

<pre class="code">header
  # Content-Type: text/html

header(&quot;text/plain&quot;)
  # Content-Type: text/plain

header(&quot;nph&quot;        =&gt; true,
       &quot;status&quot;     =&gt; &quot;OK&quot;,  # == &quot;200 OK&quot;
         # &quot;status&quot;     =&gt; &quot;200 GOOD&quot;,
       &quot;server&quot;     =&gt; ENV['SERVER_SOFTWARE'],
       &quot;connection&quot; =&gt; &quot;close&quot;,
       &quot;type&quot;       =&gt; &quot;text/html&quot;,
       &quot;charset&quot;    =&gt; &quot;iso-2022-jp&quot;,
         # Content-Type: text/html; charset=iso-2022-jp
       &quot;length&quot;     =&gt; 103,
       &quot;language&quot;   =&gt; &quot;ja&quot;,
       &quot;expires&quot;    =&gt; Time.now + 30,
       &quot;cookie&quot;     =&gt; [cookie1, cookie2],
       &quot;my_header1&quot; =&gt; &quot;my_value&quot;
       &quot;my_header2&quot; =&gt; &quot;my_value&quot;)</pre>

<p>This method does not perform charset conversion.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/core.rb', line 152</span>

<span class='kw'>def</span> <span class='id header'>header</span><span class='lparen'>(</span><span class='id options'>options</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>text/html</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id options'>options</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>
    <span class='id content_type'>content_type</span> <span class='op'>=</span> <span class='id options'>options</span>
    <span class='id buf'>buf</span> <span class='op'>=</span> <span class='id _header_for_string'>_header_for_string</span><span class='lparen'>(</span><span class='id content_type'>content_type</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id options'>options</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id options'>options</span><span class='period'>.</span><span class='id size'>size</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>&amp;&amp;</span> <span class='id options'>options</span><span class='period'>.</span><span class='id has_key?'>has_key?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>type</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
      <span class='id content_type'>content_type</span> <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>type</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
      <span class='id buf'>buf</span> <span class='op'>=</span> <span class='id _header_for_string'>_header_for_string</span><span class='lparen'>(</span><span class='id content_type'>content_type</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id buf'>buf</span> <span class='op'>=</span> <span class='id _header_for_hash'>_header_for_hash</span><span class='lparen'>(</span><span class='id options'>options</span><span class='period'>.</span><span class='id dup'>dup</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>expected String or Hash but got </span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='period'>.</span><span class='id class'>class</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>MOD_RUBY</span><span class='rparen'>)</span>
    <span class='id _header_for_modruby'>_header_for_modruby</span><span class='lparen'>(</span><span class='id buf'>buf</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>
  <span class='kw'>else</span>
    <span class='id buf'>buf</span> <span class='op'>&lt;&lt;</span> <span class='const'>EOL</span>    <span class='comment'># empty line of separator
</span>    <span class='kw'>return</span> <span class='id buf'>buf</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="nph?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>nph?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


247
248
249</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/core.rb', line 247</span>

<span class='kw'>def</span> <span class='id nph?'>nph?</span>  <span class='comment'>#:nodoc:
</span>  <span class='kw'>return</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>IIS\/(\d+)</span><span class='regexp_end'>/</span></span><span class='period'>.</span><span class='id match'>match</span><span class='lparen'>(</span><span class='gvar'>$CGI_ENV</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>SERVER_SOFTWARE</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id to_i'>to_i</span> <span class='op'>&lt;</span> <span class='int'>5</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="out-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>out</strong>(options = &quot;text/html&quot;) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Print an HTTP header and body to $DEFAULT_OUTPUT ($&gt;)</p>

<p>:call-seq:</p>

<pre class="code"><span class='id cgi'>cgi</span><span class='period'>.</span><span class='id out'>out</span><span class='lparen'>(</span><span class='id content_type_string'>content_type_string</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>text/html</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='id cgi'>cgi</span><span class='period'>.</span><span class='id out'>out</span><span class='lparen'>(</span><span class='id headers_hash'>headers_hash</span><span class='rparen'>)</span></pre>
<table class="rdoc-list"><tr><td class="rdoc-term"><p><tt>content_type_string</tt></p></td>
<td>
<p>If a string is passed, it is assumed to be the content type.</p>
</td></tr><tr><td class="rdoc-term"><p><tt>headers_hash</tt></p></td>
<td>
<p>This is a Hash of headers, similar to that used by #header.</p>
</td></tr><tr><td class="rdoc-term"><p><tt>block</tt></p></td>
<td>
<p>A block is required and should evaluate to the body of the response.</p>
</td></tr></table>

<p><tt>Content-Length</tt> is automatically calculated from the size of the
String returned by the content block.</p>

<p>If <tt>ENV['REQUEST_METHOD'] == &quot;HEAD&quot;</tt>, then only the header
is output (the content block is still required, but it is ignored).</p>

<p>If the charset is "iso-2022-jp" or "euc-jp" or "shift_jis" then the content
is converted to this charset, and the language is set to "ja".</p>

<p>Example:</p>

<pre class="code"><span class='id cgi'>cgi</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='period'>.</span><span class='id new'>new</span>
<span class='id cgi'>cgi</span><span class='period'>.</span><span class='id out'>out</span><span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>string</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='comment'># Content-Type: text/html
</span>  <span class='comment'># Content-Length: 6
</span>  <span class='comment'>#
</span>  <span class='comment'># string
</span>
<span class='id cgi'>cgi</span><span class='period'>.</span><span class='id out'>out</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>text/plain</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>string</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='comment'># Content-Type: text/plain
</span>  <span class='comment'># Content-Length: 6
</span>  <span class='comment'>#
</span>  <span class='comment'># string
</span>
<span class='id cgi'>cgi</span><span class='period'>.</span><span class='id out'>out</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>nph</span><span class='tstring_end'>&quot;</span></span>        <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>status</span><span class='tstring_end'>&quot;</span></span>     <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OK</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>  <span class='comment'># == &quot;200 OK&quot;
</span>        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>server</span><span class='tstring_end'>&quot;</span></span>     <span class='op'>=&gt;</span> <span class='const'>ENV</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>SERVER_SOFTWARE</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>connection</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>close</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>type</span><span class='tstring_end'>&quot;</span></span>       <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>text/html</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>charset</span><span class='tstring_end'>&quot;</span></span>    <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>iso-2022-jp</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
          <span class='comment'># Content-Type: text/html; charset=iso-2022-jp
</span>        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>language</span><span class='tstring_end'>&quot;</span></span>   <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ja</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>expires</span><span class='tstring_end'>&quot;</span></span>    <span class='op'>=&gt;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id now'>now</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='int'>3600</span> <span class='op'>*</span> <span class='int'>24</span> <span class='op'>*</span> <span class='int'>30</span><span class='rparen'>)</span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cookie</span><span class='tstring_end'>&quot;</span></span>     <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='id cookie1'>cookie1</span><span class='comma'>,</span> <span class='id cookie2'>cookie2</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my_header1</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my_value</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my_header2</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my_value</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>string</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
   <span class='comment'># HTTP/1.1 200 OK
</span>   <span class='comment'># Date: Sun, 15 May 2011 17:35:54 GMT
</span>   <span class='comment'># Server: Apache 2.2.0
</span>   <span class='comment'># Connection: close
</span>   <span class='comment'># Content-Type: text/html; charset=iso-2022-jp
</span>   <span class='comment'># Content-Length: 6
</span>   <span class='comment'># Content-Language: ja
</span>   <span class='comment'># Expires: Tue, 14 Jun 2011 17:35:54 GMT
</span>   <span class='comment'># Set-Cookie: foo
</span>   <span class='comment'># Set-Cookie: bar
</span>   <span class='comment'># my_header1: my_value
</span>   <span class='comment'># my_header2: my_value
</span>   <span class='comment'>#
</span>   <span class='comment'># string</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


340
341
342
343
344
345
346
347
348
349</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/core.rb', line 340</span>

<span class='kw'>def</span> <span class='id out'>out</span><span class='lparen'>(</span><span class='id options'>options</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>text/html</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'># :yield:
</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>type</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id options'>options</span> <span class='rbrace'>}</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>
  <span class='id content'>content</span> <span class='op'>=</span> <span class='kw'>yield</span>
  <span class='id options'>options</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>length</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id content'>content</span><span class='period'>.</span><span class='id bytesize'>bytesize</span><span class='period'>.</span><span class='id to_s'>to_s</span>
  <span class='id output'>output</span> <span class='op'>=</span> <span class='id stdoutput'>stdoutput</span>
  <span class='id output'>output</span><span class='period'>.</span><span class='id binmode'>binmode</span> <span class='kw'>if</span> <span class='kw'>defined?</span> <span class='id output'>output</span><span class='period'>.</span><span class='id binmode'>binmode</span>
  <span class='id output'>output</span><span class='period'>.</span><span class='id print'>print</span> <span class='id header'>header</span><span class='lparen'>(</span><span class='id options'>options</span><span class='rparen'>)</span>
  <span class='id output'>output</span><span class='period'>.</span><span class='id print'>print</span> <span class='id content'>content</span> <span class='kw'>unless</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HEAD</span><span class='tstring_end'>&quot;</span></span> <span class='op'>==</span> <span class='id env_table'>env_table</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>REQUEST_METHOD</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="print-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>print</strong>(*options) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Print an argument or list of arguments to the default output stream</p>

<pre class="code"><span class='id cgi'>cgi</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='period'>.</span><span class='id new'>new</span>
<span class='id cgi'>cgi</span><span class='period'>.</span><span class='id print'>print</span>    <span class='comment'># default:  cgi.print == $DEFAULT_OUTPUT.print</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


356
357
358</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/core.rb', line 356</span>

<span class='kw'>def</span> <span class='id print'>print</span><span class='lparen'>(</span><span class='op'>*</span><span class='id options'>options</span><span class='rparen'>)</span>
  <span class='id stdoutput'>stdoutput</span><span class='period'>.</span><span class='id print'>print</span><span class='lparen'>(</span><span class='op'>*</span><span class='id options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sat Sep  3 14:10:00 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.9.3).
</div>

  </body>
</html>