<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Gem::Commands::PristineCommand
  
    &mdash; Ruby 1.9 Ruby Standard Library
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (P)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../Gem.html" title="Gem (module)">Gem</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Commands.html" title="Gem::Commands (module)">Commands</a></span></span>
     &raquo; 
    <span class="title">PristineCommand</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Gem::Commands::PristineCommand
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../Command.html" title="Gem::Command (class)">Gem::Command</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next"><span class='object_link'><a href="../Command.html" title="Gem::Command (class)">Gem::Command</a></span></li>
          
            <li class="next">Gem::Commands::PristineCommand</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="../VersionOption.html" title="Gem::VersionOption (module)">VersionOption</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/rubygems/commands/pristine_command.rb</dd>
  
</dl>
<div class="clear"></div>


  <h2>Constant Summary</h2>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Constants inherited from <span class='object_link'><a href="../Command.html" title="Gem::Command (class)">Gem::Command</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Command.html#HELP-constant" title="Gem::Command::HELP (constant)">HELP</a></span></p>

  
  
  
  
  
  
  
  


  
  
  
  
  
  
  <h2>Instance Attribute Summary</h2>
  
  <h3 class="inherited">Attributes inherited from <span class='object_link'><a href="../Command.html" title="Gem::Command (class)">Gem::Command</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Command.html#command-instance_method" title="Gem::Command#command (method)">command</a></span>, <span class='object_link'><a href="../Command.html#defaults-instance_method" title="Gem::Command#defaults (method)">defaults</a></span>, <span class='object_link'><a href="../Command.html#options-instance_method" title="Gem::Command#options (method)">options</a></span>, <span class='object_link'><a href="../Command.html#program_name-instance_method" title="Gem::Command#program_name (method)">program_name</a></span>, <span class='object_link'><a href="../Command.html#summary-instance_method" title="Gem::Command#summary (method)">summary</a></span></p>

  
  
  
  
  
  

  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#arguments-instance_method" title="#arguments (instance method)">- (Object) <strong>arguments</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#defaults_str-instance_method" title="#defaults_str (instance method)">- (Object) <strong>defaults_str</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#description-instance_method" title="#description (instance method)">- (Object) <strong>description</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#execute-instance_method" title="#execute (instance method)">- (Object) <strong>execute</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (PristineCommand) <strong>initialize</strong> </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of PristineCommand.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#usage-instance_method" title="#usage (instance method)">- (Object) <strong>usage</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../VersionOption.html" title="Gem::VersionOption (module)">VersionOption</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../VersionOption.html#add_platform_option-instance_method" title="Gem::VersionOption#add_platform_option (method)">#add_platform_option</a></span>, <span class='object_link'><a href="../VersionOption.html#add_prerelease_option-instance_method" title="Gem::VersionOption#add_prerelease_option (method)">#add_prerelease_option</a></span>, <span class='object_link'><a href="../VersionOption.html#add_version_option-instance_method" title="Gem::VersionOption#add_version_option (method)">#add_version_option</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="../Command.html" title="Gem::Command (class)">Gem::Command</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Command.html#add_common_option-class_method" title="Gem::Command.add_common_option (method)">add_common_option</a></span>, <span class='object_link'><a href="../Command.html#add_extra_args-instance_method" title="Gem::Command#add_extra_args (method)">#add_extra_args</a></span>, <span class='object_link'><a href="../Command.html#add_option-instance_method" title="Gem::Command#add_option (method)">#add_option</a></span>, <span class='object_link'><a href="../Command.html#add_specific_extra_args-class_method" title="Gem::Command.add_specific_extra_args (method)">add_specific_extra_args</a></span>, <span class='object_link'><a href="../Command.html#begins%3F-instance_method" title="Gem::Command#begins? (method)">#begins?</a></span>, <span class='object_link'><a href="../Command.html#build_args-class_method" title="Gem::Command.build_args (method)">build_args</a></span>, <span class='object_link'><a href="../Command.html#build_args%3D-class_method" title="Gem::Command.build_args= (method)">build_args=</a></span>, <span class='object_link'><a href="../Command.html#common_options-class_method" title="Gem::Command.common_options (method)">common_options</a></span>, <span class='object_link'><a href="../Command.html#configure_options-instance_method" title="Gem::Command#configure_options (method)">#configure_options</a></span>, <span class='object_link'><a href="../Command.html#create_option_parser-instance_method" title="Gem::Command#create_option_parser (method)">#create_option_parser</a></span>, <span class='object_link'><a href="../Command.html#extra_args-class_method" title="Gem::Command.extra_args (method)">extra_args</a></span>, <span class='object_link'><a href="../Command.html#extra_args%3D-class_method" title="Gem::Command.extra_args= (method)">extra_args=</a></span>, <span class='object_link'><a href="../Command.html#get_all_gem_names-instance_method" title="Gem::Command#get_all_gem_names (method)">#get_all_gem_names</a></span>, <span class='object_link'><a href="../Command.html#get_one_gem_name-instance_method" title="Gem::Command#get_one_gem_name (method)">#get_one_gem_name</a></span>, <span class='object_link'><a href="../Command.html#get_one_optional_argument-instance_method" title="Gem::Command#get_one_optional_argument (method)">#get_one_optional_argument</a></span>, <span class='object_link'><a href="../Command.html#handle_options-instance_method" title="Gem::Command#handle_options (method)">#handle_options</a></span>, <span class='object_link'><a href="../Command.html#handles%3F-instance_method" title="Gem::Command#handles? (method)">#handles?</a></span>, <span class='object_link'><a href="../Command.html#invoke-instance_method" title="Gem::Command#invoke (method)">#invoke</a></span>, <span class='object_link'><a href="../Command.html#merge_options-instance_method" title="Gem::Command#merge_options (method)">#merge_options</a></span>, <span class='object_link'><a href="../Command.html#parser-instance_method" title="Gem::Command#parser (method)">#parser</a></span>, <span class='object_link'><a href="../Command.html#remove_option-instance_method" title="Gem::Command#remove_option (method)">#remove_option</a></span>, <span class='object_link'><a href="../Command.html#show_help-instance_method" title="Gem::Command#show_help (method)">#show_help</a></span>, <span class='object_link'><a href="../Command.html#show_lookup_failure-instance_method" title="Gem::Command#show_lookup_failure (method)">#show_lookup_failure</a></span>, <span class='object_link'><a href="../Command.html#specific_extra_args-class_method" title="Gem::Command.specific_extra_args (method)">specific_extra_args</a></span>, <span class='object_link'><a href="../Command.html#specific_extra_args_hash-class_method" title="Gem::Command.specific_extra_args_hash (method)">specific_extra_args_hash</a></span>, <span class='object_link'><a href="../Command.html#when_invoked-instance_method" title="Gem::Command#when_invoked (method)">#when_invoked</a></span>, <span class='object_link'><a href="../Command.html#wrap-instance_method" title="Gem::Command#wrap (method)">#wrap</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../UserInteraction.html" title="Gem::UserInteraction (module)">UserInteraction</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../UserInteraction.html#alert-instance_method" title="Gem::UserInteraction#alert (method)">#alert</a></span>, <span class='object_link'><a href="../UserInteraction.html#alert_error-instance_method" title="Gem::UserInteraction#alert_error (method)">#alert_error</a></span>, <span class='object_link'><a href="../UserInteraction.html#alert_warning-instance_method" title="Gem::UserInteraction#alert_warning (method)">#alert_warning</a></span>, <span class='object_link'><a href="../UserInteraction.html#ask-instance_method" title="Gem::UserInteraction#ask (method)">#ask</a></span>, <span class='object_link'><a href="../UserInteraction.html#ask_for_password-instance_method" title="Gem::UserInteraction#ask_for_password (method)">#ask_for_password</a></span>, <span class='object_link'><a href="../UserInteraction.html#ask_yes_no-instance_method" title="Gem::UserInteraction#ask_yes_no (method)">#ask_yes_no</a></span>, <span class='object_link'><a href="../UserInteraction.html#choose_from_list-instance_method" title="Gem::UserInteraction#choose_from_list (method)">#choose_from_list</a></span>, <span class='object_link'><a href="../UserInteraction.html#say-instance_method" title="Gem::UserInteraction#say (method)">#say</a></span>, <span class='object_link'><a href="../UserInteraction.html#terminate_interaction-instance_method" title="Gem::UserInteraction#terminate_interaction (method)">#terminate_interaction</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../DefaultUserInteraction.html" title="Gem::DefaultUserInteraction (module)">DefaultUserInteraction</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../DefaultUserInteraction.html#ui-class_method" title="Gem::DefaultUserInteraction.ui (method)">ui</a></span>, <span class='object_link'><a href="../DefaultUserInteraction.html#ui-instance_method" title="Gem::DefaultUserInteraction#ui (method)">#ui</a></span>, <span class='object_link'><a href="../DefaultUserInteraction.html#ui%3D-instance_method" title="Gem::DefaultUserInteraction#ui= (method)">#ui=</a></span>, <span class='object_link'><a href="../DefaultUserInteraction.html#ui%3D-class_method" title="Gem::DefaultUserInteraction.ui= (method)">ui=</a></span>, <span class='object_link'><a href="../DefaultUserInteraction.html#use_ui-class_method" title="Gem::DefaultUserInteraction.use_ui (method)">use_ui</a></span>, <span class='object_link'><a href="../DefaultUserInteraction.html#use_ui-instance_method" title="Gem::DefaultUserInteraction#use_ui (method)">#use_ui</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Gem::Commands::PristineCommand (class)">PristineCommand</a></span></tt>) <strong>initialize</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>A new instance of PristineCommand</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/commands/pristine_command.rb', line 10</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span>
  <span class='kw'>super</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>pristine</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Restores installed gems to pristine condition from files located in the gem cache</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
        <span class='symbol'>:version</span> <span class='op'>=&gt;</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Requirement</span><span class='period'>.</span><span class='id default'>default</span><span class='comma'>,</span> <span class='symbol'>:extensions</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span>
        <span class='symbol'>:all</span> <span class='op'>=&gt;</span> <span class='kw'>false</span>

  <span class='id add_option'>add_option</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>--all</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
             <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Restore all installed gems to pristine</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
             <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>condition</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id value'>value</span><span class='comma'>,</span> <span class='id options'>options</span><span class='op'>|</span>
    <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:all</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id value'>value</span>
  <span class='kw'>end</span>

  <span class='id add_option'>add_option</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>--[no-]extensions</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
             <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Restore gems with extensions</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id value'>value</span><span class='comma'>,</span> <span class='id options'>options</span><span class='op'>|</span>
    <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:extensions</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id value'>value</span>
  <span class='kw'>end</span>

  <span class='id add_version_option'>add_version_option</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>restore to</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>pristine condition</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="arguments-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>arguments</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


30
31
32</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/commands/pristine_command.rb', line 30</span>

<span class='kw'>def</span> <span class='id arguments'>arguments</span> <span class='comment'># :nodoc:
</span>  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GEMNAME       gem to restore to pristine condition (unless --all)</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="defaults_str-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>defaults_str</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


34
35
36</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/commands/pristine_command.rb', line 34</span>

<span class='kw'>def</span> <span class='id defaults_str'>defaults_str</span> <span class='comment'># :nodoc:
</span>  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--all --extensions</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="description-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>description</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/commands/pristine_command.rb', line 38</span>

<span class='kw'>def</span> <span class='id description'>description</span> <span class='comment'># :nodoc:
</span>  <span class='heredoc_beg'>&lt;&lt;-EOF</span>
<span class='tstring_content'>The pristine command compares the installed gems with the contents of the
cached gem and restores any files that don't match the cached gem's copy.

If you have made modifications to your installed gems, the pristine command
will revert them.  After all the gem's files have been checked all bin stubs
for the gem are regenerated.

If the cached gem cannot be found, you will need to use `gem install` to
revert the gem.

If --no-extensions is provided pristine will not attempt to restore gems with
extensions.
</span><span class='heredoc_end'>  EOF
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="execute-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>execute</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../FilePermissionError.html" title="Gem::FilePermissionError (class)">Gem::FilePermissionError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/commands/pristine_command.rb', line 59</span>

<span class='kw'>def</span> <span class='id execute'>execute</span>
  <span class='id specs'>specs</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:all</span><span class='rbracket'>]</span> <span class='kw'>then</span>
            <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Specification</span><span class='period'>.</span><span class='id map'>map</span>
          <span class='kw'>else</span>
            <span class='id get_all_gem_names'>get_all_gem_names</span><span class='period'>.</span><span class='id map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id gem_name'>gem_name</span><span class='op'>|</span>
              <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Specification</span><span class='period'>.</span><span class='id find_all_by_name'>find_all_by_name</span> <span class='id gem_name'>gem_name</span><span class='comma'>,</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:version</span><span class='rbracket'>]</span>
            <span class='kw'>end</span><span class='period'>.</span><span class='id flatten'>flatten</span>
          <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id specs'>specs</span><span class='period'>.</span><span class='id to_a'>to_a</span><span class='period'>.</span><span class='id empty?'>empty?</span> <span class='kw'>then</span>
    <span class='id raise'>raise</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Exception</span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Failed to find gems </span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:args</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:version</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id install_dir'>install_dir</span> <span class='op'>=</span> <span class='const'>Gem</span><span class='period'>.</span><span class='id dir'>dir</span> <span class='comment'># TODO use installer option
</span>
  <span class='id raise'>raise</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>FilePermissionError</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id install_dir'>install_dir</span><span class='rparen'>)</span> <span class='kw'>unless</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id writable?'>writable?</span><span class='lparen'>(</span><span class='id install_dir'>install_dir</span><span class='rparen'>)</span>

  <span class='id say'>say</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Restoring gems to pristine condition...</span><span class='tstring_end'>&quot;</span></span>

  <span class='id specs'>specs</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id spec'>spec</span><span class='op'>|</span>
    <span class='kw'>unless</span> <span class='id spec'>spec</span><span class='period'>.</span><span class='id extensions'>extensions</span><span class='period'>.</span><span class='id empty?'>empty?</span> <span class='kw'>or</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:extensions</span><span class='rbracket'>]</span> <span class='kw'>then</span>
      <span class='id say'>say</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Skipped </span><span class='embexpr_beg'>#{</span><span class='id spec'>spec</span><span class='period'>.</span><span class='id full_name'>full_name</span><span class='rbrace'>}</span><span class='tstring_content'>, it needs to compile an extension</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>next</span>
    <span class='kw'>end</span>

    <span class='id gem'>gem</span> <span class='op'>=</span> <span class='id spec'>spec</span><span class='period'>.</span><span class='id cache_file'>cache_file</span>

    <span class='kw'>unless</span> <span class='const'>File</span><span class='period'>.</span><span class='id exist?'>exist?</span> <span class='id gem'>gem</span> <span class='kw'>then</span>
      <span class='id require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rubygems/remote_fetcher</span><span class='tstring_end'>'</span></span>

      <span class='id say'>say</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cached gem for </span><span class='embexpr_beg'>#{</span><span class='id spec'>spec</span><span class='period'>.</span><span class='id full_name'>full_name</span><span class='rbrace'>}</span><span class='tstring_content'> not found, attempting to fetch...</span><span class='tstring_end'>&quot;</span></span>
      <span class='id dep'>dep</span> <span class='op'>=</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Dependency</span><span class='period'>.</span><span class='id new'>new</span> <span class='id spec'>spec</span><span class='period'>.</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id spec'>spec</span><span class='period'>.</span><span class='id version'>version</span>
      <span class='const'>Gem</span><span class='op'>::</span><span class='const'>RemoteFetcher</span><span class='period'>.</span><span class='id fetcher'>fetcher</span><span class='period'>.</span><span class='id download_to_cache'>download_to_cache</span> <span class='id dep'>dep</span>
    <span class='kw'>end</span>

    <span class='comment'># TODO use installer options
</span>    <span class='id installer'>installer</span> <span class='op'>=</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Installer</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id gem'>gem</span><span class='comma'>,</span>
                                   <span class='symbol'>:wrappers</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span>
                                   <span class='symbol'>:force</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span>
                                   <span class='symbol'>:install_dir</span> <span class='op'>=&gt;</span> <span class='id spec'>spec</span><span class='period'>.</span><span class='id base_dir'>base_dir</span><span class='rparen'>)</span>
    <span class='id installer'>installer</span><span class='period'>.</span><span class='id install'>install</span>

    <span class='id say'>say</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Restored </span><span class='embexpr_beg'>#{</span><span class='id spec'>spec</span><span class='period'>.</span><span class='id full_name'>full_name</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="usage-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>usage</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


55
56
57</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/commands/pristine_command.rb', line 55</span>

<span class='kw'>def</span> <span class='id usage'>usage</span> <span class='comment'># :nodoc:
</span>  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id program_name'>program_name</span><span class='rbrace'>}</span><span class='tstring_content'> [args]</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sat Sep  3 14:11:52 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.9.3).
</div>

  </body>
</html>