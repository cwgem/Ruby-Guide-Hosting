<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: DRb::DRbServer
  
    &mdash; Ruby 1.9 Ruby Standard Library
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (D)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../DRb.html" title="DRb (module)">DRb</a></span></span>
     &raquo; 
    <span class="title">DRbServer</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: DRb::DRbServer
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">DRb::DRbServer</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/drb/drb.rb<span class="defines">,<br />
  lib/drb/invokemethod.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Class representing a drb server instance.</p>

<p>A DRbServer must be running in the local process before any incoming dRuby
calls can be accepted, or any local objects can be passed as dRuby
references to remote processes, even if those local objects are never
actually called remotely. You do not need to start a DRbServer in the local
process if you are only making outgoing dRuby calls passing marshalled
parameters.</p>

<p>Unless multiple servers are being used, the local DRbServer is normally
started by calling DRb.start_service.</p>


  </div>
</div>
<div class="tags">
  
</div><h2>Defined Under Namespace</h2>
<p class="children">
   
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="DRbServer/InvokeMethod18Mixin.html" title="DRb::DRbServer::InvokeMethod18Mixin (module)">InvokeMethod18Mixin</a></span>
    
   
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="DRbServer/InvokeMethod.html" title="DRb::DRbServer::InvokeMethod (class)">InvokeMethod</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="INSECURE_METHOD-constant" class="">INSECURE_METHOD =
          <div class="docstring">
  <div class="discussion">
    
<p>List of insecure methods.</p>

<p>These methods are not callable via dRuby.</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span>
  <span class='symbol'>:__send__</span>
<span class='rbracket'>]</span></pre></dd>
      
        <dt id="acl-classvariable" class="">@@acl =
          
        </dt>
        <dd><pre class="code"><span class='kw'>nil</span></pre></dd>
      
        <dt id="idconv-classvariable" class="">@@idconv =
          
        </dt>
        <dd><pre class="code"><span class='const'>DRbIdConv</span><span class='period'>.</span><span class='id new'>new</span></pre></dd>
      
        <dt id="secondary_server-classvariable" class="">@@secondary_server =
          
        </dt>
        <dd><pre class="code"><span class='kw'>nil</span></pre></dd>
      
        <dt id="argc_limit-classvariable" class="">@@argc_limit =
          
        </dt>
        <dd><pre class="code"><span class='int'>256</span></pre></dd>
      
        <dt id="load_limit-classvariable" class="">@@load_limit =
          
        </dt>
        <dd><pre class="code"><span class='int'>256</span> <span class='op'>*</span> <span class='int'>102400</span></pre></dd>
      
        <dt id="verbose-classvariable" class="">@@verbose =
          
        </dt>
        <dd><pre class="code"><span class='kw'>false</span></pre></dd>
      
        <dt id="safe_level-classvariable" class="">@@safe_level =
          
        </dt>
        <dd><pre class="code"><span class='int'>0</span></pre></dd>
      
    </dl>
  


  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#config-instance_method" title="#config (instance method)">- (Object) <strong>config</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The configuration of this DRbServer.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#front-instance_method" title="#front (instance method)">- (Object) <strong>front</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The front object of the DRbServer.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#safe_level-instance_method" title="#safe_level (instance method)">- (Object) <strong>safe_level</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute safe_level.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#thread-instance_method" title="#thread (instance method)">- (Object) <strong>thread</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The main thread of this DRbServer.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#uri-instance_method" title="#uri (instance method)">- (Object) <strong>uri</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The URI of this DRbServer.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_acl-class_method" title="default_acl (class method)">+ (Object) <strong>default_acl</strong>(acl) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Set the default value for the :acl option.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_argc_limit-class_method" title="default_argc_limit (class method)">+ (Object) <strong>default_argc_limit</strong>(argc) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Set the default value for the :argc_limit option.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_id_conv-class_method" title="default_id_conv (class method)">+ (Object) <strong>default_id_conv</strong>(idconv) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Set the default value for the :id_conv option.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_load_limit-class_method" title="default_load_limit (class method)">+ (Object) <strong>default_load_limit</strong>(sz) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Set the default value for the :load_limit option.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_safe_level-class_method" title="default_safe_level (class method)">+ (Object) <strong>default_safe_level</strong>(level) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#make_config-class_method" title="make_config (class method)">+ (Object) <strong>make_config</strong>(hash = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#verbose-class_method" title="verbose (class method)">+ (Object) <strong>verbose</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get the default value of the :verbose option.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#verbose%3D-class_method" title="verbose= (class method)">+ (Object) <strong>verbose=</strong>(on) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Set the default value of the :verbose option.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#alive%3F-instance_method" title="#alive? (instance method)">- (Boolean) <strong>alive?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Is this server alive?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#any_to_s-instance_method" title="#any_to_s (instance method)">- (Object) <strong>any_to_s</strong>(obj) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Coerce an object to a string, providing our own representation if to_s is
not defined for the object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_insecure_method-instance_method" title="#check_insecure_method (instance method)">- (Object) <strong>check_insecure_method</strong>(obj, msg_id) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Check that a method is callable via dRuby.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#here%3F-instance_method" title="#here? (instance method)">- (Boolean) <strong>here?</strong>(uri) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (DRbServer) <strong>initialize</strong>(uri = nil, front = nil, config_or_acl = nil) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create a new DRbServer instance.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#insecure_method%3F-instance_method" title="#insecure_method? (instance method)">- (Boolean) <strong>insecure_method?</strong>(msg_id) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Has a method been included in the list of insecure methods?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#main_loop-instance_method" title="#main_loop (instance method)">- (Object) <strong>main_loop</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The main loop performed by a DRbServer's internal thread.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run-instance_method" title="#run (instance method)">- (Object) <strong>run</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stop_service-instance_method" title="#stop_service (instance method)">- (Object) <strong>stop_service</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Stop this server.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_id-instance_method" title="#to_id (instance method)">- (Object) <strong>to_id</strong>(obj) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Convert a local object to a dRuby reference.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_obj-instance_method" title="#to_obj (instance method)">- (Object) <strong>to_obj</strong>(ref) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Convert a dRuby reference to the local object it refers to.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#verbose-instance_method" title="#verbose (instance method)">- (Object) <strong>verbose</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get whether the server is in verbose mode.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#verbose%3D-instance_method" title="#verbose= (instance method)">- (Object) <strong>verbose=</strong>(v) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Set whether to operate in verbose mode.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="DRb::DRbServer (class)">DRbServer</a></span></tt>) <strong>initialize</strong>(uri = nil, front = nil, config_or_acl = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Create a new DRbServer instance.</p>

<p><tt>uri</tt> is the URI to bind to.  This is normally of the form
'druby://&lt;hostname&gt;:&lt;port&gt;' where &lt;hostname&gt; is a
hostname of the local machine.  If nil, then the system's default hostname
will be bound to, on a port selected by the system; these value can be
retrieved from the <tt>uri</tt> attribute.  'druby:' specifies the default
dRuby transport protocol: another protocol, such as 'drbunix:', can be
specified instead.</p>

<p><tt>front</tt> is the front object for the server, that is, the object to
which remote method calls on the server will be passed.  If nil, then the
server will not accept remote method calls.</p>

<p>If <tt>config_or_acl</tt> is a hash, it is the configuration to use for
this server.  The following options are recognised:</p>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>:idconv </p></td>
<td>
<p>an id-to-object conversion object.  This defaults to an instance of the
class DRb::DRbIdConv.</p>
</td></tr><tr><td class="rdoc-term"><p>:verbose </p></td>
<td>
<p>if true, all unsuccessful remote calls on objects in the server will be
logged to $stdout. false by default.</p>
</td></tr><tr><td class="rdoc-term"><p>:tcp_acl </p></td>
<td>
<p>the access control list for this server.  See the ACL class from the main
dRuby distribution.</p>
</td></tr><tr><td class="rdoc-term"><p>:load_limit </p></td>
<td>
<p>the maximum message size in bytes accepted by the server.  Defaults to 25
MB (26214400).</p>
</td></tr><tr><td class="rdoc-term"><p>:argc_limit </p></td>
<td>
<p>the maximum number of arguments to a remote method accepted by the server. 
Defaults to 256.</p>
</td></tr></table>

<p>The default values of these options can be modified on a class-wide basis
by the class methods #default_argc_limit, #default_load_limit,
#default_acl, #default_id_conv, and #verbose=</p>

<p>If <tt>config_or_acl</tt> is not a hash, but is not nil, it is assumed to
be the access control list for this server. See the :tcp_acl option for
more details.</p>

<p>If no other server is currently set as the primary server, this will become
the primary server.</p>

<p>The server will immediately start running in its own thread.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1330
1331
1332
1333
1334
1335
1336
1337
1338
1339
1340
1341
1342
1343
1344
1345
1346
1347
1348
1349
1350
1351
1352
1353
1354</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1330</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id uri'>uri</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id front'>front</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id config_or_acl'>config_or_acl</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='const'>Hash</span> <span class='op'>===</span> <span class='id config_or_acl'>config_or_acl</span>
    <span class='id config'>config</span> <span class='op'>=</span> <span class='id config_or_acl'>config_or_acl</span><span class='period'>.</span><span class='id dup'>dup</span>
  <span class='kw'>else</span>
    <span class='id acl'>acl</span> <span class='op'>=</span> <span class='id config_or_acl'>config_or_acl</span> <span class='op'>||</span> <span class='cvar'>@@acl</span>
    <span class='id config'>config</span> <span class='op'>=</span> <span class='lbrace'>{</span>
      <span class='symbol'>:tcp_acl</span> <span class='op'>=&gt;</span> <span class='id acl'>acl</span>
    <span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='ivar'>@config</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id make_config'>make_config</span><span class='lparen'>(</span><span class='id config'>config</span><span class='rparen'>)</span>

  <span class='ivar'>@protocol</span> <span class='op'>=</span> <span class='const'>DRbProtocol</span><span class='period'>.</span><span class='id open_server'>open_server</span><span class='lparen'>(</span><span class='id uri'>uri</span><span class='comma'>,</span> <span class='ivar'>@config</span><span class='rparen'>)</span>
  <span class='ivar'>@uri</span> <span class='op'>=</span> <span class='ivar'>@protocol</span><span class='period'>.</span><span class='id uri'>uri</span>
  <span class='ivar'>@exported_uri</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='ivar'>@uri</span><span class='rbracket'>]</span>

  <span class='ivar'>@front</span> <span class='op'>=</span> <span class='id front'>front</span>
  <span class='ivar'>@idconv</span> <span class='op'>=</span> <span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:idconv</span><span class='rbracket'>]</span>
  <span class='ivar'>@safe_level</span> <span class='op'>=</span> <span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:safe_level</span><span class='rbracket'>]</span>

  <span class='ivar'>@grp</span> <span class='op'>=</span> <span class='const'>ThreadGroup</span><span class='period'>.</span><span class='id new'>new</span>
  <span class='ivar'>@thread</span> <span class='op'>=</span> <span class='id run'>run</span>

  <span class='const'>DRb</span><span class='period'>.</span><span class='id regist_server'>regist_server</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="config-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="config-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>config</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>The configuration of this DRbServer</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1373
1374
1375</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1373</span>

<span class='kw'>def</span> <span class='id config'>config</span>
  <span class='ivar'>@config</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="front-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="front-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>front</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>The front object of the DRbServer.</p>

<p>This object receives remote method calls made on the server's URI alone,
with an object id.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1370
1371
1372</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1370</span>

<span class='kw'>def</span> <span class='id front'>front</span>
  <span class='ivar'>@front</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="safe_level-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="safe_level-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>safe_level</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute safe_level</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1375
1376
1377</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1375</span>

<span class='kw'>def</span> <span class='id safe_level'>safe_level</span>
  <span class='ivar'>@safe_level</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="thread-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="thread-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>thread</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>The main thread of this DRbServer.</p>

<p>This is the thread that listens for and accepts connections from clients,
not that handles each client's request-response session.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1364
1365
1366</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1364</span>

<span class='kw'>def</span> <span class='id thread'>thread</span>
  <span class='ivar'>@thread</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="uri-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="uri-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>uri</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>The URI of this DRbServer.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1357
1358
1359</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1357</span>

<span class='kw'>def</span> <span class='id uri'>uri</span>
  <span class='ivar'>@uri</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="default_acl-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>default_acl</strong>(acl) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Set the default value for the :acl option.</p>

<p>See #new().  The initial default value is nil.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1248
1249
1250</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1248</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id default_acl'>default_acl</span><span class='lparen'>(</span><span class='id acl'>acl</span><span class='rparen'>)</span>
  <span class='cvar'>@@acl</span> <span class='op'>=</span> <span class='id acl'>acl</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="default_argc_limit-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>default_argc_limit</strong>(argc) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Set the default value for the :argc_limit option.</p>

<p>See #new().  The initial default value is 256.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1234
1235
1236</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1234</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id default_argc_limit'>default_argc_limit</span><span class='lparen'>(</span><span class='id argc'>argc</span><span class='rparen'>)</span>
  <span class='cvar'>@@argc_limit</span> <span class='op'>=</span> <span class='id argc'>argc</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="default_id_conv-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>default_id_conv</strong>(idconv) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Set the default value for the :id_conv option.</p>

<p>See #new().  The initial default value is a DRbIdConv instance.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1255
1256
1257</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1255</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id default_id_conv'>default_id_conv</span><span class='lparen'>(</span><span class='id idconv'>idconv</span><span class='rparen'>)</span>
  <span class='cvar'>@@idconv</span> <span class='op'>=</span> <span class='id idconv'>idconv</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="default_load_limit-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>default_load_limit</strong>(sz) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Set the default value for the :load_limit option.</p>

<p>See #new().  The initial default value is 25 MB.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1241
1242
1243</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1241</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id default_load_limit'>default_load_limit</span><span class='lparen'>(</span><span class='id sz'>sz</span><span class='rparen'>)</span>
  <span class='cvar'>@@load_limit</span> <span class='op'>=</span> <span class='id sz'>sz</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="default_safe_level-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>default_safe_level</strong>(level) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1259
1260
1261</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1259</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id default_safe_level'>default_safe_level</span><span class='lparen'>(</span><span class='id level'>level</span><span class='rparen'>)</span>
  <span class='cvar'>@@safe_level</span> <span class='op'>=</span> <span class='id level'>level</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="make_config-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>make_config</strong>(hash = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1275
1276
1277
1278
1279
1280
1281
1282
1283
1284
1285</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1275</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id make_config'>make_config</span><span class='lparen'>(</span><span class='id hash'>hash</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>  <span class='comment'># :nodoc:
</span>  <span class='id default_config'>default_config</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='symbol'>:idconv</span> <span class='op'>=&gt;</span> <span class='cvar'>@@idconv</span><span class='comma'>,</span>
    <span class='symbol'>:verbose</span> <span class='op'>=&gt;</span> <span class='cvar'>@@verbose</span><span class='comma'>,</span>
    <span class='symbol'>:tcp_acl</span> <span class='op'>=&gt;</span> <span class='cvar'>@@acl</span><span class='comma'>,</span>
    <span class='symbol'>:load_limit</span> <span class='op'>=&gt;</span> <span class='cvar'>@@load_limit</span><span class='comma'>,</span>
    <span class='symbol'>:argc_limit</span> <span class='op'>=&gt;</span> <span class='cvar'>@@argc_limit</span><span class='comma'>,</span>
    <span class='symbol'>:safe_level</span> <span class='op'>=&gt;</span> <span class='cvar'>@@safe_level</span>
  <span class='rbrace'>}</span>
  <span class='id default_config'>default_config</span><span class='period'>.</span><span class='id update'>update</span><span class='lparen'>(</span><span class='id hash'>hash</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="verbose-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>verbose</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Get the default value of the :verbose option.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1271
1272
1273</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1271</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id verbose'>verbose</span>
  <span class='cvar'>@@verbose</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="verbose=-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>verbose=</strong>(on) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Set the default value of the :verbose option.</p>

<p>See #new().  The initial default value is false.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1266
1267
1268</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1266</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id verbose='>verbose=</span><span class='lparen'>(</span><span class='id on'>on</span><span class='rparen'>)</span>
  <span class='cvar'>@@verbose</span> <span class='op'>=</span> <span class='id on'>on</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="alive?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>alive?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Is this server alive?</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1388
1389
1390</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1388</span>

<span class='kw'>def</span> <span class='id alive?'>alive?</span>
  <span class='ivar'>@thread</span><span class='period'>.</span><span class='id alive?'>alive?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="any_to_s-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>any_to_s</strong>(obj) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Coerce an object to a string, providing our own representation if to_s is
not defined for the object.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1446
1447
1448
1449
1450</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1446</span>

<span class='kw'>def</span> <span class='id any_to_s'>any_to_s</span><span class='lparen'>(</span><span class='id obj'>obj</span><span class='rparen'>)</span>
  <span class='id obj'>obj</span><span class='period'>.</span><span class='id to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id obj'>obj</span><span class='period'>.</span><span class='id class'>class</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>rescue</span>
  <span class='id sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#&lt;%s:0x%lx&gt;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id obj'>obj</span><span class='period'>.</span><span class='id class'>class</span><span class='comma'>,</span> <span class='id obj'>obj</span><span class='period'>.</span><span class='id __id__'>__id__</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="check_insecure_method-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>check_insecure_method</strong>(obj, msg_id) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Check that a method is callable via dRuby.</p>

<p><tt>obj</tt> is the object we want to invoke the method on. <tt>msg_id</tt>
is the method name, as a Symbol.</p>

<p>If the method is an insecure method (see #insecure_method?) a SecurityError
is thrown.  If the method is private or undefined, a NameError is thrown.</p>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1460
1461
1462
1463
1464
1465
1466
1467
1468
1469
1470
1471
1472
1473
1474</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1460</span>

<span class='kw'>def</span> <span class='id check_insecure_method'>check_insecure_method</span><span class='lparen'>(</span><span class='id obj'>obj</span><span class='comma'>,</span> <span class='id msg_id'>msg_id</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='const'>Proc</span> <span class='op'>===</span> <span class='id obj'>obj</span> <span class='op'>&amp;&amp;</span> <span class='id msg_id'>msg_id</span> <span class='op'>==</span> <span class='symbol'>:__drb_yield</span>
  <span class='id raise'>raise</span><span class='lparen'>(</span><span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id any_to_s'>any_to_s</span><span class='lparen'>(</span><span class='id msg_id'>msg_id</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'> is not a symbol</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='const'>Symbol</span> <span class='op'>==</span> <span class='id msg_id'>msg_id</span><span class='period'>.</span><span class='id class'>class</span>
  <span class='id raise'>raise</span><span class='lparen'>(</span><span class='const'>SecurityError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>insecure method `</span><span class='embexpr_beg'>#{</span><span class='id msg_id'>msg_id</span><span class='rbrace'>}</span><span class='tstring_content'>'</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id insecure_method?'>insecure_method?</span><span class='lparen'>(</span><span class='id msg_id'>msg_id</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id obj'>obj</span><span class='period'>.</span><span class='id private_methods'>private_methods</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='id msg_id'>msg_id</span><span class='rparen'>)</span>
    <span class='id desc'>desc</span> <span class='op'>=</span> <span class='id any_to_s'>any_to_s</span><span class='lparen'>(</span><span class='id obj'>obj</span><span class='rparen'>)</span>
    <span class='id raise'>raise</span> <span class='const'>NoMethodError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>private method `</span><span class='embexpr_beg'>#{</span><span class='id msg_id'>msg_id</span><span class='rbrace'>}</span><span class='tstring_content'>' called for </span><span class='embexpr_beg'>#{</span><span class='id desc'>desc</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>elsif</span> <span class='id obj'>obj</span><span class='period'>.</span><span class='id protected_methods'>protected_methods</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='id msg_id'>msg_id</span><span class='rparen'>)</span>
    <span class='id desc'>desc</span> <span class='op'>=</span> <span class='id any_to_s'>any_to_s</span><span class='lparen'>(</span><span class='id obj'>obj</span><span class='rparen'>)</span>
    <span class='id raise'>raise</span> <span class='const'>NoMethodError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>protected method `</span><span class='embexpr_beg'>#{</span><span class='id msg_id'>msg_id</span><span class='rbrace'>}</span><span class='tstring_content'>' called for </span><span class='embexpr_beg'>#{</span><span class='id desc'>desc</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='kw'>true</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="here?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>here?</strong>(uri) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1392
1393
1394</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1392</span>

<span class='kw'>def</span> <span class='id here?'>here?</span><span class='lparen'>(</span><span class='id uri'>uri</span><span class='rparen'>)</span>
  <span class='ivar'>@exported_uri</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='id uri'>uri</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="insecure_method?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>insecure_method?</strong>(msg_id) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Has a method been included in the list of insecure methods?</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1440
1441
1442</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1440</span>

<span class='kw'>def</span> <span class='id insecure_method?'>insecure_method?</span><span class='lparen'>(</span><span class='id msg_id'>msg_id</span><span class='rparen'>)</span>
  <span class='const'>INSECURE_METHOD</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='id msg_id'>msg_id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="main_loop-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>main_loop</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>The main loop performed by a DRbServer's internal thread.</p>

<p>Accepts a connection from a client, and starts up its own thread to handle
it.  This thread loops, receiving requests from the client, invoking them
on a local object, and returning responses, until the client closes the
connection or a local method call fails.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1573
1574
1575
1576
1577
1578
1579
1580
1581
1582
1583
1584
1585
1586
1587
1588
1589
1590
1591
1592
1593
1594
1595
1596
1597
1598
1599
1600
1601
1602
1603</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1573</span>

<span class='kw'>def</span> <span class='id main_loop'>main_loop</span>
  <span class='const'>Thread</span><span class='period'>.</span><span class='id start'>start</span><span class='lparen'>(</span><span class='ivar'>@protocol</span><span class='period'>.</span><span class='id accept'>accept</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id client'>client</span><span class='op'>|</span>
    <span class='ivar'>@grp</span><span class='period'>.</span><span class='id add'>add</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id current'>current</span>
    <span class='const'>Thread</span><span class='period'>.</span><span class='id current'>current</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>DRb</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>client</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='id client'>client</span> <span class='comma'>,</span>
                              <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>server</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='kw'>self</span> <span class='rbrace'>}</span>
    <span class='const'>DRb</span><span class='period'>.</span><span class='id mutex'>mutex</span><span class='period'>.</span><span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
      <span class='id client_uri'>client_uri</span> <span class='op'>=</span> <span class='id client'>client</span><span class='period'>.</span><span class='id uri'>uri</span>
      <span class='ivar'>@exported_uri</span> <span class='op'>&lt;&lt;</span> <span class='id client_uri'>client_uri</span> <span class='kw'>unless</span> <span class='ivar'>@exported_uri</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='id client_uri'>client_uri</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id loop'>loop</span> <span class='kw'>do</span>
      <span class='kw'>begin</span>
        <span class='id succ'>succ</span> <span class='op'>=</span> <span class='kw'>false</span>
        <span class='id invoke_method'>invoke_method</span> <span class='op'>=</span> <span class='const'>InvokeMethod</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id client'>client</span><span class='rparen'>)</span>
        <span class='id succ'>succ</span><span class='comma'>,</span> <span class='id result'>result</span> <span class='op'>=</span> <span class='id invoke_method'>invoke_method</span><span class='period'>.</span><span class='id perform'>perform</span>
        <span class='kw'>if</span> <span class='op'>!</span><span class='id succ'>succ</span> <span class='op'>&amp;&amp;</span> <span class='id verbose'>verbose</span>
          <span class='id p'>p</span> <span class='id result'>result</span>
          <span class='id result'>result</span><span class='period'>.</span><span class='id backtrace'>backtrace</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id x'>x</span><span class='op'>|</span>
            <span class='id puts'>puts</span> <span class='id x'>x</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>
        <span class='id client'>client</span><span class='period'>.</span><span class='id send_reply'>send_reply</span><span class='lparen'>(</span><span class='id succ'>succ</span><span class='comma'>,</span> <span class='id result'>result</span><span class='rparen'>)</span> <span class='kw'>rescue</span> <span class='kw'>nil</span>
      <span class='kw'>ensure</span>
        <span class='id client'>client</span><span class='period'>.</span><span class='id close'>close</span> <span class='kw'>unless</span> <span class='id succ'>succ</span>
        <span class='kw'>if</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id current'>current</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>DRb</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>stop_service</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
          <span class='const'>Thread</span><span class='period'>.</span><span class='id new'>new</span> <span class='lbrace'>{</span> <span class='id stop_service'>stop_service</span> <span class='rbrace'>}</span>
        <span class='kw'>end</span>
        <span class='kw'>break</span> <span class='kw'>unless</span> <span class='id succ'>succ</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="run-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>run</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1420
1421
1422
1423
1424
1425
1426
1427
1428
1429
1430</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1420</span>

<span class='kw'>def</span> <span class='id run'>run</span>
  <span class='const'>Thread</span><span class='period'>.</span><span class='id start'>start</span> <span class='kw'>do</span>
    <span class='kw'>begin</span>
      <span class='kw'>while</span> <span class='kw'>true</span>
        <span class='id main_loop'>main_loop</span>
      <span class='kw'>end</span>
    <span class='kw'>ensure</span>
      <span class='ivar'>@protocol</span><span class='period'>.</span><span class='id close'>close</span> <span class='kw'>if</span> <span class='ivar'>@protocol</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="stop_service-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>stop_service</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Stop this server.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1397
1398
1399
1400
1401
1402
1403
1404</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1397</span>

<span class='kw'>def</span> <span class='id stop_service'>stop_service</span>
  <span class='const'>DRb</span><span class='period'>.</span><span class='id remove_server'>remove_server</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
  <span class='kw'>if</span>  <span class='const'>Thread</span><span class='period'>.</span><span class='id current'>current</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>DRb</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id current'>current</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>DRb</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>server</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>self</span>
    <span class='const'>Thread</span><span class='period'>.</span><span class='id current'>current</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>DRb</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>stop_service</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>else</span>
    <span class='ivar'>@thread</span><span class='period'>.</span><span class='id kill'>kill</span><span class='period'>.</span><span class='id join'>join</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="to_id-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>to_id</strong>(obj) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Convert a local object to a dRuby reference.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1414
1415
1416
1417</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1414</span>

<span class='kw'>def</span> <span class='id to_id'>to_id</span><span class='lparen'>(</span><span class='id obj'>obj</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id obj'>obj</span><span class='period'>.</span><span class='id __id__'>__id__</span> <span class='op'>==</span> <span class='id front'>front</span><span class='period'>.</span><span class='id __id__'>__id__</span>
  <span class='ivar'>@idconv</span><span class='period'>.</span><span class='id to_id'>to_id</span><span class='lparen'>(</span><span class='id obj'>obj</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="to_obj-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>to_obj</strong>(ref) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Convert a dRuby reference to the local object it refers to.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1407
1408
1409
1410
1411</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1407</span>

<span class='kw'>def</span> <span class='id to_obj'>to_obj</span><span class='lparen'>(</span><span class='id ref'>ref</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id front'>front</span> <span class='kw'>if</span> <span class='id ref'>ref</span><span class='period'>.</span><span class='id nil?'>nil?</span>
  <span class='kw'>return</span> <span class='id front'>front</span><span class='lbracket'>[</span><span class='id ref'>ref</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='const'>DRbURIOption</span> <span class='op'>===</span> <span class='id ref'>ref</span>
  <span class='ivar'>@idconv</span><span class='period'>.</span><span class='id to_obj'>to_obj</span><span class='lparen'>(</span><span class='id ref'>ref</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="verbose-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>verbose</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Get whether the server is in verbose mode.</p>

<p>In verbose mode, failed calls are logged to stdout.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1385</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1385</span>

<span class='kw'>def</span> <span class='id verbose'>verbose</span><span class='semicolon'>;</span> <span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span><span class='semicolon'>;</span> <span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="verbose=-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>verbose=</strong>(v) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>Set whether to operate in verbose mode.</p>

<p>In verbose mode, failed calls are logged to stdout.</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1380</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1380</span>

<span class='kw'>def</span> <span class='id verbose='>verbose=</span><span class='lparen'>(</span><span class='id v'>v</span><span class='rparen'>)</span><span class='semicolon'>;</span> <span class='ivar'>@config</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span><span class='op'>=</span><span class='id v'>v</span><span class='semicolon'>;</span> <span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sat Sep  3 14:10:16 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.9.3).
</div>

  </body>
</html>