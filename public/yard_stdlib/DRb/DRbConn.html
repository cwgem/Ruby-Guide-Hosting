<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: DRb::DRbConn
  
    &mdash; Ruby 1.9 Ruby Standard Library
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (D)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../DRb.html" title="DRb (module)">DRb</a></span></span>
     &raquo; 
    <span class="title">DRbConn</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: DRb::DRbConn
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">DRb::DRbConn</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/drb/drb.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Class handling the connection between a DRbObject and the server the real
object lives on.</p>

<p>This class maintains a pool of connections, to reduce the overhead of
starting and closing down connections for each method call.</p>

<p>This class is used internally by DRbObject.  The user does not normally
need to deal with it directly.</p>


  </div>
</div>
<div class="tags">
  
</div>
  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="POOL_SIZE-constant" class="">POOL_SIZE =
          <div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='int'>16</span></pre></dd>
      
    </dl>
  


  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#uri-instance_method" title="#uri (instance method)">- (Object) <strong>uri</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#open-class_method" title="open (class method)">+ (Object) <strong>open</strong>(remote_uri) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#alive%3F-instance_method" title="#alive? (instance method)">- (Boolean) <strong>alive?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#close-instance_method" title="#close (instance method)">- (Object) <strong>close</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (DRbConn) <strong>initialize</strong>(remote_uri) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_message-instance_method" title="#send_message (instance method)">- (Object) <strong>send_message</strong>(ref, msg_id, arg, block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="DRb::DRbConn (class)">DRbConn</a></span></tt>) <strong>initialize</strong>(remote_uri) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1189
1190
1191
1192</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1189</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id remote_uri'>remote_uri</span><span class='rparen'>)</span>  <span class='comment'># :nodoc:
</span>  <span class='ivar'>@uri</span> <span class='op'>=</span> <span class='id remote_uri'>remote_uri</span>
  <span class='ivar'>@protocol</span> <span class='op'>=</span> <span class='const'>DRbProtocol</span><span class='period'>.</span><span class='id open'>open</span><span class='lparen'>(</span><span class='id remote_uri'>remote_uri</span><span class='comma'>,</span> <span class='const'>DRb</span><span class='period'>.</span><span class='id config'>config</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="uri-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="uri-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>uri</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1193
1194
1195</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1193</span>

<span class='kw'>def</span> <span class='id uri'>uri</span>
  <span class='ivar'>@uri</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="open-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>open</strong>(remote_uri) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1154
1155
1156
1157
1158
1159
1160
1161
1162
1163
1164
1165
1166
1167
1168
1169
1170
1171
1172
1173
1174
1175
1176
1177
1178
1179
1180
1181
1182
1183
1184
1185
1186
1187</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1154</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id open'>open</span><span class='lparen'>(</span><span class='id remote_uri'>remote_uri</span><span class='rparen'>)</span>  <span class='comment'># :nodoc:
</span>  <span class='kw'>begin</span>
    <span class='id conn'>conn</span> <span class='op'>=</span> <span class='kw'>nil</span>

    <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
      <span class='comment'>#FIXME
</span>      <span class='id new_pool'>new_pool</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
      <span class='ivar'>@pool</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id c'>c</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id conn'>conn</span><span class='period'>.</span><span class='id nil?'>nil?</span> <span class='kw'>and</span> <span class='id c'>c</span><span class='period'>.</span><span class='id uri'>uri</span> <span class='op'>==</span> <span class='id remote_uri'>remote_uri</span>
          <span class='id conn'>conn</span> <span class='op'>=</span> <span class='id c'>c</span> <span class='kw'>if</span> <span class='id c'>c</span><span class='period'>.</span><span class='id alive?'>alive?</span>
        <span class='kw'>else</span>
          <span class='id new_pool'>new_pool</span><span class='period'>.</span><span class='id push'>push</span> <span class='id c'>c</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
      <span class='ivar'>@pool</span> <span class='op'>=</span> <span class='id new_pool'>new_pool</span>
    <span class='kw'>end</span>

    <span class='id conn'>conn</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id remote_uri'>remote_uri</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id conn'>conn</span>
    <span class='id succ'>succ</span><span class='comma'>,</span> <span class='id result'>result</span> <span class='op'>=</span> <span class='kw'>yield</span><span class='lparen'>(</span><span class='id conn'>conn</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id succ'>succ</span><span class='comma'>,</span> <span class='id result'>result</span>

  <span class='kw'>ensure</span>
    <span class='kw'>if</span> <span class='id conn'>conn</span>
      <span class='kw'>if</span> <span class='id succ'>succ</span>
        <span class='ivar'>@mutex</span><span class='period'>.</span><span class='id synchronize'>synchronize</span> <span class='kw'>do</span>
          <span class='ivar'>@pool</span><span class='period'>.</span><span class='id unshift'>unshift</span><span class='lparen'>(</span><span class='id conn'>conn</span><span class='rparen'>)</span>
          <span class='ivar'>@pool</span><span class='period'>.</span><span class='id pop'>pop</span><span class='period'>.</span><span class='id close'>close</span> <span class='kw'>while</span> <span class='ivar'>@pool</span><span class='period'>.</span><span class='id size'>size</span> <span class='op'>&gt;</span> <span class='const'>POOL_SIZE</span>
        <span class='kw'>end</span>
      <span class='kw'>else</span>
        <span class='id conn'>conn</span><span class='period'>.</span><span class='id close'>close</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="alive?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>alive?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1205
1206
1207
1208</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1205</span>

<span class='kw'>def</span> <span class='id alive?'>alive?</span>  <span class='comment'># :nodoc:
</span>  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='ivar'>@protocol</span>
  <span class='ivar'>@protocol</span><span class='period'>.</span><span class='id alive?'>alive?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="close-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>close</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1200
1201
1202
1203</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1200</span>

<span class='kw'>def</span> <span class='id close'>close</span>  <span class='comment'># :nodoc:
</span>  <span class='ivar'>@protocol</span><span class='period'>.</span><span class='id close'>close</span>
  <span class='ivar'>@protocol</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="send_message-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>send_message</strong>(ref, msg_id, arg, block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1195
1196
1197
1198</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drb/drb.rb', line 1195</span>

<span class='kw'>def</span> <span class='id send_message'>send_message</span><span class='lparen'>(</span><span class='id ref'>ref</span><span class='comma'>,</span> <span class='id msg_id'>msg_id</span><span class='comma'>,</span> <span class='id arg'>arg</span><span class='comma'>,</span> <span class='id block'>block</span><span class='rparen'>)</span>  <span class='comment'># :nodoc:
</span>  <span class='ivar'>@protocol</span><span class='period'>.</span><span class='id send_request'>send_request</span><span class='lparen'>(</span><span class='id ref'>ref</span><span class='comma'>,</span> <span class='id msg_id'>msg_id</span><span class='comma'>,</span> <span class='id arg'>arg</span><span class='comma'>,</span> <span class='id block'>block</span><span class='rparen'>)</span>
  <span class='ivar'>@protocol</span><span class='period'>.</span><span class='id recv_reply'>recv_reply</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sat Sep  3 14:10:15 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.9.3).
</div>

  </body>
</html>